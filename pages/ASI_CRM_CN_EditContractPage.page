<!--
 * Name:        ASI_CRM_CN_EditContractPage
 * Description: Visualforce Page for PO Open
 *
 * Version History
 * Date             Developer               Comments
 * ============  ====================   ===============
 * 2018-12-05       Keith Yip               Handle PO open for Promotion Contract (PO Type = Wholesaler Promotion/Consumer Promotion/Outlet Promotion)
 -->
<apex:page standardController="ASI_TH_CRM_Contract__c" extensions="ASI_CRM_CN_Contract_Controller">
<apex:stylesheet value="{!URLFOR($Resource.ASI_CRM_CN_Jquery, 'jquery-ui1.10.4.css')}"/>
<apex:includeScript value="{!URLFOR($Resource.ASI_CRM_CN_Jquery, 'jquery1.10.2.min.js')}"/>
<apex:includeScript value="{!URLFOR($Resource.ASI_CRM_CN_Jquery, 'jquery-ui1.10.4.min.js')}"/>
<style type="text/css">
    .ui-autocomplete {
    	max-height: 300px;
    	overflow-y: auto;
    	/* prevent horizontal scrollbar */
    	overflow-x: hidden;
    	/* add padding to account for vertical scrollbar */
    	padding-right: 20px;
    	}
    	/* IE 6 doesn't support max-heightASI_CRM_CN_KPI_Base__c
    	* we use height instead, but this forces the menu to always be this tall
    	*/
    	* html .ui-autocomplete {
    	height: 300px;
    }    
</style>
<script type='text/javascript'>
    var cityIdMap = [];
    var cityNameMap = [];
    var cityProvinceMap = [];
    var cityAllMap = [];
    var nationGroupMap = [];
    
    $(function(){
        
        var s = '{!nationGroup}';
        s = s.replace(/[\[\]]/g, '');
        s = s.split(',');
        $('#nationalHelpIcon').hover(function(){
            $('div#nationalHelptext').css('display', 'block');
        }, function(){
        	$('div#nationalHelptext').css('display', 'none');
        });
        
        for(var i = 0 ; i < s.length ; i++){
            
            var key = s[i].replace(' ', '').split('###')[0];
            var val = s[i].split('###')[1];
            nationGroupMap[key] = val;
        }
        getCity();
        //findCity();
    });
    
    function getCity(){
        ASI_CRM_CN_Contract_Controller.findCitySObjects('ASI_CRM_City__c', function(result, event){
            if(event.type == 'exception') {
                alert(event.message);
            } else {
                for(i = 0 ; i < result.length ; i++){
                    var a = result[i].split('$$$');
                    cityAllMap[i] = a[0];
                    if(cityProvinceMap[a[2]] != undefined)
                    {
                        var b = [];
                        b = cityProvinceMap[a[2]];
                        b.push(a[0]);
                        cityProvinceMap[a[2]] = b;
                    }
                    else
                    {
                        var temp = [];
                        temp.push(a[0]);
                        cityProvinceMap[a[2]] = temp;
                    }
                    cityIdMap[a[0]] = a[1];
                    cityNameMap[a[1]] = a[0];
                }
                findCity();
            }
        }) 
    }
    
    function findCity(){
        if(!$('.poProvince').val() || cityProvinceMap[$('.poProvince').val()].indexOf($('.poCity').val()) < 0){
            $('.poCity').val(null);
            $('.poCityId').val(null);
        }
        
        $('.poCity').autocomplete({
            source : cityProvinceMap[$('.poProvince').val()],
            minLength : 0,
            scroll : true,
            select : function( event, ui )
            {
                $(this).parent().parent().parent().find('.poCityId').val(cityIdMap[ui.item.value]);
            },
            focus : function(event, ui){
                $(this).val(ui.item.label);
                event.preventDefault();
            }
        }).focus(function () {
            $(this).autocomplete("search", "");
        });
        var tmp = $('.poCity').parent().parent().parent().find('.poCityId').val();
        var val = $('.poCity').val();
        if(tmp){
            if(cityNameMap[tmp])
                $('.poCity').val(cityNameMap[tmp]);
        }else if(!tmp && val){
            if(cityIdMap[val])
                $('.poCity').parent().parent().parent().find('.poCityId').val(cityIdMap[val]);
        }
    }
    
    //20161018 Ben @ Elufa
    function stopRKey(evt) {
        
        var evt = (evt) ? evt : ((event) ? event : null);
        var node = (evt.target) ? evt.target : ((evt.srcElement) ? evt.srcElement : null);
        
        if ((evt.keyCode == 13) && (node.type=="text")) {return false;}
    }

    function findGroupContracts(){
        //let promotionType = '{!ContractSelected.ASI_TH_CRM_Promotion_Type__c}';
        let promotionType = $("[id$='PromotionType']").val();
        let startDate = $("[id$='startDateInput']").val();
        let endDate = $("[id$='endDateInput']").val();
        
        if(promotionType === 'TOT/MOT Contract' && startDate && endDate){
            findGroupContractsApex();
        }else if((promotionType =='Wholesaler Promotion' || promotionType =='Consumer Promotion' || promotionType =='Outlet Promotion') && startDate && endDate){
            findPromotionGroupContractsApex();
        }
    }

    //20191028:AM@Introv - fix issue that PO Province is not rendered after outlet change
    function changeOutlet() {
        findCity();
        findGroupContracts();
    }

    document.onkeypress = stopRKey;
 
</script>
<apex:form >
    <apex:actionFunction name="findGroupContractsApex" action="{!genGroupContractPicklist}" status="ActionStatus" reRender="groupContractPicklist,groupContractPicklistCN,headerPageMsg"/>
    <apex:actionFunction name="findPromotionGroupContractsApex" action="{!genPromotionGroupContractPicklist}" status="ActionStatus" reRender="groupContractPicklist,groupContractPicklistCN,headerPageMsg"/>
    <apex:actionFunction name="OnGroupContractChangeApex" action="{!GroupContractChange}" status="ActionStatus" reRender="DataSourceSection"/>
    <apex:actionstatus id="ActionStatus">
        <apex:facet name="start">
            <div class="waitingSearchDiv" id="el_loading" style="background-color: #fbfbfb;
                                                                     height: 100%; width:100%; opacity:0.65;">
                <div class="waitingHolder" id="loadtext" style="position: absolute;" align="left" valign="top">
                    &nbsp;&nbsp;&nbsp;
                    <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." />
                    <span class="waitingDescription">Please Wait...</span>
                </div>
            </div>
        </apex:facet>
    </apex:actionstatus>


    <apex:pageMessages id="headerPageMsg" /><!--20170203 Elufa added id="headerPageMsg"-->
<apex:outputPanel id="is_EN" rendered="{!!showCN}">
<apex:pageblock title="Contract" >
    
    <apex:pageblockButtons >
        <apex:commandButton value="Save" action="{!UpdateContractRecord}"/>
        <apex:commandButton value="Cancel" action="{!cancel}"/><!--{!GoURL}"/-->
     </apex:pageblockButtons>
    
    <apex:actionstatus id="ActionStatus">
        <apex:facet name="start">
            <div class="waitingSearchDiv" id="el_loading" style="background-color: #fbfbfb;
                   height: 100%;opacity:0.65;width:100%;"> 
                <div class="waitingHolder" style="top: 74.2px; width: 91px;">
                    <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." />
                    <span class="waitingDescription">Please Wait...</span>
                </div>
            </div>
        </apex:facet>
    </apex:actionstatus>
   
    <apex:pageblocksection title="Header Information" rendered="{!!isCreate}">
        <apex:pageblockSectionItem >
            <apex:outputText value="Contract No."/>
            <apex:outputField value="{!ContractSelected.Name}" />
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputText value="PO Start Date"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_PO_Start_Date__c}" required="true"/>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputText value="PO No."/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_PO_No__c}" />
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputText value="PO End Date"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_PO_End_Date__c}" required="true"/>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputText value="PO Version"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_PO_Version__c}" />
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputText value="Bottle Collection Rate"/>
            <apex:outputPanel >
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Bottle_Collection_Rate__c}" required="true" rendered="{!!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Bottle_Collection_Rate__c}" rendered="{!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputText value="PP No."/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_PP_No__c}" />
        </apex:pageblockSectionItem>
        
        <apex:pageblockSectionItem >
		
            <apex:outputText value="Outlet/WS"/>
            <apex:outputPanel >
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Outlet_WS__c}" rendered="{!!ContractSelected.ASI_CRM_CN_PO_Modification__c}"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Outlet_WS__c}" rendered="{!ContractSelected.ASI_CRM_CN_PO_Modification__c}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputText value="Status"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Status__c}" />
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputText value="{!if(ContractSelected.ASI_CRM_New_FY_PO__c, 'PO Type', 'Promotion Type')}"/><!--20160627 Ben @ Elufa-->
            <apex:outputPanel >
            <apex:outputField value="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c}"  rendered="{!!ContractSelected.ASI_CRM_CN_PO_Modification__c}"/>
            <apex:outputField value="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c}" rendered="{!ContractSelected.ASI_CRM_CN_PO_Modification__c}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputPanel ><apex:outputText value="Source of Contract"/><img src="/s.gif" alt="Help" class="helpIcon" title="This is Help Message"/></apex:outputPanel>
            <apex:outputPanel >
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c}" required="true" rendered="{!!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}">
                   <apex:actionSupport event="onchange" rerender="source, source1" />
            </apex:inputField>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c}" rendered="{!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>  
        <apex:pageblockSectionItem >
            <apex:outputText value="Vol Budget/LE (9L)"/>
            <apex:outputPanel >
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Vol_Budget_LE__c}" rendered="{!!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Vol_Budget_LE__c}" rendered="{!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>
        
        
        
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c=='Others'}">
            <apex:outputText value="Source (Others)" id="source" />
            <apex:outputPanel >
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Source_Others__c}" id="source1" rendered="{!!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Source_Others__c}"  rendered="{!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c!='Others'}">
            <apex:outputText value="A&P Budget/LE (RMB)"/>
            <apex:outputPanel >
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Budget_LE__c}" rendered="{!!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Budget_LE__c}"  rendered="{!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>        
        <apex:pageblockSectionItem >
            <apex:outputText value="Description"/>
            <apex:inputField style="height:15em;width:30em" value="{!ContractSelected.ASI_CRM_CN_Description__c}" />
        </apex:pageblockSectionItem>
     
        
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c=='Others'}">
            <apex:outputText value="A&P Budget/LE (RMB)"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Budget_LE__c}" />
        </apex:pageblockSectionItem>
        
        <!------------------Laputa comment  
        
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_PO_Version__c == '0.0'}">
            <apex:outputText value="National Group">
                <div id="nationalHelptext" class="helpText" style="display: none; opacity: 0.99;position:absolute;left:25%;top:5%">If you want to change V0.0 National Group value, please contact HQ BA or IT<br/>如需更改v0.0合同的全国集团, 请联络HQ BA或IT</div>
                <img src="/s.gif" alt="Help" id="nationalHelpIcon" class="helpIcon" title="" style="position:relative; left :100px;" />
            </apex:outputText>
            <apex:outputField value="{!ContractSelected.ASI_CRM_NationalGroup__c}"/>
        </apex:pageblockSectionItem>
        --------------->
        <!-- 20170523 commented-->
        <!--<apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_PO_Version__c != '0.0'}">
            <apex:outputText value="National Group" />
            <apex:selectList styleClass="nationalGroup" value="{!ContractSelected.ASI_CRM_National_Group__c}" multiselect="false" size="1" >
                <apex:selectOptions value="{!AllNationalGroup}"/>
            </apex:selectList>
        </apex:pageblockSectionItem>-->
        <!--20170201 End-->
        
        <!--20160627 Ben @ Elufa-->
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" >
            <apex:outputText rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" value="PO Channel" />
            <apex:outputField rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" value="{!ContractSelected.ASI_CRM_PO_Channel__c}"/>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" >
            <apex:outputText rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" value="PO City" />
            <apex:outputField rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" value="{!ContractSelected.ASI_CRM_PO_City__c}" />
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" >
            <apex:outputText rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" value="PO Province" />
            <apex:outputField rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" value="{!ContractSelected.ASI_CRM_PO_Province__c}" />
        </apex:pageblockSectionItem>
		<!--20160627 End-->        
        
         
        <apex:pageblockSectionItem >
            <apex:outputText style=" {!IF(ContractSelected.ASI_TH_CRM_Promotion_Type__c=='Heavy Contract On','display:none;','')} "  value="Investment Type"   id="PromotionTypeInput6"  />
            <apex:inputField style=" {!IF(ContractSelected.ASI_TH_CRM_Promotion_Type__c=='Heavy Contract On','display:none;','')} "  value="{!ContractSelected.ASI_CRM_Investment_Type__c}"  id="PromotionTypeInput7"    />
        </apex:pageblockSectionItem>

        
		
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c!='Others'}">
        </apex:pageblockSectionItem>
        
        <!-- is dolphin -->
        <!-- <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract' && DolphinPoPermission}">
            <apex:outputText value="Is Dolphin" />
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c}">
                <apex:actionSupport event="onchange" action="{!changeDolphin}" rerender="activityTimes,targetBase"/>
            </apex:inputField>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c}" id="activityTimes">
            <apex:outputText value="Activity Times" />
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Activity_Times__c}"/>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c}" 
        id="targetBase">
            <apex:outputText value="Volume/Value Base"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Target_Base__c}"/>
        </apex:pageblockSectionItem> -->
        
    </apex:pageblocksection>
    
    
    <apex:pageblocksection title="Header Information" rendered="{!isCreate}" id="header" >
        <apex:pageblockSectionItem >
            <apex:outputText value="Outlet/WS"/>
            <apex:actionRegion >
                <!-- //20191028:AM@Introv - fix issue that PO Province is not rendered after outlet change -->
                <!--
                <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Outlet_WS__c}" required="true" onChange="findGroupContracts()">
                    <apex:actionSupport oncomplete="findCity()" event="onchange" action="{!setCustomerChannel}" rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" status="ActionStatus" reRender="Information1, Information11, Information22, Information2, Information33, Information3, Information3a, header" />
                </apex:inputField>
            	-->
                <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Outlet_WS__c}" required="true" >
                    <apex:actionSupport oncomplete="findGroupContracts()" event="onchange" action="{!setCustomerChannel}" rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" status="ActionStatus" reRender="Information1, Information11, Information22, Information2, Information33, Information3, Information3a, header" /><!--20160606 Ben @ Elufa-->
                </apex:inputField>
            </apex:actionRegion>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputText value="PO Start Date"/>
            <apex:inputField id="startDateInput" value="{!ContractSelected.ASI_CRM_CN_PO_Start_Date__c}" required="true" onChange="findGroupContracts()"/>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            
            <apex:outputText value="{!if(ContractSelected.ASI_CRM_New_FY_PO__c, 'PO Type', 'Promotion Type')}"/>
             <apex:actionRegion >
                <apex:outputPanel styleClass="requiredInput" layout="block">
                <apex:outputPanel styleClass="requiredBlock"/>
                    <apex:selectList value="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c}" multiselect="false" size="1" required="true" id="PromotionType">
                        <apex:selectoptions value="{!poTypeOption}"/>
                        <apex:actionSupport event="onchange" action="{!SetSpecialPromotionType_BCRate}" status="ActionStatus" reRender="BCRate, MBCRateLabel, MBCRate,PromotionType1, PromotionType2, PromotionType3, PromotionType4, PromotionType5, ASI_CRM_CN_Bottle_Collection_Rate__c,ASI_CRM_CN_Reason_without_Budget__c,ASI_CRM_CN_Use_PRC_Contract_Template__c, header"  />
                    </apex:selectList>
                </apex:outputPanel>
            </apex:actionRegion>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputText value="PO End Date"/>
            <apex:inputField id="endDateInput" value="{!ContractSelected.ASI_CRM_CN_PO_End_Date__c}" required="true" onChange="findGroupContracts()"/>
        </apex:pageblockSectionItem>
        <!--2018-12-05 Keith Yip-->
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Wholesaler Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Consumer Promotion' &&  ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Outlet Promotion'}">
        <!--2018-12-05 Keith Yip-->
            <apex:outputPanel ><apex:outputText value="Source of Contract"/><img src="/s.gif" alt="Help" class="helpIcon" title="This is Help Message"/></apex:outputPanel>            
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c}" required="true">
                <apex:actionSupport event="onchange" rerender="source, source1" />
            </apex:inputField>
        </apex:pageblockSectionItem>
        <!--2018-12-05 Keith Yip-->
        <apex:pageblockSectionItem id="DataSourceSection" rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Wholesaler Promotion' || ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Consumer Promotion' ||  ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Outlet Promotion'}">
            <apex:outputText value="Data Source"/>
            <apex:inputField required="true" value="{!ContractSelected.ASI_CRM_CN_Data_Source__c}" />
        </apex:pageblockSectionItem>
        <!--2018-12-05 Keith Yip-->
        
                  
        <!--2018-12-05 Keith Yip-->
        <apex:pageblockSectionItem id="ASI_CRM_CN_Bottle_Collection_Rate__c"
          rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Wholesaler Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Consumer Promotion' &&  ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Outlet Promotion'}">
        <!--2018-12-05 Keith Yip-->
            <apex:outputText value="Bottle Collection Rate" style="{!IF(ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'TOT/MOT Contract','','display:none')}"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Bottle_Collection_Rate__c}" id="BCRate" style="{!IF(ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'TOT/MOT Contract','','display:none')}"/>
        </apex:pageblockSectionItem>
    
        
        <apex:pageblockSectionItem >
            <apex:outputText value="Vol Budget/LE (9L)"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Vol_Budget_LE__c}" />
        </apex:pageblockSectionItem>

        <!--2019-08-22 Keith Yip-->
        <apex:pageblockSectionItem id="ASI_CRM_CN_Festival_Season__c"
                                   rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Wholesaler Promotion' || ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Consumer Promotion' ||  ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Outlet Promotion'}">
            <apex:outputText value="Festival Season"/>
            <apex:inputField required="true" value="{!ContractSelected.ASI_CRM_CN_Festival_Season__c}" />
        </apex:pageblockSectionItem>
        <!--2019-08-22 Keith Yip-->

        <!--2018-12-05 Keith Yip-->
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Wholesaler Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Consumer Promotion' &&  ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Outlet Promotion'}">
        <!--2018-12-05 Keith Yip-->
            <apex:outputText style=" {!IF(ContractSelected.ASI_TH_CRM_Promotion_Type__c=='Heavy Contract On','','display:none;')} "   value="Martell Bottle Collection Rate" id="MBCRateLabel"  />
            <apex:inputField style=" {!IF(ContractSelected.ASI_TH_CRM_Promotion_Type__c=='Heavy Contract On','','display:none;')} "   value="{!ContractSelected.ASI_CRM_Martell_BC_Rate__c}" id="MBCRate" />
        </apex:pageblockSectionItem>
        
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c!='Others'}">
            <apex:outputText value="A&P Budget/LE (RMB)"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Budget_LE__c}" />
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c=='Others'}"/>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c=='Others'}">
            <apex:outputText value="A&P Budget/LE (RMB)"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Budget_LE__c}" />
        </apex:pageblockSectionItem>
       
        <!--2018-12-05 Keith Yip-->                          
        <apex:pageblockSectionItem id="ASI_CRM_CN_PO_Division__c"
        rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Wholesaler Promotion' || ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Consumer Promotion' ||  ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Outlet Promotion'}">
            <apex:outputText value="Division"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_PO_Division__c}" />
        </apex:pageblockSectionItem>
        <!--2018-12-05 Keith Yip-->

        <apex:pageblockSectionItem >
            <apex:outputText value="Status"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Status__c}" />
        </apex:pageblockSectionItem> 
        <apex:pageblockSectionItem >
            <apex:outputText value="Description"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Description__c}" style="height:15em;width:30em"   />
        </apex:pageblockSectionItem>
        <!--2018-12-05 Keith Yip-->
        <!--<apex:pageblockSectionItem id="ASI_CRM_CN_Reason_without_Budget__c" rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract'}">-->
        <apex:pageblockSectionItem id="ASI_CRM_CN_Reason_without_Budget__c"
        rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract' ||
                   ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Wholesaler Promotion' || ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Consumer Promotion' ||  ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Outlet Promotion'}">
        <!--2018-12-05 Keith Yip-->
            <apex:outputText value="Reason without Budget/LE"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Reason_without_Budget__c}" />
        </apex:pageblockSectionItem>

        <apex:pageblockSectionItem id="ASI_CRM_CN_Use_PRC_Contract_Template__c" rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract'}">

            <apex:outputLabel id="ASI_CRM_CN_Use_PRC_Contract_Template__c" value="Use PRC Contract Template" for="theCheckbox"/>
            <apex:inputCheckbox id="theCheckbox" value="{!ContractSelected.ASI_CRM_CN_Use_PRC_Contract_Template__c}" disabled="{!IsDolphinDivision}"/>
        </apex:pageblockSectionItem>


        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" >
            <apex:inputText style="display:none" styleClass="poCityId" value="{!ContractSelected.ASI_CRM_PO_City__c}" id="Information3a"/>
        </apex:pageblockSectionItem>
        
        <!--2018-12-05 Keith Yip-->							
        <!--<apex:pageblockSectionItem rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'TOT/MOT Contract'}"> -->
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'TOT/MOT Contract' &&
                                              ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Wholesaler Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Consumer Promotion' &&  ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Outlet Promotion'}">
        <!--2018-12-05 Keith Yip-->
            <apex:outputText style=" {!IF(ContractSelected.ASI_TH_CRM_Promotion_Type__c=='Heavy Contract On','display:none;','')} "  value="Investment Type"   id="PromotionType1"  />
            <apex:inputField style=" {!IF(ContractSelected.ASI_TH_CRM_Promotion_Type__c=='Heavy Contract On','display:none;','')} "  value="{!ContractSelected.ASI_CRM_Investment_Type__c}"  id="PromotionType2"    />
																								 
							   
        </apex:pageblockSectionItem>
        
        <!--20170201 Elufa
        <apex:pageblockSectionItem >
            <apex:outputText value="National Group">
                <div id="nationalHelptext" class="helpText" style="display: none; opacity: 0.99;position:absolute;left:25%;top:5%">If you want to change V0.0 National Group value, please contact HQ BA or IT<br/>如需更改v0.0合同的全国集团, 请联络HQ BA或IT</div>
                <img src="/s.gif" alt="Help" id="nationalHelpIcon" class="helpIcon" title="" style="position:relative; left :90px;" />
            </apex:outputText>
            <apex:outputField value="{!ContractSelected.ASI_CRM_NationalGroup__c}" />
        </apex:pageblockSectionItem>
       -20170201 End-->
        
													
        <apex:pageblockSectionItem rendered="{!ShowNationalContractOption}">
            <apex:outputPanel id="groupContract_EN1">
                <apex:outputText value="{!$ObjectType.ASI_TH_CRM_Contract__c.Fields.ASI_CRM_CN_Group_Contract__c.Label}" rendered="{!!ContractSelected.ASI_CRM_CN_Is_Dolphin__c}"/>
            </apex:outputPanel>
            <apex:outputPanel id="groupContract_EN2">
                <apex:selectList id="groupContractPicklist" styleClass="nationalGroup" value="{!ContractSelected.ASI_CRM_CN_Group_Contract__c}" multiselect="false" size="1" rendered="{!!ContractSelected.ASI_CRM_CN_Is_Dolphin__c}">
                    <apex:actionSupport event="onChange" action="{!GroupContractChange}" status="ActionStatus" reRender="DataSourceSection"/>
                    <apex:actionSupport event="onSelect" action="{!GroupContractChange}" status="ActionStatus" reRender="DataSourceSection"/>
                <apex:selectOptions value="{!GroupContractOptionType}"/>
            </apex:selectList>
            </apex:outputPanel>
        </apex:pageblockSectionItem>
        
        <apex:pageblockSectionItem rendered="{!ShowNationalContract}">
            <apex:outputText value="{!$ObjectType.ASI_TH_CRM_Contract__c.Fields.ASI_CRM_CN_Group_Contract__c.Label}"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Group_Contract__c}" />
        </apex:pageblockSectionItem>
        
        <apex:pageblockSectionItem >
            <apex:outputText style=" {!IF(ContractSelected.ASI_TH_CRM_Promotion_Type__c=='Heavy Contract On','','display:none;')} "  value="Investment Type" id="PromotionType3"   />
            <apex:outputField value="{!ContractSelected.ASI_CRM_Investment_Type__c}"  id="PromotionType4"  />
        </apex:pageblockSectionItem>

        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && needChannelnProvince}" >
            <apex:outputText rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && needChannelnProvince}" value="PO Channel" id="Information22" />
            <apex:inputField rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && needChannelnProvince}" value="{!ContractSelected.ASI_CRM_PO_Channel__c}" required="{!needChannelnProvince}" id="Information2" />
        </apex:pageblockSectionItem>

        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && !needChannelnProvince}" >
            <apex:outputText rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && !needChannelnProvince}" value="PO Channel" id="Information22" />
            <apex:outputField rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && !needChannelnProvince}" value="{!ContractSelected.ASI_CRM_PO_Channel__c}" id="Information2" />
        </apex:pageblockSectionItem>



        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && needChannelnProvince && (ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Wholesaler Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Consumer Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Outlet Promotion')}" >
            <apex:outputText rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && needChannelnProvince}" value="PO City" id="Information33" />
            <apex:inputText styleClass="poCity" rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && needChannelnProvince}" value="{!ContractSelected.ASI_CRM_PO_City__r.Name}" id="Information3" />
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && !needChannelnProvince && (ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Wholesaler Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Consumer Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Outlet Promotion')}" >
            <apex:outputText rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && !needChannelnProvince}" value="PO City" id="Information33" />
            <apex:outputField rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && !needChannelnProvince}" value="{!ContractSelected.ASI_CRM_PO_City__c}" id="Information3" />
        </apex:pageblockSectionItem>

        <apex:inputField value="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c}" rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Wholesaler Promotion' || ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Consumer Promotion' ||  ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Outlet Promotion'}" html-disabled="true"/>

        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && needChannelnProvince && (ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Wholesaler Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Consumer Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Outlet Promotion')}" >
            <apex:outputText rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && needChannelnProvince}" value="PO Province" id="Information11" />
            <apex:inputField styleClass="poProvince" onchange="findCity()" rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && needChannelnProvince}" value="{!ContractSelected.ASI_CRM_PO_Province__c}" required="{!needChannelnProvince}" id="Information1" />
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && !needChannelnProvince && (ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Wholesaler Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Consumer Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Outlet Promotion')}" >
            <apex:outputText rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && !needChannelnProvince}" value="PO Province" id="Information11" />
            <apex:outputField rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && !needChannelnProvince}" value="{!ContractSelected.ASI_CRM_PO_Province__c}" id="Information1" />
        </apex:pageblockSectionItem>

		<!-- is dolphin -->
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract' && DolphinPoPermission}">
            <apex:outputText value="Is Dolphin" />
            <apex:actionRegion >
                <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c}">
                    <apex:actionSupport event="onchange" status="ActionStatus" action="{!changeDolphin}" reRender="activityTimes_EN1,activityTimes_EN2,targetBase_EN1,targetBase_EN2,ContractClassification_EN1,ContractClassification_EN2,groupContract_EN1,groupContract_EN2"/>
                </apex:inputField>
            </apex:actionRegion>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputPanel id="activityTimes_EN1">
            <apex:outputText value="Activity Times" rendered="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c && ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract'}"/>
            </apex:outputPanel>
            <apex:outputPanel id="activityTimes_EN2">
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Activity_Times__c}" required="true" rendered="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c && ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract'}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputPanel id="targetBase_EN1">
                <apex:outputText value="Volume/Value Base" rendered="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c && ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract'}"/>
            </apex:outputPanel>
            <apex:outputPanel id="targetBase_EN2">
                <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Target_Base__c}" required="true" rendered="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c && ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract'}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputPanel id="ContractClassification_EN1">
                <apex:outputText value="Store Type" rendered="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c && ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract'}"/>
            </apex:outputPanel>
            <apex:outputPanel id="ContractClassification_EN2">
                <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Contract_Classification__c}" rendered="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c && ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract'}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>
    </apex:pageblocksection>

</apex:pageblock>

</apex:outputPanel>
<!--------------------------------------------------------------------------------------------------------CN------------------------------------------------------------------>
<apex:outputPanel id="is_CN" rendered="{!showCN}">
<apex:pageblock title="销售合同" >
    <apex:pageblockButtons >
        <apex:commandButton value="保存" action="{!UpdateContractRecord}"/>
        <apex:commandButton value="取消" action="{!cancel}"/><!--{!GoURL}"/-->
     </apex:pageblockButtons>
    
    <apex:actionstatus id="ActionStatus">
        <apex:facet name="start">
            <div class="waitingSearchDiv" id="el_loading" style="background-color: #fbfbfb;
                   height: 100%;opacity:0.65;width:100%;"> 
                <div class="waitingHolder" style="top: 74.2px; width: 91px;">
                    <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." />
                    <span class="waitingDescription">Please Wait...</span>
                </div>
            </div>
        </apex:facet>
    </apex:actionstatus>
   
    <apex:pageblocksection title="头信息" rendered="{!!isCreate}">
        <apex:pageblockSectionItem >
            <apex:outputText value="合同编号"/>
            <apex:outputField value="{!ContractSelected.Name}" />
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputText value="PO开始日期"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_PO_Start_Date__c}" required="true"/>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputText value="PO号码"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_PO_No__c}" />
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputText value="PO结束日期"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_PO_End_Date__c}" required="true"/>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputText value="PO版本"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_PO_Version__c}" />
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputText value="空瓶回收率"/>
            <apex:outputPanel >
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Bottle_Collection_Rate__c}" required="true" rendered="{!!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Bottle_Collection_Rate__c}" rendered="{!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputText value="PP No."/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_PP_No__c}" />
        </apex:pageblockSectionItem>
		
						
        <apex:pageblockSectionItem >
            <apex:outputText value="店家/批发商"/>
            <apex:outputPanel >
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Outlet_WS__c}" rendered="{!!ContractSelected.ASI_CRM_CN_PO_Modification__c}"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Outlet_WS__c}" rendered="{!ContractSelected.ASI_CRM_CN_PO_Modification__c}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputText value="状态"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Status__c}" />
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputText value="{!if(ContractSelected.ASI_CRM_New_FY_PO__c, 'PO 类别', '促销类别')}"/><!--20160627 Ben @ Elufa-->
            <apex:outputPanel >
                
                <!--20160627 Ben @ Elufa-->
                <apex:outputText value="{!poTypeMap[ContractSelected.ASI_TH_CRM_Promotion_Type__c]}"  rendered="{!!ContractSelected.ASI_CRM_CN_PO_Modification__c}"/>
                <apex:outputText value="{!poTypeMap[ContractSelected.ASI_TH_CRM_Promotion_Type__c]}" rendered="{!ContractSelected.ASI_CRM_CN_PO_Modification__c}"/>
                <!--<apex:outputField value="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c}"  rendered="{!!ContractSelected.ASI_CRM_CN_PO_Modification__c}"/>
				<apex:outputField value="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c}" rendered="{!ContractSelected.ASI_CRM_CN_PO_Modification__c}"/>-->
                <!--20160627 Ben @ Elufa-->
            </apex:outputPanel>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputPanel ><apex:outputText value="合同来源"/><img src="/s.gif" alt="Help" class="helpIcon" title="This is Help Message"/></apex:outputPanel>
            <apex:outputPanel >
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c}" required="true" rendered="{!!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}">
                   <apex:actionSupport event="onchange" rerender="source, source1" />
            </apex:inputField>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c}" rendered="{!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>  
        <apex:pageblockSectionItem >
            <apex:outputText value="Budget/LE 销量 (9L)"/>
            <apex:outputPanel >
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Vol_Budget_LE__c}" rendered="{!!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Vol_Budget_LE__c}" rendered="{!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c=='Others'}">
            <apex:outputText value="Source (Others)" id="source" />
            <apex:outputPanel >
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Source_Others__c}" id="source1" rendered="{!!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Source_Others__c}"  rendered="{!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c!='Others'}">
            <apex:outputText value="Budget/LE 销售费用 (RMB)"/>
            <apex:outputPanel >
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Budget_LE__c}" rendered="{!!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Budget_LE__c}"  rendered="{!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>        
        <apex:pageblockSectionItem >
            <apex:outputText value="附注"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Description__c}" style="height:15em;width:30em" />
        </apex:pageblockSectionItem>
        <!--<apex:pageblockSectionItem rendered="{!if($UserRole.Name = 'CN BA (C)' || $UserRole.Name = 'CN BA (E)' || $UserRole.Name = 'CN BA Director' || $UserRole.Name = 'CN BA - Applier' || $UserRole.Name = 'CN BA(N)'|| $UserRole.Name = 'CN BA(NW)' || $UserRole.Name = 'CN BA(GS_GDE)' || $UserRole.Name = 'CN BA(GS_GDW)' || $UserRole.Name = 'CN BA(GS_GGZ)' || $UserRole.Name = 'CN BA(GS_SW)',true,false)}">
            <apex:outputText value="Contract Upload"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Contract_Upload__c}" />
        </apex:pageblockSectionItem>-->
		<!--
        <apex:pageblockSectionItem >
            <apex:outputText value="未提供Budget/LE原因"/>
            <apex:outputPanel >
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Reason_without_Budget__c}" rendered="{!!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Reason_without_Budget__c}"  rendered="{!ASI_TH_CRM_Contract__c.ASI_CRM_CN_PO_Modification__c}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>     
        
        <apex:pageblockSectionItem >
        </apex:pageblockSectionItem>  
		-->
        
        <!--20170309 Elufa Commented
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_PO_Version__c != '0.0'}">
            <apex:outputText value="全国集团合同"/>
            <apex:outputPanel >
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_National_Group_Contract__c}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>  
        
        <!--20170201 Elufa
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_PO_Version__c == '0.0'}">
            <apex:outputText value="全国集团合同"/>
            <apex:outputPanel >
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_National_Group_Contract__c}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>  
        -->
        
        <apex:pageblockSectionItem >
            <apex:outputText value="全国集团">
                <div id="nationalHelptext" class="helpText" style="display: none; opacity: 0.99;position:absolute;left:25%;top:5%">If you want to change National Group value, please contact HQ BA or IT<br/>如需更改v0.0合同的全国集团, 请联络HQ BA或IT</div>
                <img src="/s.gif" alt="Help" id="nationalHelpIcon" class="helpIcon" title="" style="position:relative; left :90px;" />
            </apex:outputText>
            <apex:outputField value="{!ContractSelected.ASI_CRM_NationalGroup__c}" />
        </apex:pageblockSectionItem>
        
        <!--20170523 commented-->
        <!--<apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_PO_Version__c != '0.0'}">
            <apex:outputText value="全国集团"/>
            <apex:selectList styleClass="nationalGroup" value="{!ContractSelected.ASI_CRM_National_Group__c}" multiselect="false" size="1" >
                <apex:selectOptions value="{!AllNationalGroup}"/>
            </apex:selectList>
        </apex:pageblockSectionItem>
        <!--20170201 End-->


        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c=='Others'}">
            <apex:outputText value="A&P Budget/LE (RMB)"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Budget_LE__c}" />
        </apex:pageblockSectionItem>


        <!--20160627 Ben @ Elufa-->
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" >
            <apex:outputText rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" value="PO渠道" />
            <apex:outputField rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" value="{!ContractSelected.ASI_CRM_PO_Channel__c}"/>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" >
            <apex:outputText rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" value="PO城市" />
            <apex:outputField rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" value="{!ContractSelected.ASI_CRM_PO_City__c}" />
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" >
            <apex:outputText rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" value="PO省份" />
            <apex:outputField rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" value="{!ContractSelected.ASI_CRM_PO_Province__c}" />
        </apex:pageblockSectionItem>
		<!--20160627 End-->  
        
									
							 
        <apex:pageblockSectionItem >
            <apex:outputText style=" {!IF(ContractSelected.ASI_TH_CRM_Promotion_Type__c=='Heavy Contract On','display:none;','')} "  value="投资类型"   id="PromotionTypeInput11"  />
            <apex:inputField style=" {!IF(ContractSelected.ASI_TH_CRM_Promotion_Type__c=='Heavy Contract On','display:none;','')} "  value="{!ContractSelected.ASI_CRM_Investment_Type__c}"  id="PromotionTypeInput9"    />
        </apex:pageblockSectionItem>
        			
		
		
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c!='Others'}">
        </apex:pageblockSectionItem>
        
        <!-- is dolphin -->
        <!-- <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract' && DolphinPoPermission}">
            <apex:outputText value="是否Dolphin" />
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c}"/>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c}">
            <apex:outputText value="活动场次" />
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Activity_Times__c}"/>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c}">
            <apex:outputText value="销量/销售额"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Target_Base__c}"/>
        </apex:pageblockSectionItem> -->

    </apex:pageblocksection>
    
    
    <apex:pageblocksection title="头信息" rendered="{!isCreate}" id="header_CN" >
        <apex:pageblockSectionItem >
            <apex:outputText value="店家/批发商"/>
            <apex:actionRegion >
                <!-- //20191028:AM@Introv - fix issue that PO Province is not rendered after outlet change -->
                <!--
                <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Outlet_WS__c}" required="true" onChange="findGroupContracts()">
                    <apex:actionSupport oncomplete="findCity()" event="onchange" action="{!setCustomerChannel}" rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" status="ActionStatus" reRender="Information1_CN, Information11_CN, Information22_CN, Information2_CN, Information33_CN, Information3_CN, Information3a_CN, header_CN" />
                </apex:inputField>
				-->
                <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Outlet_WS__c}" required="true" >
                    <apex:actionSupport oncomplete="changeOutlet()" event="onchange" action="{!setCustomerChannel}" rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" status="ActionStatus" reRender="Information1_CN, Information11_CN, Information22_CN, Information2_CN, Information33_CN, Information3_CN, Information3a_CN, header_CN" /><!--20160606 Ben @ Elufa-->
                </apex:inputField>
            </apex:actionRegion>
        </apex:pageblockSectionItem>
        
        <apex:pageblockSectionItem >
            <apex:outputText value="PO开始日期"/>
            <apex:inputField id="startDateInput" value="{!ContractSelected.ASI_CRM_CN_PO_Start_Date__c}" required="true" onChange="findGroupContracts()"/>
        </apex:pageblockSectionItem>
        <!--<apex:pageblockSectionItem >
            <apex:outputText value="促销类别"/>
            <apex:actionRegion >
            <apex:inputField value="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c}" required="true" >
                <apex:actionSupport event="onchange" action="{!SetSpecialPromotionType_BCRate}" status="ActionStatus" reRender="BCRate_CN"/>
            </apex:inputField>
            </apex:actionRegion>
        </apex:pageblockSectionItem>-->
        
         <apex:pageblockSectionItem >
            <apex:outputText value="{!if(ContractSelected.ASI_CRM_New_FY_PO__c, 'PO 类别', '促销类别')}"/>
            <apex:actionRegion >
                <apex:outputPanel styleClass="requiredInput" layout="block">
                <apex:outputPanel styleClass="requiredBlock"/>
                    <apex:selectList value="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c}" multiselect="false" size="1" required="true">
                        <apex:selectoptions value="{!poTypeOption}"/>
                        <apex:actionSupport event="onchange" action="{!SetSpecialPromotionType_BCRate}" status="ActionStatus" reRender="BCRate_CN,MartellBCRate_CN,MartellBCRate_Label_CN,PromotionType5,PromotionType6,PromotionType7,PromotionType8,header_CN"/>
                    </apex:selectList>
                </apex:outputPanel>
            </apex:actionRegion>
        </apex:pageblockSectionItem>
        
        <apex:pageblockSectionItem >
            <apex:outputText value="PO结束日期"/>
            <apex:inputField id="endDateInput" value="{!ContractSelected.ASI_CRM_CN_PO_End_Date__c}" required="true" onChange="findGroupContracts()"/>
        </apex:pageblockSectionItem>
            <!--2018-06-13 Keith Yip-->
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Wholesaler Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Consumer Promotion' &&  ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Outlet Promotion'}">
            <!--2018-06-13 Keith Yip-->
            <apex:outputPanel ><apex:outputText value="合同来源"/><img src="/s.gif" alt="Help" class="helpIcon" title="This is Help Message"/></apex:outputPanel>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c}" required="true">
                <apex:actionSupport event="onchange" rerender="source, source1" />
                </apex:inputField>
        </apex:pageblockSectionItem>
        <!--2018-06-13 Keith Yip-->
        <apex:pageblockSectionItem id="DataSourceSection" rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Wholesaler Promotion' || ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Consumer Promotion' ||  ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Outlet Promotion'}">
            <apex:outputText value="数据源"/>
            <apex:inputField required="true" value="{!ContractSelected.ASI_CRM_CN_Data_Source__c}" />
        </apex:pageblockSectionItem>

        <apex:pageblockSectionItem id="ASI_CRM_CN_Festival_Season__c"
                                   rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Wholesaler Promotion' || ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Consumer Promotion' ||  ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Outlet Promotion'}">
            <apex:outputText value="重大节日"/>
            <apex:inputField required="true" value="{!ContractSelected.ASI_CRM_CN_Festival_Season__c}" />
        </apex:pageblockSectionItem>
        <!--2018-06-13 Keith Yip-->

            <!--2018-06-13 Keith Yip-->
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'TOT/MOT Contract' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Wholesaler Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Consumer Promotion' &&  ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Outlet Promotion'}">
            <!--2018-06-13 Keith Yip-->
            <apex:outputText value="空瓶回收率"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Bottle_Collection_Rate__c}"  id="BCRate_CN" />
        </apex:pageblockSectionItem>
        
        <apex:pageblockSectionItem >
            <apex:outputText value="Budget/LE 销量 (9L)"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Vol_Budget_LE__c}" />
        </apex:pageblockSectionItem>

        <!--2018-12-05 Keith Yip-->
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'TOT/MOT Contract' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Wholesaler Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Consumer Promotion' &&  ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Outlet Promotion'}">
            <!--2018-12-05 Keith Yip-->
            <apex:outputText style=" {!IF(ContractSelected.ASI_TH_CRM_Promotion_Type__c=='Heavy Contract On','','display:none;')} "  value="马爹利空瓶回收率"  id="MartellBCRate_Label_CN"  />
            <apex:inputField style=" {!IF(ContractSelected.ASI_TH_CRM_Promotion_Type__c=='Heavy Contract On','','display:none;')} "  value="{!ContractSelected.ASI_CRM_Martell_BC_Rate__c}" id="MartellBCRate_CN" />
        </apex:pageblockSectionItem>
        
      <!--    <apex:pageblockSectionItem >
															   
																											
									
		

		
										  
            <apex:outputText value="交易币种"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Currency__c}" required="true" />
        </apex:pageblockSectionItem>
        
      <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c=='Others'}">
            <apex:outputText value="Source (Others)" id="source" />
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Source_Others__c}" id="source1" />
        </apex:pageblockSectionItem> -->
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c!='Others'}">
            <apex:outputText value="Budget/LE 销售费用 (RMB)"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Budget_LE__c}" />
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c=='Others'}"/>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c=='Others'}">
            <apex:outputText value="Budget/LE 销售费用 (RMB)"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Budget_LE__c}" />
        </apex:pageblockSectionItem>

        <!--2018-06-13 Keith Yip-->
        <apex:pageblockSectionItem id="ASI_CRM_CN_PO_Division__c"
                                   rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Wholesaler Promotion' || ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Consumer Promotion' ||  ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Outlet Promotion'}">
            <apex:outputText value="Division"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_PO_Division__c}" />
        </apex:pageblockSectionItem>
        <!--2018-06-13 Keith Yip-->

        <!--2018-06-13 Keith Yip-->
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract'
        ||ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Wholesaler Promotion' || ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Consumer Promotion' ||  ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Outlet Promotion'}">
            <!--2018-06-13 Keith Yip-->
            <apex:outputText value="未提供Budget/LE原因"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Reason_without_Budget__c}" />
        </apex:pageblockSectionItem>

        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract'}">

            <apex:outputLabel value="使用线上合同"/>
            <apex:inputCheckbox value="{!ContractSelected.ASI_CRM_CN_Use_PRC_Contract_Template__c}" disabled="{!IsDolphinDivision}"/>
        </apex:pageblockSectionItem>

        <!--    <apex:pageblockSectionItem />
            <apex:pageblockSectionItem >
                <apex:outputPanel ><apex:outputText value="合同来源"/><img src="/s.gif" alt="Help" class="helpIcon" title="This is Help Message"/></apex:outputPanel>
                <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Source_of_Contract__c}" required="true">
                    <apex:actionSupport event="onchange" rerender="source, source1" />
                    </apex:inputField>
            </apex:pageblockSectionItem>
            <apex:pageblockSectionItem /> -->
        
        <apex:pageblockSectionItem >
            <apex:outputText value="附注"/>
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Description__c}"  style="height:15em;width:30em"  />
        </apex:pageblockSectionItem>
        
        <apex:pageblockSectionItem >
            <apex:outputText value="状态"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Status__c}"  />
        </apex:pageblockSectionItem> 
		 
										
         <apex:pageblockSectionItem rendered="{!ShowNationalContractOption}">
            <apex:outputPanel id="groupContract_CN1">
                <apex:outputText value="{!$ObjectType.ASI_TH_CRM_Contract__c.Fields.ASI_CRM_CN_Group_Contract__c.Label}" rendered="{!!ContractSelected.ASI_CRM_CN_Is_Dolphin__c}"/>
            </apex:outputPanel>
            <apex:outputPanel id="groupContract_CN2">
                <apex:selectList id="groupContractPicklistCN" styleClass="nationalGroup" value="{!ContractSelected.ASI_CRM_CN_Group_Contract__c}" multiselect="false" size="1" rendered="{!!ContractSelected.ASI_CRM_CN_Is_Dolphin__c}">
                <apex:selectOptions value="{!GroupContractOptionType}"/>
                </apex:selectList>
            </apex:outputPanel>
        </apex:pageblockSectionItem>
        
        <apex:pageblockSectionItem rendered="{!ShowNationalContract}">
            <apex:outputText value="{!$ObjectType.ASI_TH_CRM_Contract__c.Fields.ASI_CRM_CN_Group_Contract__c.Label}"/>
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Group_Contract__c}" />
        </apex:pageblockSectionItem>
        <!--2018-06-13 Keith Yip-->
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Wholesaler Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Consumer Promotion' &&  ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Outlet Promotion'}">
            <!--2018-06-13 Keith Yip-->
            <apex:outputText style=" {!IF(ContractSelected.ASI_TH_CRM_Promotion_Type__c=='Heavy Contract On' || ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract','display:none;','')} "  value="投资类型"   id="PromotionType5"  />
            <apex:inputField style=" {!IF(ContractSelected.ASI_TH_CRM_Promotion_Type__c=='Heavy Contract On' || ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract','display:none;','')} "  value="{!ContractSelected.ASI_CRM_Investment_Type__c}"  id="PromotionType6"    />
        </apex:pageblockSectionItem>
        <!--2018-06-13 Keith Yip-->
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Wholesaler Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Consumer Promotion' &&  ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Outlet Promotion'}">
            <!--2018-06-13 Keith Yip-->
            <apex:outputText style=" {!IF(ContractSelected.ASI_TH_CRM_Promotion_Type__c=='Heavy Contract On','','display:none;')} "  value="投资类型" id="PromotionType7"   />
            <apex:outputField value="{!ContractSelected.ASI_CRM_Investment_Type__c}"  id="PromotionType8"  />
        </apex:pageblockSectionItem>
        

        <!--20170201 Elufa Changed inputField to outputField-->
        <!-- 20170309 Elufa Commented
        <apex:pageblockSectionItem >
            <apex:outputText value="全国集团合同"/>
            <apex:outputPanel >
            <apex:outputField value="{!ContractSelected.ASI_CRM_CN_National_Group_Contract__c}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>
		-->
        
        <!--20170201 Elufa
							 
        <apex:pageblockSectionItem >
            <apex:outputText value="全国集团">
                <div id="nationalHelptext" class="helpText" style="display: none; opacity: 0.99;position:absolute;left:25%;top:5%">If you want to change National Group value, please contact HQ BA or IT<br/>如需更改v0.0合同的全国集团, 请联络HQ BA或IT</div>
                <img src="/s.gif" alt="Help" id="nationalHelpIcon" class="helpIcon" title="" style="position:relative; left :90px;" />
            </apex:outputText>
            <apex:outputField value="{!ContractSelected.ASI_CRM_NationalGroup__c}" />
        </apex:pageblockSectionItem>

	
         -20170201 End-->
        
        <!--20160607 Ben @ Elufa-->
        <!--<apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" >
            <apex:outputText rendered="false" value=" "/>
        </apex:pageblockSectionItem>-->
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" >
            <apex:inputText style="display:none" styleClass="poCityId" value="{!ContractSelected.ASI_CRM_PO_City__c}" id="Information3a_CN"/>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && needChannelnProvince}" >
            <apex:outputText rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && needChannelnProvince}" value="PO渠道" id="Information22_CN" />
            <apex:inputField rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && needChannelnProvince}" value="{!ContractSelected.ASI_CRM_PO_Channel__c}" required="{!needChannelnProvince}" id="Information2_CN" />
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && !needChannelnProvince}" >
            <apex:outputText rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && !needChannelnProvince}" value="PO渠道" id="Information22_CN" />
            <apex:outputField rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && !needChannelnProvince}" value="{!ContractSelected.ASI_CRM_PO_Channel__c}" id="Information2_CN" />
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && needChannelnProvince && (ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Wholesaler Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Consumer Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Outlet Promotion')}" >
            <apex:outputText rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && needChannelnProvince}" value="PO城市" id="Information33_CN" />
            <apex:inputText styleClass="poCity" rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && needChannelnProvince}" value="{!ContractSelected.ASI_CRM_PO_City__r.Name}" id="Information3_CN" />
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && !needChannelnProvince && (ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Wholesaler Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Consumer Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Outlet Promotion')}" >
            <apex:outputText rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && !needChannelnProvince}" value="PO城市" id="Information33_CN" />
            <apex:outputField rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && !needChannelnProvince}" value="{!ContractSelected.ASI_CRM_PO_City__c}" id="Information3_CN" />
        </apex:pageblockSectionItem>
        <!--<apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" >
            <apex:outputText rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" value="PO城市" />
            <apex:inputField rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c}" value="{!ContractSelected.ASI_CRM_PO_City__c}" />
        </apex:pageblockSectionItem>-->
        <apex:inputField value="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c}" rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Wholesaler Promotion' || ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Consumer Promotion' ||  ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'Outlet Promotion'}" html-disabled="true"/>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && needChannelnProvince && (ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Wholesaler Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Consumer Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Outlet Promotion')}" >
            <apex:outputText rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && needChannelnProvince}" value="PO省份" id="Information11_CN" />
            <apex:inputField styleClass="poProvince" onchange="findCity()" rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && needChannelnProvince}" value="{!ContractSelected.ASI_CRM_PO_Province__c}" required="{!needChannelnProvince}" id="Information1_CN" />
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && !needChannelnProvince && (ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Wholesaler Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Consumer Promotion' && ContractSelected.ASI_TH_CRM_Promotion_Type__c != 'Outlet Promotion')}" >
            <apex:outputText rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && !needChannelnProvince}" value="PO省份" id="Information11_CN" />
            <apex:outputField rendered="{!ContractSelected.ASI_CRM_New_FY_PO__c && !needChannelnProvince}" value="{!ContractSelected.ASI_CRM_PO_Province__c}" id="Information1_CN" />
        </apex:pageblockSectionItem>

        <!-- is dolphin -->
        <apex:pageblockSectionItem rendered="{!ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract' && DolphinPoPermission}">
            <apex:outputText value="是否Dolphin"/>
            <apex:actionRegion >
            <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c}">
                <apex:actionSupport event="onchange" status="ActionStatus" action="{!changeDolphin}" reRender="activityTimes_CN1,activityTimes_CN2,targetBase_CN1,targetBase_CN2,ContractClassification_CN1,ContractClassification_CN2,groupContract_CN1,groupContract_CN2"/>
            </apex:inputField>
        </apex:actionRegion>
        </apex:pageblockSectionItem>

        <apex:pageblockSectionItem >
            <apex:outputPanel id="activityTimes_CN1">
                <apex:outputText value="活动场次" rendered="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c && ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract'}"/>
            </apex:outputPanel>
            <apex:outputPanel id="activityTimes_CN2">
                <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Activity_Times__c}" required="true" rendered="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c && ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract'}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputPanel id="targetBase_CN1">
                <apex:outputText value="销量/销售额" rendered="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c && ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract'}"/>
            </apex:outputPanel>
            <apex:outputPanel id="targetBase_CN2">
                <apex:inputField value="{!ContractSelected.ASI_CRM_CN_Target_Base__c}" required="true" rendered="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c && ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract'}"/>
            </apex:outputPanel>  
        </apex:pageblockSectionItem>
        <apex:pageblockSectionItem >
            <apex:outputPanel id="ContractClassification_CN1">
                <apex:outputText value="门店类别" rendered="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c && ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract'}"/>
            </apex:outputPanel>
            <apex:outputPanel id="ContractClassification_CN2">
                <apex:outputField value="{!ContractSelected.ASI_CRM_CN_Contract_Classification__c}" rendered="{!ContractSelected.ASI_CRM_CN_Is_Dolphin__c && ContractSelected.ASI_TH_CRM_Promotion_Type__c == 'TOT/MOT Contract'}"/>
            </apex:outputPanel>
        </apex:pageblockSectionItem>

    </apex:pageblocksection>
	<!--20160607 End-->
</apex:pageblock>
</apex:outputPanel>

</apex:form>
</apex:page>