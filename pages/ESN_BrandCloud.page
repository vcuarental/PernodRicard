<apex:page showHeader="false" sidebar="false" standardStylesheets="false">

<html lang="en">
  <head>
    <meta charset="utf-8"></meta>
    <title>BrandCloud</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
    <meta name="description" content=""></meta>
    <meta name="author" content=""></meta>
    <!--link rel="stylesheet/less" href="{!URLFOR($Resource.ESN_BrandCloud_Resources,'/less/bootstrap.less')}" type="text/css" /-->
    <!--link rel="stylesheet/less" href="{!URLFOR($Resource.ESN_BrandCloud_Resources,'/less/responsive.less')}" type="text/css" /-->
    <!--script src="{!URLFOR($Resource.ESN_BrandCloud_Resources,'/js/less-1.3.3.min.js')}"></script-->
    <!--append ‘#!watch’ to the browser URL, then refresh the page. -->
    <link href="{!URLFOR($Resource.ESN_BrandCloud_Resources,'/css/bootstrap.min.css')}" rel="stylesheet"></link>
    <link href="{!URLFOR($Resource.ESN_BrandCloud_Resources,'/css/style.css')}" rel="stylesheet"></link>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="{!URLFOR($Resource.ESN_BrandCloud_Resources,'/js/html5shiv.js')}"></script>
    <![endif]-->
    <script type="text/javascript" src="{!URLFOR($Resource.ESN_BrandCloud_Resources,'/js/jquery-1.11.2.min.js')}"></script>
    <script type="text/javascript" src="{!URLFOR($Resource.ESN_BrandCloud_Resources,'/js/bootstrap.min.js')}"></script>
    <script type="text/javascript" src="{!URLFOR($Resource.ESN_BrandCloud_Resources,'/js/bootstrap-tooltip.js')}"></script>
    <script type="text/javascript" src="{!URLFOR($Resource.ESN_BrandCloud_Resources,'/js/bootstrap-confirmation.js')}"></script>
    <script type="text/javascript" src="{!URLFOR($Resource.ESN_BrandCloud_Resources,'/js/jquery.scrollUp.min.js')}"></script>
    <script type="text/javascript" src="{!URLFOR($Resource.ESN_BrandCloud_Resources,'/js/jquery.browser.min.js')}"></script>
    <script type="text/javascript" src="{!URLFOR($Resource.ESN_BrandCloud_Resources,'/js/jquery.dnd_page_scroll.js')}"></script>
    <script type="text/javascript" src="{!URLFOR($Resource.ESN_BrandCloud_Resources,'/js/modernizr.custom.52191.js')}"></script>
    <script type="text/javascript">
      (function() {
        window.brandcloud = [
          {"category":"My Top 14", "brands":[
            {"brand_name":"Absolut", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myTop14/absolut.png')}", "brand_url":"absolut-brandcloud.pernod-ricard.com"},
            {"brand_name":"Chivas", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myTop14/chivas_regal.png')}", "brand_url":"chivasregal-brandcloud.pernod-ricard.com"},
            {"brand_name":"Ballantines", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myTop14/ballantines.png')}", "brand_url":"ballantines-brandcloud.pernod-ricard.com"},
            {"brand_name":"Beefeater", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myTop14/beefeater.png')}", "brand_url":"beefeater-brandcloud.pernod-ricard.com"},
            {"brand_name":"Jameson", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myTop14/jameson.png')}", "brand_url":"jameson-brandcloud.pernod-ricard.com"},
            {"brand_name":"Kahlua", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myTop14/kahlua.png')}", "brand_url":"kahlua-brandcloud.pernod-ricard.com"},
            {"brand_name":"Malibu", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myTop14/malibu.png')}", "brand_url":"malibu-brandcloud.pernod-ricard.com"},
            {"brand_name":"Ricard", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myTop14/ricard.png')}", "brand_url":"ricard-brandcloud.pernod-ricard.com"},
            {"brand_name":"Havana Club", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myTop14/havana_club.png')}", "brand_url":"havanaclub-brandcloud.pernod-ricard.com"},
            {"brand_name":"Martell", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myTop14/martell.png')}", "brand_url":"martell-brandcloud.pernod-ricard.com"},
            {"brand_name":"The Glenlivet", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myTop14/the_glenlivet.png')}", "brand_url":"theglenlivet-brandcloud.pernod-ricard.com"},
            {"brand_name":"G.H.Mumm", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myTop14/ghmumm.png')}", "brand_url":"ghmumm-brandcloud.pernod-ricard.com"},
            {"brand_name":"Perrier-Jouët", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myTop14/perrier_jouet.png')}", "brand_url":"perrierjouet-brandcloud.pernod-ricard.com"},
            {"brand_name":"Royal Salute", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myTop14/royal_salute.png')}", "brand_url":"royalsalute-brandcloud.pernod-ricard.com"}
          ]},
          {"category":"My Wines", "brands":[
            {"brand_name":"Jacobs Creek", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myWines/jacobs_creek.png')}", "brand_url":"jacobscreek-brandcloud.pernod-ricard.com"},
            {"brand_name":"Brancott Estate", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myWines/brancott_estate.png')}", "brand_url":"brancottestate-brandcloud.pernod-ricard.com"},
            {"brand_name":"Graffigna", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myWines/graffigna.png')}", "brand_url":"graffigna-brandcloud.pernod-ricard.com"},
            {"brand_name":"Campo Viejo", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myWines/campo_viejo.png')}", "brand_url":"campoviejo-brandcloud.pernod-ricard.com"},
            {"brand_name":"Stoneleigh", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myWines/stoneleigh.png')}", "brand_url":"stoneleigh-brandcloud.pernod-ricard.com"}
          ]},
          {"category":"My Pernod-Ricard", "brands":[
            {"brand_name":"Pernod-Ricard", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myPernodRicard/pernodricard.png')}", "brand_url":"pernodricard-brandcloud.pernod-ricard.com"}
          ]},
          {"category":"My Key Local Brands", "brands":[
            {"brand_name":"Altos", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myKeyLocalBrands/altos.png')}", "brand_url":"altos-brandcloud.pernod-ricard.com"},
            {"brand_name":"Ararat", "brand_status":"Work in progress", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myKeyLocalBrands/ararat.png')}", "brand_url":"ararat-brandcloud.pernod-ricard.com"},
            {"brand_name":"Chivas Brothers", "brand_status":"Work in progress", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myKeyLocalBrands/chivas_brothers.png')}", "brand_url":"ChivasBrothers-brandcloud.pernod-ricard.com"},
            {"brand_name":"Olmeca", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myKeyLocalBrands/olmeca.png')}", "brand_url":"olmeca-brandcloud.pernod-ricard.com"},
            {"brand_name":"Passport Scotch", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myKeyLocalBrands/passport.png')}", "brand_url":"passport-brandcloud.pernod-ricard.com"},
            {"brand_name":"Pastis 51", "brand_status":"Work in progress", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myKeyLocalBrands/pastis_51.png')}", "brand_url":"pastis51-brandcloud.pernod-ricard.com"},
            {"brand_name":"Something Special", "brand_status":"Work in progress", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myKeyLocalBrands/something_special.png')}", "brand_url":"keylocalblends-brandcloud.pernod-ricard.com"},
            {"brand_name":"Clan Campbell", "brand_status":"Work in progress", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myKeyLocalBrands/clan_campbell.png')}", "brand_url":"keylocalblends-brandcloud.pernod-ricard.com"},
            {"brand_name":"100 pipers", "brand_status":"Work in progress", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myKeyLocalBrands/100_pipers.png')}", "brand_url":"keylocalblends-brandcloud.pernod-ricard.com"},
            {"brand_name":"Suze", "brand_status":"Work in progress", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myKeyLocalBrands/suze.png')}", "brand_url":"suze-brandcloud.pernod-ricard.com"},
            {"brand_name":"Wyborowa", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myKeyLocalBrands/wyborowa.png')}", "brand_url":"wyborowa-brandcloud.pernod-ricard.com"}
          ]},
          {"category":"Others Brands", "brands":[
            {"brand_name":"Aberlour", "brand_status":"Work in progress", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myOtherBrands/aberlour.png')}", "brand_url":"aberlour-brandcloud.pernod-ricard.com"},
            {"brand_name":"Plymouth Gin", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myOtherBrands/plymouth.png')}", "brand_url":"plymouth-brandcloud.pernod-ricard.com"},
            {"brand_name":"Longmorn", "brand_status":"Work in progress", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myOtherBrands/longmorn.png')}", "brand_url":"keylocalblends-brandcloud.pernod-ricard.com"},
            {"brand_name":"Long John", "brand_status":"Work in progress", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myOtherBrands/long_john.png')}", "brand_url":"keylocalblends-brandcloud.pernod-ricard.com"},
            {"brand_name":"MacNAIRS", "brand_status":"Work in progress", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myOtherBrands/macnairs.png')}", "brand_url":"keylocalblends-brandcloud.pernod-ricard.com"},
            {"brand_name":"Café de Paris", "brand_status":"Work in progress", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myOtherBrands/cafe_de_paris.png')}", "brand_url":"cafedeparis-brandcloud.pernod-ricard.com"},
            {"brand_name":"Dubonnet", "brand_status":"Work in progress", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myOtherBrands/dubonnet.png')}", "brand_url":"dubonnet-brandcloud.pernod-ricard.com"},
            {"brand_name":"Lillet", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myOtherBrands/lillet.png')}", "brand_url":"lillet-brandcloud.pernod-ricard.com"},
            {"brand_name":"Scapa", "brand_status":"Work in progress", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myOtherBrands/scapa.png')}", "brand_url":"Malts-brandcloud.pernod-ricard.com"},
            {"brand_name":"Strathisla", "brand_status":"Work in progress", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myOtherBrands/strathisla.png')}", "brand_url":"Malts-brandcloud.pernod-ricard.com"},
            {"brand_name":"Oddka", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myOtherBrands/oddka.png')}", "brand_url":"oddka-brandcloud.pernod-ricard.com"},
            {"brand_name":"Pacific", "brand_status":"Enable", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myOtherBrands/pacific.png')}", "brand_url":"pacific-brandcloud.pernod-ricard.com"},
            {"brand_name":"Paddy", "brand_status":"Work in progress", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myOtherBrands/paddy.png')}", "brand_url":"paddy-brandcloud.pernod-ricard.com"},
            {"brand_name":"Pernod Absinthe", "brand_status":"Work in progress", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myOtherBrands/pernod_absinthe.png')}", "brand_url":"pernodabsinthe-brandcloud.pernod-ricard.com"},
            {"brand_name":"Powers", "brand_status":"Work in progress", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myOtherBrands/powers.png')}", "brand_url":"powers-brandcloud.pernod-ricard.com"},
            {"brand_name":"Single Pot Still", "brand_status":"Work in progress", "brand_logo":"{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/myOtherBrands/single_pot_still.png')}", "brand_url":"singlepotstill-brandcloud.pernod-ricard.com"}
          ]}
        ];
      })();
  
      $.BuildCategory = function()
      {
        // Build content  
        $(".nav").empty();
        $("#panel-category").empty();
        
        // Test if browser supports drag and drop
        if ((window.FileReader && Modernizr.draganddrop) || ($.browser['msie'] == true && $.browser['version'] == 9.0)) {
          $.BuildFavorites();
          console.log("Your browser supports drag and drop!!");
        } else {
          console.log("Sorry, browser does not support drag and drop!");
        }
        
        $.each(brandcloud, function(i) {
          var category = brandcloud[i].category.replace(/\s+/g, '');
          var brands=brandcloud[i].brands;
          var link="<li><a class='link' href='#"+category+"'>"+brandcloud[i].category+"</a></li>";
          var content="<!-- "+brandcloud[i].category+" -->";
          content+="<div class='panel panel-default' id='"+category+"'>";
          content+="<div class='panel-heading'>";
          content+="<span class='glyphicon glyphicon-chevron-right'></span><span class='glyphicon glyphicon-chevron-down'></span>&nbsp;<a id='"+category+"' class='panel-title' data-toggle='collapse' href='#panel-element-"+category+"'>"+brandcloud[i].category+"</a>";
          content+="</div>";
          content+="<div id='panel-element-"+category+"' class='panel-collapse in'>";
          content+="<div class='panel-body'>";
          $.each(brands, function(j) {
            if(brands[j].brand_status != "Work in progress"){                                                                                                      
              content+="<div><a id='link_"+brands[j].brand_name+"' target='_top' draggable='true' ondragstart='$.drag(event, this.parentNode.id, this.parentNode.parentNode.parentNode.id)' href='https://pernod-ricard.my.salesforce.com/apex/ESN_LoginDam?TargetResource=https:%2F%2F"+brands[j].brand_url+"/login/sso-login/?redirectUrl=%2F'><img id='"+brands[j].brand_name+"' alt='"+brands[j].brand_name+"' src='"+brands[j].brand_logo+"'></a></div>";
            } else {
              content+="<div><img id='"+brands[j].brand_name+"' alt='"+brands[j].brand_name+"' src='"+brands[j].brand_logo+"'><img class='coming_soon' alt='"+brands[j].brand_name+"' draggable='false' src='{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/comingsoon.png')}'></div>";
            }
          });
          content+="</div>";
          content+="</div>";
          content+="</div>";
          $(".nav").append(link);
          $("#panel-category").append(content);
        });
      
        $.Collapse();
        // Get local storage
        for (var i = 0; i<5; i++) {
          if (localStorage['favorite_'+(i+1)] != null) {
            var content = JSON.parse(localStorage['favorite_'+(i+1)]);
            $('#favorite_'+(i+1)).html(content);
          }
        }
        
        // Reset all favorites
        $('[data-toggle="confirmation"]').confirmation({
          placement: 'bottom',
          trigger: 'click',
          onConfirm: function(){
            $.ResetAllFavorites();
            $('[data-toggle="confirmation"]').confirmation('hide');      
          }
        });
      }
  
      $.Collapse = function()
      {
        // Get local storage
        $.each(brandcloud, function(i) {
          var category = brandcloud[i].category.replace(/\s+/g, '');
          if (localStorage[category] != null) {
            //var content = JSON.parse(localStorage[category]);    
            //$('#'+category).html(content);
      
            var collapsed = JSON.parse(localStorage[category]);
            if (collapsed) {
              $("#"+category+" .glyphicon-chevron-down").hide();
              $("#"+category+" .glyphicon-chevron-right").show();
              $('#'+category+' .panel-collapse').collapse('hide');
            } else {
              $("#"+category+" .glyphicon-chevron-down").show();
              $("#"+category+" .glyphicon-chevron-right").hide();
              $('#'+category+' .panel-collapse').collapse('show');
            }
          } else {
            $("#"+category+" .glyphicon-chevron-right").hide();
          }
        });
        if (localStorage["MyFavorites"] != null) {
          //var content = JSON.parse(localStorage["MyFavorites"]);    
          //$("#MyFavorites").html(content);
          var collapsed = JSON.parse(localStorage["MyFavorites"]);
          if (collapsed) {
            $('#MyFavorites .glyphicon-chevron-down').hide();
            $('#MyFavorites .glyphicon-chevron-right').show();                    
            $('#MyFavorites .panel-collapse').collapse('hide');
          } else {
            $('#MyFavorites .glyphicon-chevron-down').show();
            $('#MyFavorites .glyphicon-chevron-right').hide();
            $('#MyFavorites .panel-collapse').collapse('show');
          } 
        } else {
          $("#MyFavorites .glyphicon-chevron-right").hide();
        }
        
        // Collapse
        //$(".glyphicon-chevron-right").hide();  
        $(".panel-title").on('click',function(){
          if ($(this).hasClass("collapsed")) {
            $("#"+$(this).parent().parent().attr('id')).children().children(".glyphicon-chevron-right").hide(); 
            $("#"+$(this).parent().parent().attr('id')).children().children(".glyphicon-chevron-down").show();
          } else {
            $("#"+$(this).parent().parent().attr('id')).children().children(".glyphicon-chevron-right").show(); 
            $("#"+$(this).parent().parent().attr('id')).children().children(".glyphicon-chevron-down").hide();
          } 
        }).on('mouseup',function(){
            var tagid = $(this).parent().parent().attr('id');
            setTimeout(function() {
              if($("#"+tagid).html().contains("collapsed")) {
                localStorage[tagid] = JSON.stringify(true);
              } else {
                localStorage[tagid] = JSON.stringify(false);
              }
              //localStorage[tagid] = JSON.stringify($("#"+tagid).html());
            }, 500);   
        });
      
        $(".link").click(function(){
          if($($(this).attr('href')+" a").hasClass("collapsed"))
            $($(this).attr('href')+" a").click();
        }).on('mouseup',function(){
            var tagid = $($(this).attr('href')+" a").parent().parent().attr('id');
            setTimeout(function() {
              if($("#"+tagid).html().contains("collapsed")) {
                localStorage[tagid] = JSON.stringify(true);
              } else {
                localStorage[tagid] = JSON.stringify(false);
              }
              //localStorage[tagid] = JSON.stringify($("#"+tagid).html());
            }, 500);  
        });
      }
    
      $.Search = function(value)
      {
        if (value!='') {
          $(".nav").empty();
          $("#panel-category").empty();
      
          // Test if browser supports drag and drop
          if (window.FileReader && Modernizr.draganddrop) {
            $.BuildFavorites();
            console.log("Your browser supports drag and drop!!");
          } else {
            console.log("Sorry, browser does not support drag and drop!");
          }
              
          var content="<!-- Results -->";
          content+="<div class='panel panel-default' id='Results'>";
          content+="<div class='panel-heading'>";
          content+="<span class='glyphicon glyphicon-chevron-right'></span><span class='glyphicon glyphicon-chevron-down'></span>&nbsp;<a id='Results' class='panel-title' data-toggle='collapse' href='#panel-element-results'>Results</a>";
          content+="</div>";
          content+="<div id='panel-element-results' class='panel-collapse in'>";
          content+="<div class='panel-body'>";
          $.each(brandcloud, function(i){
            var brands=brandcloud[i].brands;
            $.each(brands, function(j){
              if (brands[j].brand_name.toLowerCase().indexOf(value.toLowerCase()) >= 0){
                if(brands[j].brand_status != "Work in progress"){
                  content+="<div><a id='link_"+brands[j].brand_name+"' target='_top' draggable='true' ondragstart='$.drag(event, this.parentNode.id, this.parentNode.parentNode.parentNode.id)' href='https://pernod-ricard.my.salesforce.com/apex/ESN_LoginDam?TargetResource=https:%2F%2F"+brands[j].brand_url+"/login/sso-login/?redirectUrl=%2F'><img id='"+brands[j].brand_name+"' alt='"+brands[j].brand_name+"' src='"+brands[j].brand_logo+"'></a></div>";
                } else {
                  content+="<div><img id='"+brands[j].brand_name+"' alt='"+brands[j].brand_name+"' src='"+brands[j].brand_logo+"'><img class='coming_soon' alt='"+brands[j].brand_name+"' draggable='false' src='{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/comingsoon.png')}'></div>";
                }
              }
            });
          });
          content+="</div>";
          content+="</div>";
          content+="</div>";
          $("#panel-category").append(content);
          
          $("#Results .glyphicon-chevron-right").hide();
          $.Collapse();
          // Get local storage
          for (var i = 0; i<5; i++) {
            if (localStorage['favorite_'+(i+1)] != null) {
              var content = JSON.parse(localStorage['favorite_'+(i+1)]);
              $('#favorite_'+(i+1)).html(content);
            }
          }
        
          // Reset all favorites
          $('[data-toggle="confirmation"]').confirmation({
            placement: 'bottom',
            trigger: 'click',
            onConfirm: function(){
              $.ResetAllFavorites();
              $('[data-toggle="confirmation"]').confirmation('hide');      
            }
          });
        }
        else {
          $(".nav").empty();
          $("#panel-category").empty();
          $.BuildCategory();
        }
      }
  
      $.BuildFavorites = function()
      {
        // Build favorites  
        var content="<!-- My Favorites -->";
        content+="<div class='panel panel-default' id='MyFavorites'>";
        content+="<div class='panel-heading'>";
        content+="<span class='glyphicon glyphicon-chevron-right'></span><span class='glyphicon glyphicon-chevron-down'></span>&nbsp;<a id='MyFavorites' class='panel-title' data-toggle='collapse' href='#panel-element-MyFavorites'>My Favorites</a>";
        content+="<button class='pull-right btn btn-large btn-danger' data-toggle='confirmation'>Reset your favorites</button>";
        content+="</div>";
        content+="<div id='panel-element-MyFavorites' class='panel-collapse in'>";
        content+="<div class='panel-body'>";
        for (var i = 0; i<5; i++) {
          content+="<div ondrop='$.drop(this.id, event)' ondragover='$.allowDrop(event)' id='favorite_"+(i+1)+"'><img draggable='false' alt='favorite_"+(i+1)+"' src='{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/addFavorites.png')}'></div>";
        }
        content+="</div>";
        content+="</div>";
        content+="</div>";
        $("#panel-category").append(content);     
      }
      
      $.ResetAllFavorites = function()
      {
        for (var i = 0; i<5; i++) {
          $('#favorite_'+(i+1)).empty();
          var content="<img draggable='false' alt='favorite_"+(i+1)+"' src='{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/addFavorites.png')}'>";
          $('#favorite_'+(i+1)).append(content);
          localStorage['favorite_'+(i+1)] = JSON.stringify($('#favorite_'+(i+1)).html());
        }
      }
    
      // Util
      String.prototype.contains = function(it) 
      { 
        return this.indexOf(it) != -1; 
      };
    
      // Drag and drop
      $.allowDrop = function(ev)
      {
        ev.preventDefault();
      }
    
      $.drag = function(ev, sourceId, sourceParentId)
      {
        if($.browser['mozilla'])
        {
          var data = {data:ev.target.id, sourceId:sourceId, sourceParentId:sourceParentId};
          ev.dataTransfer.setData("text",JSON.stringify(data));
        }
        else if($.browser['msie'])
        {
          var data = {data:ev.target.id, sourceId:sourceId, sourceParentId:sourceParentId};
          ev.dataTransfer.setData("text",JSON.stringify(data));
        }
        else
        {
          var data = {data:document.getElementById(ev.target.id).parentNode.id, sourceId:sourceId, sourceParentId:sourceParentId};
          ev.dataTransfer.setData("text",JSON.stringify(data));
          //ev.dataTransfer.setData("text", document.getElementById(ev.target.id).parentNode.id);
        }
      }
      
      $.drop = function(tagid, ev)
      {
        ev.preventDefault();
        var JSONObject = JSON.parse(ev.dataTransfer.getData("text"));
        var data = JSONObject["data"];
        var sourceId = JSONObject["sourceId"];
        var sourceParentId = JSONObject["sourceParentId"];
        
        if(sourceParentId.contains("MyFavorites"))
        {
          // Moving favorites
          $('#'+tagid+" .delete").remove();
          var oldContent = $('#'+tagid).html();
          
          if(tagid != sourceId) {
            $('#'+tagid).empty().prepend(document.getElementById(data));
            $('#'+tagid).append("<a id='"+tagid+"' class='delete'><img alt='Delete' src='{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/delete-icon.png')}'></a>");
      
            $('#'+sourceId).empty().prepend(oldContent);
            if(!$('#'+sourceId).html().contains("favorite")) {
              $('#'+sourceId).append("<a id='"+sourceId+"' class='delete'><img alt='Delete' src='{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/delete-icon.png')}'></a>");
            }
            
            localStorage[tagid] = JSON.stringify($('#'+tagid).html()); 
            localStorage[sourceId] = JSON.stringify($('#'+sourceId).html());    
          } else {
            ev.stopPropagation();
            ev.preventDefault();
          }
        }
        else
        {                                           
          // Mosaic drag and drop to favorites
          var alreadyDragAndDrop=false; 
          for (var i=0; i<5; i++)
          {
            if (document.getElementById("favorite_"+(i+1)).childNodes[0].getAttribute('id')==data)
            {
              alreadyDragAndDrop=true;                                        
            }
          }
          if(alreadyDragAndDrop)
          {
            // Thumbnails already moved to favorites
            ev.stopPropagation();
            ev.preventDefault();
          }
          else
          {
            $('#'+tagid).empty().prepend(document.getElementById(data).cloneNode(true));
            $('#'+tagid).append("<a id='"+tagid+"' class='delete'><img alt='Delete' src='{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/delete-icon.png')}'></a>");
            localStorage[tagid] = JSON.stringify($('#'+tagid).html());  
          }
        }
      }
    
      $(document).ready(function() {
        // Build mosaic content
        $.BuildCategory();
         
        // Search
        $('.search_input').on('input', function() {
          $.Search(this.value);
        });
        
        // Back to top
        $.scrollUp({
          scrollText: 'Back to top'
        });
        
        // Bugh Firefox page scroll when drag
        $().dndPageScroll();
        
        // Button delete favorite
        $('.delete').hide();
        $(".panel-body div").hover(function(){
          $("#"+$(this).attr('id')+ ".delete").show();
        },function(){
          $('.delete').hide();
        });
        
        // Delete favorite
        $(document).on('click','.delete', function() {
          var id = $(this).parent().attr('id');
          $("#"+$(this).parent().attr('id')).empty().prepend("<img draggable='false' alt='"+id+"' src='{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/addFavorites.png')}'>");
          localStorage[id] = JSON.stringify($('#'+id).html());
        });
          
      });
    </script>
  </head>
  <body>
    <div class="container">
      <div class="row clearfix">
        <div class="col-md-12 column">
          <!-- Header -->
          <nav class="navbar navbar-default" role="navigation">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"> 
                <span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
              </button>
            </div>
            <!-- Link -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav"></ul>
            </div>
            <!-- Search -->
            <div class="search">
              <img alt="BrandCloud" src="{!URLFOR($Resource.ESN_BrandCloud_Resources,'/img/search.png')}"></img><input type="search" autocomplete="off" data-list=".nodata_list" placeholder="Search" name="search" class="search_input"></input>
            </div>
          </nav>
          <!-- Category -->      
          <div class="panel-group" id="panel-category"></div>
        </div>
      </div>
    </div>
  </body>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-55460751-2', 'auto');
    ga('send', 'pageview');

  </script>
</html>

</apex:page>