<apex:page id="EUR_CRM_GB_ContractSummaryPage" standardController="EUR_CRM_Contract__c" extensions="EUR_CRM_GB_ContractSummaryController" tabStyle="EUR_CRM_Contract__c">

    <apex:variable var="housePouringWrapper" value="{!mtWrapByMtExtId['GB_House_Pouring_Spirits']}" />
    <apex:variable var="premiumPouringSpiritsWrapper" value="{!mtWrapByMtExtId['GB_Premium_Pouring_Spirits']}" />
    <apex:variable var="housePouringChampagneWrapper" value="{!mtWrapByMtExtId['GB_House_Pouring_Champagne']}" />
    <apex:variable var="mustStockWrapper" value="{!mtWrapByMtExtId['GB_Must_Stock_Item']}" />
    <apex:variable var="mayStockWrapper" value="{!mtWrapByMtExtId['GB_May_Stock_Item']}" />
    <apex:variable var="cocktailWrapper" value="{!mtWrapByMtExtId['GB_Cocktail']}" />
    <apex:variable var="mktgSupportWrapper" value="{!mtWrapByMtExtId['GB_Marketing_Support']}" />
    <apex:variable var="tripWrapper" value="{!mtWrapByMtExtId['GB_Trips']}" />
    <apex:variable var="educationWrapper" value="{!mtWrapByMtExtId['GB_Educations']}" />
    <apex:variable var="posWrapper" value="{!mtWrapByMtExtId['GB_Point_of_Sales']}" />
    <apex:variable var="freeStockWrapper" value="{!mtWrapByMtExtId['GB_Free_Stock']}" />
    <apex:variable var="lumpSumWrapper" value="{!mtWrapByMtExtId['GB_Lump_Sum']}" />
    <apex:variable var="barSupportWrapper" value="{!mtWrapByMtExtId['GB_Bar_support']}" />
    <apex:variable var="otherSupportWrapper" value="{!mtWrapByMtExtId['GB_Other_Support']}" />
    <apex:variable var="drinksMenuSupportWrapper" value="{!mtWrapByMtExtId['GB_Drinks_Menu_Support']}" />
    <apex:variable var="commercialSupportWrapper" value="{!mtWrapByMtExtId['GB_Commercial_Fixed_Support']}" />
    <apex:variable var="brandActivationWrapper" value="{!mtWrapByMtExtId['GB_Brand_Activation']}" />
    <apex:variable var="stockDealHPSWrapper" value="{!mtWrapByMtExtId['GB_House_Pouring_Spirits_Stock_Deal']}" />
    <apex:variable var="stockDealPPSWrapper" value="{!mtWrapByMtExtId['GB_Premium_Pouring_Spirits_Stock_Deal']}" />
    <apex:variable var="stockDealHPCWrapper" value="{!mtWrapByMtExtId['GB_House_Pouring_Champagne_Stock_Deal']}" />
    <apex:variable var="stockDealMSWrapper" value="{!mtWrapByMtExtId['GB_Must_Stocks_Stock_Deal']}" />

    <apex:includeScript value="{!URLFOR($Resource.EUR_CRM_jQuery_Lib, '/libs/jquery/js/jquery-1.9.1.min.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.EUR_CRM_jQuery_DataTables, 'js/jquery.dataTables.js')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.EUR_CRM_jQuery_DataTables, 'css/jquery.dataTables.css')}" />

    <style>
        input[name='eur_crm_activate_contract']{
            display:none;}
        input[name='eur_crm_agree_with_t_c']{
            display:none;}
        input[name='eur_crm_view_volume_tracker']{
            display:none; }
        input[name='eur_crm_deactivate_contract']{
            display:none;}
        input[name='eur_crm_cancel']{
            display:none;}
        input[name='eur_crm_revise']{
            display:none;
        }
    </style>

    <script>
        $ = jQuery.noConflict();

        //DataTable Variable
        var cpiHousePouring;
        var bqHousePouring;
        var cpiPremiumPouringSpirits;
        var bqPremiumPouringSpirits;
        var cpiHousePouringChampagne;
        var bqHousePouringChampagne;
        var cpiMustStock;
        var bqMustStock;
        var cpiMayStock;
        var bqMayStock;
        var cpiCocktail;
        var bqCocktail;
        var cpiMktgSupport;
        var bqMktgSupport;
        var cpiTrip;
        var bqTrip;
        var cpiEducation;
        var bqEducation;
        var cpiPOS;
        var bqPOS;
        var cpiFreeStock;
        var bqFreeStock;
        var cpiCommercicalSupport;
        var cpibrandActivation;
        var cpiStockDealHPS;
        var cpiStockDealPPS;
        var cpiStockDealHPC;
        var cpiStockDealMS;
        var caiOtherSupport;

        var label_Qty = "Qty (9L cases/annum)";
        var colLabel_Action = "{!$Label.EUR_CRM_Action}";

        var colLabel_cpi_EUR_CRM_Brand_Quality_Name__c = "{!$ObjectType.EUR_CRM_Contract_Product_Item__c.fields.EUR_CRM_Brand_Quality_Name__c.label}";
        var colLabel_cpi_EUR_CRM_Activation__c = "{!$ObjectType.EUR_CRM_Contract_Product_Item__c.fields.EUR_CRM_Activation__c.label}";
        var colLabel_cpi_EUR_CRM_Quantity__c = "{!$ObjectType.EUR_CRM_Contract_Product_Item__c.fields.EUR_CRM_Quantity__c.label}";
        var colLabel_cpi_EUR_Min_Qty_Per_Annum_9L__c = "{!$ObjectType.EUR_CRM_Contract_Product_Item__c.fields.EUR_Min_Qty_Per_Annum_9L__c.label}";
        var colLabel_cpi_EUR_CRM_Retro_Per_9L__c = "{!$ObjectType.EUR_CRM_Contract_Product_Item__c.fields.EUR_CRM_Retro_Per_9L__c.label}";
        var colLabel_cpi_EUR_CRM_Total_Spend__c = "{!$ObjectType.EUR_CRM_Contract_Product_Item__c.fields.EUR_CRM_Total_Spend__c.label}";
        var colLabel_cpi_EUR_CRM_Available_by_the_Glass__c = "{!$ObjectType.EUR_CRM_Contract_Product_Item__c.fields.EUR_CRM_Available_by_the_Glass__c.label}";
        var colLabel_cpi_EUR_CRM_No_of_Cocktails__c = "{!$ObjectType.EUR_CRM_Contract_Product_Item__c.fields.EUR_CRM_No_of_Cocktails__c.label}";
        var colLabel_cpi_EUR_CRM_No_of_People__c = "{!$ObjectType.EUR_CRM_Contract_Product_Item__c.fields.EUR_CRM_No_of_People__c.label}";
        var colLabel_cpi_EUR_CRM_Cocktail_Menu__c = "{!$ObjectType.EUR_CRM_Contract_Product_Item__c.fields.EUR_CRM_Cocktail_Menu__c.label}";
        var colLabel_cpi_EUR_CRM_Value__c = "{!$ObjectType.EUR_CRM_Contract_Product_Item__c.fields.EUR_CRM_Value__c.label}";
        var colLabel_cpi_EUR_CRM_Free_Cases_9L__c = "{!$ObjectType.EUR_CRM_Contract_Product_Item__c.fields.EUR_CRM_Free_Cases_9L__c.label}";
        var colLabel_cpi_EUR_CRM_Optics__c = "{!$ObjectType.EUR_CRM_Contract_Product_Item__c.fields.EUR_CRM_Optics__c.label}";
        var colLabel_sdm_EUR_CRM_Stock_Deal_Name__c = "{!$ObjectType.EUR_CRM_Stock_Deal_Mechanic__c.fields.EUR_CRM_Stock_Deal_Name__c.label}";
        var colLabel_cm_EUR_CRM_Mechanic_Name__c = "{!$ObjectType.EUR_CRM_Contract_Mechanic__c.fields.EUR_CRM_Mechanic_Name__c.label}";
        var colLabel_cpi_EUR_CRM_Type_of_Support__c = "{!$ObjectType.EUR_CRM_Contract_Product_Item__c.fields.EUR_CRM_Type_of_Support__c.label}";
        var colLabel_cpi_EUR_CRM_ZA_Payment_Terms__c = "{!$ObjectType.EUR_CRM_Contract_Product_Item__c.fields.EUR_CRM_ZA_Payment_Terms__c.label}";
        var colLabel_cpi_EUR_CRM_Product_Name__c = "{!$ObjectType.EUR_CRM_Contract_Product_Item__c.fields.EUR_CRM_Product_Name__c.label}";
        var colLabel_cpi_EUR_CRM_Timing__c = "{!$ObjectType.EUR_CRM_Contract_Product_Item__c.fields.EUR_CRM_Timing__c.label}";
        var colLabel_cpi_EUR_CRM_Total_Spend_inc_free_cases__c = "{!$ObjectType.EUR_CRM_Contract_Product_Item__c.fields.EUR_CRM_Total_Spend_inc_free_cases__c.label}";
        var colLabel_cpi_EUR_CRM_Minimum_Bottles_To_Purchase__c = "{!$ObjectType.EUR_CRM_Contract_Product_Item__c.fields.EUR_CRM_Minimum_Bottles_To_Purchase__c.label}";

        //Common Data Table Properties
        var basicDataTableProperties = {
            "bDestroy":true,
            "bStateSave":true,
            "aaSorting": [[1, "asc"]],
            "bSearch":false,
            "bFilter" : true
        };

        $(document).ready(
            function(){
                console.log("CHECK BUTTONS: {!NOT(ISBLANK(contractObj.EUR_CRM_Contract_Approved_Date__c))} - {!contractObj.EUR_CRM_Active__c} - {!contractObj.EUR_CRM_Status__c}");
                validateButtons();

                setTables();
            }
        );

        function setTables(){
            setHousePouringTable();
            setPremiumPouringSpiritsTable();
            setHousePouringChampagneTable();
            setMuskStockTable();
            setMayStockTable();
            setCocktailTable();
            setMarketingPackageTables();
        }

        function setHousePouringTable(){
            var cpiHousePouring_dataTableProperties = basicDataTableProperties;
            cpiHousePouring_dataTableProperties["aoColumns"] = [
                {"sTitle": colLabel_cpi_EUR_CRM_Brand_Quality_Name__c},
                {"sTitle": colLabel_cpi_EUR_Min_Qty_Per_Annum_9L__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Retro_Per_9L__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Total_Spend__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Optics__c}
            ];
            console.log('Set - {!CPI_TABLE_PREFIX}{!housePouringWrapper.mtId}');

            cpiHousePouring = $("#{!CPI_TABLE_PREFIX}{!housePouringWrapper.mtId}").dataTable(cpiHousePouring_dataTableProperties);
        }

        function setPremiumPouringSpiritsTable(){
            var cpiPremiumPouringSpirits_dataTableProperties = basicDataTableProperties;
            cpiPremiumPouringSpirits_dataTableProperties["aoColumns"] = [
                {"sTitle": colLabel_cpi_EUR_CRM_Brand_Quality_Name__c},
                {"sTitle": colLabel_cpi_EUR_Min_Qty_Per_Annum_9L__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Retro_Per_9L__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Total_Spend__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Optics__c}
            ];
            cpiPremiumPouringSpirits = $("#{!CPI_TABLE_PREFIX}{!premiumPouringSpiritsWrapper.mtId}").dataTable(cpiPremiumPouringSpirits_dataTableProperties);
        }

        function setHousePouringChampagneTable(){
            var cpiHousePouringChampagne_dataTableProperties = basicDataTableProperties;
            cpiHousePouringChampagne_dataTableProperties["aoColumns"] = [
                {"sTitle": colLabel_cpi_EUR_CRM_Brand_Quality_Name__c},
                {"sTitle": colLabel_cpi_EUR_Min_Qty_Per_Annum_9L__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Retro_Per_9L__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Available_by_the_Glass__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Total_Spend__c}
            ];
            cpiHousePouringChampagne = $("#{!CPI_TABLE_PREFIX}{!housePouringChampagneWrapper.mtId}").dataTable(cpiHousePouringChampagne_dataTableProperties);
        }


        function setMuskStockTable(){
            var cpiMustStock_dataTableProperties = basicDataTableProperties;
            cpiMustStock_dataTableProperties["aoColumns"] = [
                {"sTitle": colLabel_cpi_EUR_CRM_Brand_Quality_Name__c},
                {"sTitle": colLabel_cpi_EUR_Min_Qty_Per_Annum_9L__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Retro_Per_9L__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Total_Spend__c}
            ];
            cpiMustStock = $("#{!CPI_TABLE_PREFIX}{!mustStockWrapper.mtId}").dataTable(cpiMustStock_dataTableProperties);
        }

        function setMayStockTable(){
            var cpiMayStock_dataTableProperties = basicDataTableProperties;
            cpiMayStock_dataTableProperties["aoColumns"] = [
                {"sTitle":colLabel_cpi_EUR_CRM_Brand_Quality_Name__c}
            ];
            cpiMayStock = $("#{!CPI_TABLE_PREFIX}{!mayStockWrapper.mtId}").dataTable(cpiMayStock_dataTableProperties);
        }

        function setCocktailTable(){
            var cpiCocktail_dataTableProperties = basicDataTableProperties;
            cpiCocktail_dataTableProperties["aoColumns"] = [
                {"sTitle": colLabel_cpi_EUR_CRM_Brand_Quality_Name__c},
                {"sTitle": colLabel_cpi_EUR_CRM_No_of_Cocktails__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Cocktail_Menu__c}
            ];
            cpiCocktail = $("#{!CPI_TABLE_PREFIX}{!cocktailWrapper.mtId}").dataTable(cpiCocktail_dataTableProperties);
        }

        function setMktgSupportTable(){
            var cpiMktgSupport_dataTableProperties = basicDataTableProperties;
            cpiMktgSupport_dataTableProperties["aoColumns"] = [
                {"sTitle": colLabel_cpi_EUR_CRM_Brand_Quality_Name__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Value__c}
            ];
            cpiMktgSupport = $("#{!CPI_TABLE_PREFIX}{!mktgSupportWrapper.mtId}").dataTable(cpiMktgSupport_dataTableProperties);
        }

        function setTripTable(){
            var cpiTrip_dataTableProperties = basicDataTableProperties;
            cpiTrip_dataTableProperties["aoColumns"] = [
                {"sTitle": colLabel_cpi_EUR_CRM_Brand_Quality_Name__c},
                {"sTitle": "Trip Name"},
                {"sTitle": colLabel_cpi_EUR_CRM_No_of_People__c},
                {"sTitle": "Trip Value"}
            ];

            cpiTrip = $("#{!CPI_TABLE_PREFIX}{!tripWrapper.mtId}").dataTable(cpiTrip_dataTableProperties);
        }

        function setEducationTable(){
            var cpiEducation_dataTableProperties = basicDataTableProperties;
            cpiEducation_dataTableProperties["aoColumns"] = [
                {"sTitle": "Brand"},
                {"sTitle": "Training"},
                {"sTitle": "Value"}
            ];

            cpiEducation = $("#{!CPI_TABLE_PREFIX}{!educationWrapper.mtId}").dataTable(cpiEducation_dataTableProperties);
        }

        function setPOSTable(){
            var cpiPOS_dataTableProperties = basicDataTableProperties;
            cpiPOS_dataTableProperties["aoColumns"] = [
                {"sTitle": "Brand"},
                {"sTitle": "POS Value"},
                {"sTitle": "POS Type"}
            ];
            cpiPOS = $("#{!CPI_TABLE_PREFIX}{!posWrapper.mtId}").dataTable(cpiPOS_dataTableProperties);
        }

        function setFreeStockTable(){
            var cpiFreeStock_dataTableProperties = basicDataTableProperties;
            cpiFreeStock_dataTableProperties["aoColumns"] = [
                {"sTitle": colLabel_cpi_EUR_CRM_Brand_Quality_Name__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Activation__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Quantity__c},
                {"sTitle": "Stock Value"}
            ];
            cpiFreeStock = $("#{!CPI_TABLE_PREFIX}{!freeStockWrapper.mtId}").dataTable(cpiFreeStock_dataTableProperties);
        }

        function setCommercicalSupportTable(){
            var cpiCommercicalSupport_dataTableProperties = basicDataTableProperties;
            cpiCommercicalSupport_dataTableProperties["aoColumns"] = [
                {"sTitle": colLabel_cpi_EUR_CRM_Brand_Quality_Name__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Type_of_Support__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Value__c},
                {"sTitle": colLabel_cpi_EUR_CRM_ZA_Payment_Terms__c}
            ];
            cpiCommercicalSupport = $("#{!CPI_TABLE_PREFIX}{!commercialSupportWrapper.mtId}").dataTable(cpiCommercicalSupport_dataTableProperties);
        }

        function setBrandActivationTable(){
            var cpiBrandActivation_dataTableProperties = basicDataTableProperties;
            cpiBrandActivation_dataTableProperties["aoColumns"] = [
                {"sTitle": colLabel_cpi_EUR_CRM_Product_Name__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Activation__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Timing__c}
            ];
            cpibrandActivation = $("#{!CPI_TABLE_PREFIX}{!brandActivationWrapper.mtId}").dataTable(cpiBrandActivation_dataTableProperties);
        }

        function setStockDealTable(){
            var cpiStockDealHPS_dataTableProperties = basicDataTableProperties;
            cpiStockDealHPS_dataTableProperties["aoColumns"] = [
                {"sTitle": colLabel_cpi_EUR_CRM_Brand_Quality_Name__c},
                {"sTitle": colLabel_cpi_EUR_Min_Qty_Per_Annum_9L__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Minimum_Bottles_To_Purchase__c},
                {"sTitle": colLabel_sdm_EUR_CRM_Stock_Deal_Name__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Free_Cases_9L__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Total_Spend_inc_free_cases__c}
            ];
            cpiStockDealHPS = $("#{!CPI_TABLE_PREFIX}{!stockDealHPSWrapper.mtId}").dataTable(cpiStockDealHPS_dataTableProperties);
            var cpiStockDealPPS_dataTableProperties = basicDataTableProperties;
            cpiStockDealPPS_dataTableProperties["aoColumns"] = [
                {"sTitle": colLabel_cpi_EUR_CRM_Brand_Quality_Name__c},
                {"sTitle": colLabel_cpi_EUR_Min_Qty_Per_Annum_9L__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Minimum_Bottles_To_Purchase__c},
                {"sTitle": colLabel_sdm_EUR_CRM_Stock_Deal_Name__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Free_Cases_9L__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Total_Spend_inc_free_cases__c}
            ];
            cpiStockDealPPS = $("#{!CPI_TABLE_PREFIX}{!stockDealPPSWrapper.mtId}").dataTable(cpiStockDealPPS_dataTableProperties);
            var cpiStockDealHPC_dataTableProperties = basicDataTableProperties;
            cpiStockDealHPC_dataTableProperties["aoColumns"] = [
                {"sTitle": colLabel_cpi_EUR_CRM_Brand_Quality_Name__c},
                {"sTitle": colLabel_cpi_EUR_Min_Qty_Per_Annum_9L__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Minimum_Bottles_To_Purchase__c},
                {"sTitle": colLabel_sdm_EUR_CRM_Stock_Deal_Name__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Free_Cases_9L__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Total_Spend_inc_free_cases__c}
            ];
            cpiStockDealHPC = $("#{!CPI_TABLE_PREFIX}{!stockDealHPCWrapper.mtId}").dataTable(cpiStockDealHPC_dataTableProperties);
            var cpiStockDealMS_dataTableProperties = basicDataTableProperties;
            cpiStockDealMS_dataTableProperties["aoColumns"] = [
                {"sTitle": colLabel_cpi_EUR_CRM_Brand_Quality_Name__c},
                {"sTitle": colLabel_cpi_EUR_Min_Qty_Per_Annum_9L__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Minimum_Bottles_To_Purchase__c},
                {"sTitle": colLabel_sdm_EUR_CRM_Stock_Deal_Name__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Free_Cases_9L__c},
                {"sTitle": colLabel_cpi_EUR_CRM_Total_Spend_inc_free_cases__c}
            ];
            cpiStockDealMS = $("#{!CPI_TABLE_PREFIX}{!stockDealMSWrapper.mtId}").dataTable(cpiStockDealMS_dataTableProperties);
        }

        function setOtherSupportTable(){
            var caiOtherSupport_dataTableProperties = basicDataTableProperties;
            caiOtherSupport_dataTableProperties["aoColumns"] = [
                {"sTitle": "Description"},
                {"sTitle": "Value"}
            ];
            caiOtherSupport = $("#{!CPI_TABLE_PREFIX}{!otherSupportWrapper.mtId}").dataTable(caiOtherSupport_dataTableProperties);
        }

        function setMarketingPackageTables(){
            setMktgSupportTable();
            setTripTable();
            setEducationTable();
            setPOSTable();
            setFreeStockTable();
            setCommercicalSupportTable();
            setBrandActivationTable();
            setStockDealTable();
            setOtherSupportTable();
        }


        function validateButtons(){
            /*
                $('input[name="eur_crm_activate_contract"]').hide();
                $('input[name="eur_crm_view_volume_tracker"]').hide();
                $('input[name="eur_crm_deactivate_contract"]').hide();
                $('input[name="eur_crm_cancel"]').hide();
                */
            if ({!NOT(ISBLANK(contractObj.EUR_CRM_Contract_Approved_Date__c))}){
                $('input[name="edit"]').hide();
                $('input[name="del"]').hide();
                $('input[name="eur_crm_set_contract_details"]').hide();

                <!--console.log('CHECK ACTIVATE CONTRACT - {!NOT(contractObj.EUR_CRM_Active__c)})') ;-->
                if ({!NOT(contractObj.EUR_CRM_Active__c)}){
                    // console.log('SHOW ACTIVATE CONTRACT');
                    $('input[name="eur_crm_activate_contract"]').show();
                }else{
                    $('input[name="eur_crm_activate_contract"]').hide();
                }
            }

            <!--console.log('Validate buttons:' + "{!ISBLANK(contractObj.EUR_CRM_Contract_Approved_Date__c)} "+" {!NOT(contractObj.EUR_CRM_Active__c)}");-->
            if ({!contractObj.EUR_CRM_Active__c}){
                $('input[name="eur_crm_activate_contract"]').hide();
                $('input[name="eur_crm_view_volume_tracker"]').show();
                $('input[name="eur_crm_deactivate_contract"]').show();
            }
            <!--console.log('Total Line Items:{!contractObj.EUR_CRM_Total_Contract_Line_Items__c} - {!contractObj.EUR_CRM_Agrees_with_TC__c} - {contractObj.EUR_CRM_Contract_Uploaded__c}');-->
            if ({!IF(OR(contractObj.EUR_CRM_Total_Contract_Value__c<=0, contractObj.EUR_CRM_Agrees_with_TC__c, contractObj.EUR_CRM_Contract_Uploaded__c),true,false)}){
                $('input[name="eur_crm_publish_contract"]').hide();
            }

            if({!contractObj.EUR_CRM_Status__c == 'Contract Approved' || contractObj.EUR_CRM_Status__c == 'Proposal Approved'
            || contractObj.EUR_CRM_Status__c == 'Approved'}){
                $('input[name="eur_crm_cancel"]').show();
                $('input[name="eur_crm_revise"]').show();
            }
            <!--if({!contractObj.EUR_CRM_Status__c == 'Proposal Approved' && isGB_RectypeId}){-->
                // $('input[name="eur_crm_revise"]').hide();
            // }
            if({!contractObj.EUR_CRM_Status__c == 'Cancelled'}){
                $('input[name="eur_crm_cancel"]').hide();
                $('input[name="eur_crm_revise"]').hide();
                $('input[name="eur_crm_activate_contract"]').hide();
                $('input[name="eur_crm_view_volume_tracker"]').hide();
                $('input[name="eur_crm_deactivate_contract"]').hide();
                $('input[name="eur_crm_publish_contract"]').hide();
                $('input[name="eur_crm_clone_contract"]').hide();
                $('input[name="edit"]').hide();
                $('input[name="eur_crm_set_contract_details"]').hide();
                $('input[name="eur_crm_agree_with_t_c"]').hide();
            }

            if({!contractObj.EUR_CRM_Status__c == 'Contract Approved'}){
                $('input[name="eur_crm_agree_with_t_c"]').show();
            }
        }
    </script>

    <apex:form >
        <apex:pageBlock >
            <apex:pageMessage summary="<b>{!$Label.EUR_CRM_CustomerSignOff}</b>" severity="warning" strength="2" escape="false" rendered="{!IF(contractObj.EUR_CRM_Customer_Agreed_With_No_Sign_off__c && contractObj.EUR_CRM_Active__c, true, false)}"/>
            <apex:detail subject="{!EUR_CRM_Contract__c.Id}" relatedList="true" title="true" inlineEdit="true"/>
            <apex:pageBlockSection title="{!housePouringWrapper.mechanicTypeName}" columns="1"
                                   rendered="{! housePouringWrapper.cpisSize > 0 }">
                <apex:pageBlock id="panel_Total_HousePouring">
                    <apex:pageBlockSection columns="2">
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="{!$ObjectType.EUR_CRM_Contract_Activity_Item__c.fields.EUR_CRM_Total_Value__c.label}"/>
                            <apex:outputText value="{!currencyCode} {0, Number, ###,###,###,###,##0.00}">
                                <apex:param value="{!housePouringWrapper.cai.EUR_CRM_Total_Value__c}"/>
                            </apex:outputText>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="{!$ObjectType.EUR_CRM_Contract_Activity_Item__c.fields.EUR_CRM_Total_Spent_Free_cases__c.label}"/>
                            <apex:outputText value="{!currencyCode} {0, Number, ###,###,###,###,##0.00}">
                                <apex:param value="{!housePouringWrapper.cai.EUR_CRM_Total_Spent_Free_cases__c}"/>
                            </apex:outputText>
                        </apex:pageBlockSectionItem>
                    </apex:pageBlockSection>
                    <br/>
                    <apex:pageBlockSection columns="1">
                        <apex:outputPanel layout="block">
                            <table id="{!CPI_TABLE_PREFIX}{!housePouringWrapper.mtId}">
                                <apex:repeat value="{!housePouringWrapper.cpis}" var="cpi">
                                    <tr id="row_housePouring_" class="cliContent">
                                        <td><apex:outputField value="{!cpi.EUR_CRM_Brand_Quality_Name__c}"/></td>
                                        <td><apex:outputField value="{!cpi.EUR_Min_Qty_Per_Annum_9L__c}"/></td>
                                        <td><apex:outputField value="{!cpi.EUR_CRM_Retro_Per_9L__c}"/></td>
                                        <td><apex:outputField value="{!cpi.EUR_CRM_Total_Spend__c}"/></td>
                                        <td><apex:outputField value="{!cpi.EUR_CRM_Optics__c}"/></td>
                                    </tr>
                                </apex:repeat>
                            </table>
                        </apex:outputPanel>
                    </apex:pageBlockSection>
                </apex:pageBlock>
            </apex:pageBlockSection>
            <apex:pageBlock rendered="{!stockDealHPSWrapper.cpisSize > 0}" title="{!stockDealHPSWrapper.mechanicTypeName}"
                            id="panel_stockDealHPSWrapper">
                <apex:pageBlockSection columns="1">
                    <br/>
                    <apex:outputPanel layout="block">
                        <table id="{!CPI_TABLE_PREFIX}{!stockDealHPSWrapper.mtId}">
                            <apex:repeat value="{!stockDealHPSWrapper.cpis}" var="cpi">
                                <tr>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Brand_Quality_Name__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_Min_Qty_Per_Annum_9L__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Minimum_Bottles_To_Purchase__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Stock_Deal_Mechanic__r.EUR_CRM_Stock_Deal_Name__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Free_Cases_9L__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Total_Spend_inc_free_cases__c}"/></td>
                                </tr>
                            </apex:repeat>
                        </table>
                    </apex:outputPanel>
                </apex:pageBlockSection>
            </apex:pageBlock>
            <apex:pageBlockSection title="{!premiumPouringSpiritsWrapper.mechanicTypeName}" columns="1" rendered="{! premiumPouringSpiritsWrapper.cpisSize > 0 }">
                <apex:pageBlock id="panel_Total_PremiumPouring">
                    <apex:pageBlockSection columns="2">
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="{!$ObjectType.EUR_CRM_Contract_Activity_Item__c.fields.EUR_CRM_Total_Value__c.label}"/>
                            <apex:outputText value="{!currencyCode} {0, number, ###,###,###,###,##0.00}">
                                <apex:param value="{!premiumPouringSpiritsWrapper.cai.EUR_CRM_Total_Value__c}"/>
                            </apex:outputText>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="{!$ObjectType.EUR_CRM_Contract_Activity_Item__c.fields.EUR_CRM_Total_Spent_Free_cases__c.label}"/>
                            <apex:outputText value="{!currencyCode} {0, Number, ###,###,###,###,##0.00}">
                                <apex:param value="{!premiumPouringSpiritsWrapper.cai.EUR_CRM_Total_Spent_Free_cases__c}"/>
                            </apex:outputText>
                        </apex:pageBlockSectionItem>
                    </apex:pageBlockSection>
                        <br/>
                    <apex:pageBlockSection columns="1">
                        <apex:outputPanel layout="block">
                            <table id="{!CPI_TABLE_PREFIX}{!premiumPouringSpiritsWrapper.mtId}">
                                <apex:repeat value="{!premiumPouringSpiritsWrapper.cpis}" var="cpi">
                                        <tr >
                                            <td><apex:outputField value="{!cpi.EUR_CRM_Brand_Quality_Name__c}"/></td>
                                            <td><apex:outputField value="{!cpi.EUR_Min_Qty_Per_Annum_9L__c}"/></td>
                                            <td><apex:outputField value="{!cpi.EUR_CRM_Retro_Per_9L__c}"/></td>
                                            <td><apex:outputField value="{!cpi.EUR_CRM_Total_Spend__c}"/></td>
                                            <td><apex:outputField value="{!cpi.EUR_CRM_Optics__c}"/></td>
                                        </tr>
                                </apex:repeat>
                            </table>
                        </apex:outputPanel>
                    </apex:pageBlockSection>
                </apex:pageBlock>
            </apex:pageBlockSection>
            <apex:pageBlock rendered="{!stockDealPPSWrapper.cpisSize > 0}" title="{!stockDealPPSWrapper.mechanicTypeName}"
                            id="panel_stockDealPPSWrapper">
                <apex:pageBlockSection columns="1">
                    <br/>
                    <apex:outputPanel layout="block">
                        <table id="{!CPI_TABLE_PREFIX}{!stockDealPPSWrapper.mtId}">
                            <apex:repeat value="{!stockDealPPSWrapper.cpis}" var="cpi">
                                <tr>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Brand_Quality_Name__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_Min_Qty_Per_Annum_9L__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Minimum_Bottles_To_Purchase__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Stock_Deal_Mechanic__r.EUR_CRM_Stock_Deal_Name__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Free_Cases_9L__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Total_Spend_inc_free_cases__c}"/></td>
                                </tr>
                            </apex:repeat>
                        </table>
                    </apex:outputPanel>
                </apex:pageBlockSection>
            </apex:pageBlock>
            <apex:pageBlockSection title="{!housePouringChampagneWrapper.mechanicTypeName}" columns="1" rendered="{! housePouringChampagneWrapper.cpisSize > 0}">
                <apex:pageBlock id="panel_Total_HousePouringChampagne">
                    <apex:pageBlockSection columns="2">
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="{!$ObjectType.EUR_CRM_Contract_Activity_Item__c.fields.EUR_CRM_Total_Value__c.label}"/>
                            <apex:outputText value="{!currencyCode} {0, number, ###,###,###,###,##0.00}">
                                <apex:param value="{!housePouringChampagneWrapper.cai.EUR_CRM_Total_Value__c}"/>
                            </apex:outputText>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="{!$ObjectType.EUR_CRM_Contract_Activity_Item__c.fields.EUR_CRM_Total_Spent_Free_cases__c.label}"/>
                            <apex:outputText value="{!currencyCode} {0, Number, ###,###,###,###,##0.00}">
                                <apex:param value="{!housePouringChampagneWrapper.cai.EUR_CRM_Total_Spent_Free_cases__c}"/>
                            </apex:outputText>
                        </apex:pageBlockSectionItem>
                    </apex:pageBlockSection>
                        <br/>
                    <apex:pageBlockSection columns="1">
                        <apex:outputPanel layout="block">
                            <table id="{!CPI_TABLE_PREFIX}{!housePouringChampagneWrapper.mtId}">
                                <apex:repeat value="{!housePouringChampagneWrapper.cpis}" var="cpi">
                                        <tr >
                                            <td><apex:outputField value="{!cpi.EUR_CRM_Brand_Quality_Name__c}"/></td>
                                            <td><apex:outputField value="{!cpi.EUR_Min_Qty_Per_Annum_9L__c}"/></td>
                                            <td><apex:outputField value="{!cpi.EUR_CRM_Retro_Per_9L__c}"/></td>
                                            <td><apex:outputField value="{!cpi.EUR_CRM_Available_by_the_Glass__c}"/></td>
                                            <td><apex:outputField value="{!cpi.EUR_CRM_Total_Spend__c}"/></td>
                                        </tr>
                                </apex:repeat>
                            </table>
                        </apex:outputPanel>
                    </apex:pageBlockSection>
                </apex:pageBlock>
            </apex:pageBlockSection>
            <apex:pageBlock rendered="{!stockDealHPCWrapper.cpisSize > 0}" title="{!stockDealHPCWrapper.mechanicTypeName}"
                            id="panel_stockDealHPCWrapper">
                <apex:pageBlockSection columns="1">
                    <br/>
                    <apex:outputPanel layout="block">
                        <table id="{!CPI_TABLE_PREFIX}{!stockDealHPCWrapper.mtId}">
                            <apex:repeat value="{!stockDealHPCWrapper.cpis}" var="cpi">
                                <tr>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Brand_Quality_Name__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_Min_Qty_Per_Annum_9L__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Minimum_Bottles_To_Purchase__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Stock_Deal_Mechanic__r.EUR_CRM_Stock_Deal_Name__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Free_Cases_9L__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Total_Spend_inc_free_cases__c}"/></td>
                                </tr>
                            </apex:repeat>
                        </table>
                    </apex:outputPanel>
                </apex:pageBlockSection>
            </apex:pageBlock>
            <apex:pageBlockSection title="{!mustStockWrapper.mechanicTypeName}" columns="1" rendered="{!OR(mustStockWrapper.cpisSize > 0, mayStockWrapper.cpisSize > 0)}">
                <apex:pageBlock title="{!mustStockWrapper.mechanicTypeName}" id="panel_Total_MustStock">
                    <apex:pageBlockSection columns="1">
                        <br/>
                        <apex:outputPanel layout="block">
                            <table id="{!CPI_TABLE_PREFIX}{!mustStockWrapper.mtId}">
                                <apex:repeat value="{!mustStockWrapper.cpis}" var="cpi">
                                        <tr>
                                            <td><apex:outputField value="{!cpi.EUR_CRM_Brand_Quality_Name__c}"/></td>
                                            <td><apex:outputField value="{!cpi.EUR_Min_Qty_Per_Annum_9L__c}"/></td>
                                            <td><apex:outputField value="{!cpi.EUR_CRM_Retro_Per_9L__c}"/></td>
                                            <td><apex:outputField value="{!cpi.EUR_CRM_Total_Spend__c}"/></td>
                                        </tr>
                                </apex:repeat>
                            </table>
                        </apex:outputPanel>
                    </apex:pageBlockSection></apex:pageBlock>
            </apex:pageBlockSection>
            <apex:pageBlock rendered="{!stockDealMSWrapper.cpisSize > 0}" title="{!stockDealMSWrapper.mechanicTypeName}"
                            id="panel_stockDealMSWrapper">
                <apex:pageBlockSection columns="1">
                    <br/>
                    <apex:outputPanel layout="block">
                        <table id="{!CPI_TABLE_PREFIX}{!stockDealMSWrapper.mtId}">
                            <apex:repeat value="{!stockDealMSWrapper.cpis}" var="cpi">
                                <tr>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Brand_Quality_Name__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_Min_Qty_Per_Annum_9L__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Minimum_Bottles_To_Purchase__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Stock_Deal_Mechanic__r.EUR_CRM_Stock_Deal_Name__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Free_Cases_9L__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Total_Spend_inc_free_cases__c}"/></td>
                                </tr>
                            </apex:repeat>
                        </table>
                    </apex:outputPanel>
                </apex:pageBlockSection>
            </apex:pageBlock>
            <apex:pageBlockSection title="{!cocktailWrapper.mechanicTypeName}" columns="1" rendered="{!cocktailWrapper.cpisSize > 0}">
                <apex:outputPanel layout="block">
                    <table id="{!CPI_TABLE_PREFIX}{!cocktailWrapper.mtId}">
                        <apex:repeat value="{!cocktailWrapper.cpis}" var="cpi">
                                <tr>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Brand_Quality_Name__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_No_of_Cocktails__c}"/></td>
                                    <td><apex:outputField value="{!cpi.EUR_CRM_Cocktail_Menu__c}"/></td>
                                </tr>
                        </apex:repeat>
                    </table>
                </apex:outputPanel>
            </apex:pageBlockSection>
            <apex:pageBlockSection title="Activation & Support" columns="1" rendered="true">
                <apex:pageBlock rendered="{!brandActivationWrapper.cpisSize > 0}" title="{!brandActivationWrapper.mechanicTypeName}"
                                id="panel_Total_BrandActivation">
                    <apex:pageBlockSection columns="1">
                        <br/>
                        <apex:outputPanel layout="block">
                            <table id="{!CPI_TABLE_PREFIX}{!brandActivationWrapper.mtId}">
                                <apex:repeat value="{!brandActivationWrapper.cpis}" var="cpi">
                                    <tr>
                                        <td><apex:outputField value="{!cpi.EUR_CRM_Product_Name__c}"/></td>
                                        <td><apex:outputField value="{!cpi.EUR_CRM_Activation__c}"/></td>
                                        <td><apex:outputField value="{!cpi.EUR_CRM_Timing__c}"/></td>
                                    </tr>
                                </apex:repeat>
                            </table>
                        </apex:outputPanel>
                    </apex:pageBlockSection>
                </apex:pageBlock>
                <apex:outputPanel id="MarketingContainer_LumpSum" layout="block" >
                    <apex:pageBlock title="{!lumpSumWrapper.mechanicTypeName}" rendered="{!and (lumpSumWrapper.cai.EUR_CRM_Amount__c != null, lumpSumWrapper.cai.EUR_CRM_Amount__c > 0)}">
                        <apex:pageBlockSection >
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="{!$ObjectType.EUR_CRM_Contract_Activity_Item__c.fields.EUR_CRM_Amount__c.label}"/>
                                <apex:outputText value="{!currencyCode} {0, number, ###,###,###,###,##0.00}">
                                    <apex:param value="{!lumpSumWrapper.cai.EUR_CRM_Amount__c}"/>
                                </apex:outputText>
                            </apex:pageBlockSectionItem>
                        </apex:pageBlockSection>
                    </apex:pageBlock>
                </apex:outputPanel>

                <apex:outputPanel id="drinksMenuContainer" layout="block" >
                    <apex:pageBlock title="{!drinksMenuSupportWrapper.mechanicTypeName}" rendered="{!and (drinksMenuSupportWrapper.cai.EUR_CRM_Amount__c != null, drinksMenuSupportWrapper.cai.EUR_CRM_Amount__c > 0)}">
                        <apex:pageBlockSection >
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="{!$ObjectType.EUR_CRM_Contract_Activity_Item__c.fields.EUR_CRM_Min_Percentage_Share_of_MRM_Menu__c.label}"/>
                                <apex:outputText value="{!drinksMenuSupportWrapper.cai.EUR_CRM_Min_Percentage_Share_of_MRM_Menu__c}"/>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="{!$ObjectType.EUR_CRM_Contract_Activity_Item__c.fields.EUR_CRM_Amount__c.label}"/>
                                <apex:outputText value="{!currencyCode} {0, number, ###,###,###,###,##0.00}">
                                    <apex:param value="{!drinksMenuSupportWrapper.cai.EUR_CRM_Amount__c}"/>
                                </apex:outputText>
                            </apex:pageBlockSectionItem>
                        </apex:pageBlockSection>
                    </apex:pageBlock>
                </apex:outputPanel>

                <apex:outputPanel id="MarketingContainer_BarSupport" layout="block" >
                    <apex:pageBlock title="{!barSupportWrapper.mechanicTypeName}" rendered="{!and (barSupportWrapper.cai.EUR_CRM_Amount__c != null, barSupportWrapper.cai.EUR_CRM_Amount__c > 0)}">
                        <apex:pageBlockSection >
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="{!$ObjectType.EUR_CRM_Contract_Activity_Item__c.fields.EUR_CRM_Amount__c.label}"/>
                                <apex:outputText value="{!currencyCode} {0, number, ###,###,###,###,##0.00}">
                                    <apex:param value="{!barSupportWrapper.cai.EUR_CRM_Amount__c}"/>
                                </apex:outputText>
                            </apex:pageBlockSectionItem>
                        </apex:pageBlockSection>
                    </apex:pageBlock>
                </apex:outputPanel>

                <apex:outputPanel id="MarketingContainer_BQ" layout="block" >
                    <apex:pageBlock title="{!mktgSupportWrapper.mechanicTypeName}" rendered="{!mktgSupportWrapper.cpisSize > 0}">
                        <apex:pageBlockSection columns="1">
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="{!$ObjectType.EUR_CRM_Contract_Activity_Item__c.fields.EUR_CRM_Total_Value__c.label}"/>
                                <apex:outputText value="{!currencyCode} {0, number, ###,###,###,###,##0.00}">
                                    <apex:param value="{!mktgSupportWrapper.cai.EUR_CRM_Total_Value__c}"/>
                                </apex:outputText>
                            </apex:pageBlockSectionItem>
                            <br/>
                            <apex:outputPanel layout="block">
                                <table id="{!CPI_TABLE_PREFIX}{!mktgSupportWrapper.mtId}">
                                    <apex:repeat value="{!mktgSupportWrapper.cpis}" var="cpi">
                                            <tr>
                                                <td><apex:outputField value="{!cpi.EUR_CRM_Brand_Quality_Name__c}"/></td>
                                                <td><apex:outputField value="{!cpi.EUR_CRM_Value__c}"/></td>
                                            </tr>
                                    </apex:repeat>
                                </table>
                            </apex:outputPanel>
                        </apex:pageBlockSection>
                    </apex:pageBlock>

                    <apex:pageBlock title="{!tripWrapper.mechanicTypeName}" rendered="{!tripWrapper.cpisSize > 0}">
                        <apex:pageBlockSection columns="1">
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="{!$ObjectType.EUR_CRM_Contract_Activity_Item__c.fields.EUR_CRM_Total_Value__c.label}"/>
                                <apex:outputText value="{!currencyCode} {0, number, ###,###,###,###,##0.00}">
                                    <apex:param value="{!tripWrapper.cai.EUR_CRM_Total_Value__c}"/>
                                </apex:outputText>
                            </apex:pageBlockSectionItem>
                            <br/>
                            <apex:outputPanel layout="block">
                                <table id="{!CPI_TABLE_PREFIX}{!tripWrapper.mtId}">
                                    <apex:repeat value="{!tripWrapper.cpis}" var="cpi">
                                            <tr>
                                                <td><apex:outputText value="{!IF(cpi.EUR_CRM_Brand__r.Name != null, cpi.EUR_CRM_Brand__r.Name, cpi.EUR_CRM_Brand_Quality_Name__c)}"/></td>
                                                <td><apex:outputField value="{!cpi.EUR_CRM_Contract_Mechanic__r.EUR_CRM_Mechanic_Name__c}"/></td>
                                                <td><apex:outputField value="{!cpi.EUR_CRM_No_of_People__c}"/></td>
                                                <td><apex:outputField value="{!cpi.EUR_CRM_Mechanic_Value__c}"/></td>
                                            </tr>
                                    </apex:repeat>
                                </table>
                            </apex:outputPanel>
                        </apex:pageBlockSection>
                    </apex:pageBlock>

                    <apex:pageBlock title="{!educationWrapper.mechanicTypeName}" rendered="{!educationWrapper.cpisSize > 0}">
                        <apex:pageBlockSection columns="1">
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="{!$ObjectType.EUR_CRM_Contract_Activity_Item__c.fields.EUR_CRM_Total_Value__c.label}"/>
                                <apex:outputText value="{!currencyCode} {0, number, ###,###,###,###,##0.00}">
                                    <apex:param value="{!educationWrapper.cai.EUR_CRM_Total_Value__c}"/>
                                </apex:outputText>
                            </apex:pageBlockSectionItem>
                            <br/>
                            <apex:outputPanel layout="block">
                                <table id="{!CPI_TABLE_PREFIX}{!educationWrapper.mtId}">
                                    <apex:repeat value="{!educationWrapper.cpis}" var="cpi">
                                            <tr>
                                                <td><apex:outputText value="{!IF(cpi.EUR_CRM_Brand__r.Name != null, cpi.EUR_CRM_Brand__r.Name, cpi.EUR_CRM_Brand_Quality_Name__c)}"/></td>
                                                <td><apex:outputField value="{!cpi.EUR_CRM_Contract_Mechanic__r.EUR_CRM_Mechanic_Name__c}"/></td>
                                                <td><apex:outputField value="{!cpi.EUR_CRM_Mechanic_Value__c}"/></td>
                                            </tr>
                                    </apex:repeat>
                                </table>
                            </apex:outputPanel>
                        </apex:pageBlockSection>
                    </apex:pageBlock>

                    <apex:pageBlock title="{!posWrapper.mechanicTypeName}" rendered="{!posWrapper.cpisSize > 0}">
                        <apex:pageBlockSection columns="1">
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="{!$ObjectType.EUR_CRM_Contract_Activity_Item__c.fields.EUR_CRM_Total_Value__c.label}"/>
                                <apex:outputText value="{!currencyCode} {0, number, ###,###,###,###,##0.00}">
                                    <apex:param value="{!posWrapper.cai.EUR_CRM_Total_Value__c}"/>
                                </apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:outputPanel layout="block">
                                <table id="{!CPI_TABLE_PREFIX}{!posWrapper.mtId}">
                                    <apex:repeat value="{!posWrapper.cpis}" var="cpi">
                                            <tr>
                                                <td><apex:outputText value="{!IF(cpi.EUR_CRM_Brand__r.Name != null, cpi.EUR_CRM_Brand__r.Name, cpi.EUR_CRM_Brand_Quality_Name__c)}"/></td>
                                                <td><apex:outputField value="{!cpi.EUR_CRM_Value__c}"/></td>
                                                <td><apex:outputField value="{!cpi.EUR_CRM_POS_type__c}"/></td>
                                            </tr>
                                    </apex:repeat>
                                </table>
                            </apex:outputPanel>
                        </apex:pageBlockSection>
                    </apex:pageBlock>

                    <apex:pageBlock title="{!freeStockWrapper.mechanicTypeName}" rendered="{!freeStockWrapper.cpisSize > 0}">
                        <apex:pageBlockSection columns="1">
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="{!$ObjectType.EUR_CRM_Contract_Activity_Item__c.fields.EUR_CRM_Total_Value__c.label}"/>
                                <apex:outputText value="{!currencyCode} {0, number, ###,###,###,###,##0.00}">
                                    <apex:param value="{!freeStockWrapper.cai.EUR_CRM_Total_Value__c}"/>
                                </apex:outputText>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="{!$ObjectType.EUR_CRM_Contract_Activity_Item__c.fields.EUR_CRM_Total_Free_Bottles__c.label}"/>
                                <apex:outputText value="{!freeStockWrapper.cai.EUR_CRM_Total_Free_Bottles__c}"/>
                            </apex:pageBlockSectionItem>
                            <br/>
                            <apex:outputPanel layout="block">
                                <table id="{!CPI_TABLE_PREFIX}{!freeStockWrapper.mtId}">
                                    <apex:repeat value="{!freeStockWrapper.cpis}" var="cpi">
                                            <tr>
                                                <td><apex:outputField value="{!cpi.EUR_CRM_Brand_Quality_Name__c}"/></td>
                                                <td><apex:outputField value="{!cpi.EUR_CRM_Activation__c}"/></td>
                                                <td><apex:outputField value="{!cpi.EUR_CRM_No_of_Bottles__c}"/></td>
                                                <td><apex:outputField value="{!cpi.EUR_CRM_Total_Free_Stock__c}"/></td>
                                            </tr>
                                    </apex:repeat>
                                </table>
                            </apex:outputPanel>
                        </apex:pageBlockSection>
                    </apex:pageBlock>
                    <apex:pageBlock rendered="{!commercialSupportWrapper.cpisSize > 0}" title="{!commercialSupportWrapper.mechanicTypeName}"
                                    id="panel_Total_commSupport">
                        <apex:pageBlockSection columns="1">
                            <br/>
                            <apex:outputPanel layout="block">
                                <table id="{!CPI_TABLE_PREFIX}{!commercialSupportWrapper.mtId}">
                                    <apex:repeat value="{!commercialSupportWrapper.cpis}" var="cpi">
                                        <tr>
                                            <td><apex:outputField value="{!cpi.EUR_CRM_Brand_Quality_Name__c}"/></td>
                                            <td><apex:outputField value="{!cpi.EUR_CRM_Type_of_Support__c}"/></td>
                                            <td><apex:outputField value="{!cpi.EUR_CRM_Value__c}"/></td>
                                            <td><apex:outputField value="{!cpi.EUR_CRM_ZA_Payment_Terms__c}"/></td>
                                        </tr>
                                    </apex:repeat>
                                </table>
                            </apex:outputPanel>
                        </apex:pageBlockSection></apex:pageBlock>
                    <apex:outputPanel id="otherSupport" layout="block">
                        <apex:pageBlock title="{!otherSupportWrapper.mechanicTypeName}"
                                        rendered="{!(otherSupportWrapper.cai.EUR_CRM_Amount__c != null)}">
                            <apex:pageBlockSection columns="1">
                                <br/>
                                <apex:outputPanel layout="block">
                                    <table id="{!CPI_TABLE_PREFIX}{!otherSupportWrapper.mtId}">
                                        <apex:repeat value="{!otherSupportWrapper.otherCais}" var="cai">
                                            <tr>
                                                <td><apex:outputField value="{!cai.EUR_CRM_Description__c}"/></td>
                                                <td><apex:outputField value="{!cai.EUR_CRM_Total_Value_Support_GB__c}"/></td>
                                            </tr>
                                        </apex:repeat>
                                    </table>
                                </apex:outputPanel>
                            </apex:pageBlockSection>
                        </apex:pageBlock>
                    </apex:outputPanel>
                </apex:outputPanel>
            </apex:pageBlockSection>
        </apex:pageBlock>
    </apex:form>
</apex:page>