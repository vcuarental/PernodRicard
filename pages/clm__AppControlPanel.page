<!-- CTM-Settings - v0.0.1 - 2020-07-29 -->
<apex:page id="settingsPage" controller="clm.SettingsController" showHeader="false" 
           sidebar="false" title="{!$Label.clm__ms_settingstitle}" standardStylesheets="false" 
           docType="html-5.0" applyBodyTag="false" applyHtmlTag="false">

    <apex:variable id="mas" value="{!MasController}" var="mas" />
    <apex:variable id="tlo" value="{!TloController}" var="tlo" />
    <apex:variable id="ucc" value="{!UccController}" var="ucc" />


<html>
<head>
    <base href="{!URLFOR($Resource.Settings)}/"/>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1' />
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />

    <title> CT Mobile </title>

    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <link href='https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic' rel='stylesheet' type='text/css' />
    <!-- needs images, font... therefore can not be part of ui.css -->
    <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css" />
    <link rel="stylesheet" href="bower_components/weather-icons/css/weather-icons.min.css" />
    <link rel="stylesheet" href="bower_components/angular-bootstrap-colorpicker/css/colorpicker.css" />
    <link rel="stylesheet" href="bower_components/streamline-30px/styles.css" />
    <!-- end needs images -->

    <!-- libs -->
    <script src="bower_components/x2js/xml2json.min.js" ></script>
    <!-- end libs -->

    <link rel="stylesheet" href="styles/ui.css"/>
    <link rel="stylesheet" href="styles/main.css" />
</head>

<body ng-cloak="true" data-ng-app="app" id="app" data-custom-background="" data-off-canvas-nav="">
    <!--[if lt IE 9]>
        <p class="browsehappy">
            You are using an <strong> outdated </strong> browser.
            Please <a href="http://browsehappy.com/"> upgrade your browser </a>
            to improve your experience.
        </p>
    <![endif]-->

    <img ng-hide="contentLoaded" class="centered" src="images/cube.gif" width="100" height="64" alt="Loading..."/>

    <div ng-show="contentLoaded" data-ng-controller="AppCtrl">
        <nav class="navbar navbar-default" role="navigation">
            <div class="navbar-header">
                <a class="navbar-brand" onclick="window.onbeforeunload = null;checkChanges('home')" href="{!baseUrl}/home/home.jsp" >CT Mobile</a>
            </div>
            <ul class="nav navbar-nav" id="navi">
                <li class="active"><a id="GeneralHeaderTab" href="#General" onmousedown="checkChanges(this)"  data-toggle="tab">{!$Label.Settings_GeneralTabName}</a></li>
                <li><a id="OfflineHeaderTab" href="#OfflineObjects" data-toggle="tab" onmousedown="checkChanges(this)" >{!$Label.Settings_OfflineTabName}</a></li>
                <li><a id="AppMenuli" href="#AppMenu"  data-toggle="tab" onmousedown="checkChanges(this)" >{!$Label.Settings_AppMenuTabName}</a></li>
                <li><a id="CalendarHeaderTab" href="#Calendar" data-toggle="tab" onmousedown="checkChanges(this)" >{!$Label.Settings_CalendarTabName}</a></li>
                <li><a href="#MiniLayouts" data-toggle="tab" onmousedown="checkChanges(this)">{!$Label.Settings_MiniLayoutsTabName}</a></li>
                <li><a href="#Customizations" data-toggle="tab" onmousedown="checkChanges(this)">{!$Label.Settings_RecordColorsTabName}</a></li>
                <li><a href="#CustomDetails" data-toggle="tab" onmousedown="checkChanges(this)">{!$Label.Settings_CustomDetailsTabName}</a></li>
                 <li><a href="#Workflows" data-toggle="tab" onmousedown="">{!$Label.Settings_CustomWorkflowTabName}</a></li>
                <li><a id="CredentialsTab" href="#Credentials" data-toggle="tab" onmousedown="checkChanges(this)">{!$Label.Settings_CredentialsTabName}</a></li>
                <li><a id="RDSettingsTab" href="#RDSettings" data-toggle="tab" onmousedown="checkChanges(this)" >{!$Label.Setting_RDSettingsTabName}</a></li>
                <li id="downloadli"><a id="downloadTab" href="#Download" data-toggle="tab" onmousedown="checkChanges(this)"><span class="wi-cloud-down"></span></a></li>
            </ul>
            <a onclick="window.onbeforeunload = null;checkChanges('home')" href="/home/home.jsp" class="btn btn-primary navbar-btn navbar-right">{!$Label.WW_Back}</a>
            <!--onclick="document.location.href = 'https://' + location.hostname; return false;"-->
            <apex:form >
                <apex:commandButton styleClass="btn btn-default navbar-btn navbar-right" action="{!createDemoApp}" value="{!$Label.clm__ms_demoappcreate}" onclick="window.onbeforeunload = null; checkChanges('home')" rendered="{!NOT(isDemoExist)}" rerender="none" oncomplete="window.location.reload()" />
            </apex:form>
            <script type="text/javascript">
            var previousSelect = false;
            var checkChanges = function(el){

                console.log('in checkChanges, el: ');
                console.log(el);

                var elId;
                if (el){
                    elId = el.id;
                }

                var generalTab = $('#GeneralHeaderTab').parent().hasClass('active')
                var offlineTab = $('#OfflineHeaderTab').parent().hasClass('active')
                var appmenuTab = $('#AppMenuli').parent().hasClass('active')
                var calendarTab = $('#CalendarHeaderTab').parent().hasClass('active')
                var credentialsTab = $('#CredentialsTab').parent().hasClass('active')
                var rdSettingsTab = $('#RDSettingsTab').parent().hasClass('active')

                if (generalTab) {
                    console.log('call from generalTab')
                    angular.element(document.getElementById('ProfilePickListSelector')).scope().otherTabClicked(true);
                } else if (offlineTab){
                    console.log('call from offlineTab')
                    angular.element(document.getElementById('offlineObjectsProfileSelList')).scope().profileChanged(); 
                }else if (appmenuTab){
                    console.log('call from appmenuTab')
                    angular.element(document.getElementById('profileSelectorAppmenu')).scope().profileChanged();
                }else if (calendarTab){
                    console.log('call from calendarTab')
                    angular.element(document.getElementById('profileChanedSelect')).scope().profileChanged();
                }else if (credentialsTab){
                    console.log('call from CredentialsTab')
                    angular.element(document.getElementById('Credentials')).scope().checkCreds()
                } else if (rdSettingsTab){
                    console.log('call from rdSettingsTab')
                    // angular.element(document.getElementById('RDSettings')).scope().profileChanged();
                }

                if (elId != undefined && elId != null && elId != ''){
                    if (generalTab == elId) {
                    console.log('call turnOnSaving from generalTab')
                        angular.element(document.getElementById('ProfilePickListSelector')).scope().turnOnSaving()
                    } else if (offlineTab == elId){
                        angular.element(document.getElementById('prof-selectlist-etc')).scope().turnOnSaving() 
                        console.log('call turnOnSaving from offlineTab') 
                    }else if (appmenuTab == elId){
                        console.log('call turnOnSaving  from Appmenu')
                        angular.element(document.getElementById('profileSelectorAppmenu')).scope().turnOnSaving() 
                    }else if (calendarTab == elId){
                        console.log('call from profileChaneddiv')
                        angular.element(document.getElementById('profileChaneddiv')).scope().turnOnSaving() 
                    }else if (rdSettingsTab == elId){
                        console.log('call from rdSettingsTab')
                        //angular.element(document.getElementById('profileChaneddiv')).scope().turnOnSaving() 
                    }
                }

                if (el == 'home'){
                   // window.location.href = '/home/home.jsp';
                } else {
                    $(el).click()  
                }
                

            }
            
            </script> 
        </nav>


        <div class="container-fluid tab-content">
            <div class="alert alert-danger hidden" ng-show="ajaxError">This is just for demo. In real project, you will submit form with AJAX :)</div>

            <!-- General Tab -->
            <div class="tab-pane active" id="General" ng-controller="GeneralCtrl">
                <apex:form styleClass="form-horizontal form-validation">
                    <!-- Information -->
                    <div class="callout callout-info ctm-pos-rel">
                        <!-- Open info slider icon -->
                        <span class="glyphicon glyphicon-question-sign ctm-pos-abs forms-info-icon"
                              ng-click="openInfoSliderModal()"></span>
                        <!-- Header and body of the form info -->
                        <h4 class="ctm-info"  ondblclick="$('.hiddenLayer').show();">{!$Label.Settings_GeneralFullname}</h4>
                        <p>{!$Label.Settings_GeneralHelp}</p>
                    </div>
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <label class="control-label col-lg-1 col-md-1 col-sm-1" style="text-align: left"
                                   for="">
                                <!--tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__IsPersonAccountsEnabled__c.InlineHelpText}"-->
                                <!--tooltip-placement="right"-->
                                {!$Objecttype.clm__ApplicationSetup__c.fields.SetupOwnerId.label}
                            </label>
                            <div id="ProfilePickListSelector" ng-controller="ProfilePickListControllerGeneral">
                                <span class="ui-select md">
                                    <select ng-options="option.label group by option.is_configured for option in profile.options | orderBy: 'label'"
                                            ng-change="profileChange()"
                                            ng-model="profile.selected"
                                            ng-init="profileChange()">
                                    </select>
                                </span>
                                <button class="btn btn-link btn-lg" type="button" ng-really-message="{!$Label.MS_DeleteSettingWarning}" ng-really-click="deleteSetting(general.Id)"
                                    ng-show="isUndeletable()">
                                    <span class="glyphicon glyphicon-trash" ></span>
                                </button>
                                <style type="text/css">  

                                </style>
                                <button class="btn btn-link btn-lg" type="button" ng-click="launch_target_profile_selector()"
                                        title="{!$Label.MS_TOP_CopySetting}"
                                        ng-show="isConfigured()">
                                    <span class="glyphicon glyphicon-share" ></span> 
                                </button>

                                <span class="ct-spinner" ng-show="isSaving">
                                    <img src="images/cube.gif" width="50" height="32" alt="Loading..."/>
                                </span>
                            </div>
                            <!--ng-click="deleteSetting()"-->
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12">
                            <div class="page-header">
                                <h4>{!$Label.MS_Global}</h4>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                       tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__IsPersonAccountsEnabled__c.InlineHelpText}"
                                       tooltip-placement="right" for="">
                                    {!$Objecttype.clm__ApplicationSetup__c.fields.clm__IsPersonAccountsEnabled__c.label}
                                </label>
                                <div class="col-lg-7 col-md-7 col-sm-12">
                                    <label class="switch switch-success"><input ng-model="general.clm__IsPersonAccountsEnabled__c" type="checkbox" /><i></i></label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                       tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__IsPasscodeEnabled__c.InlineHelpText}"
                                       tooltip-placement="right" for="">
                                    {!$Objecttype.clm__ApplicationSetup__c.fields.clm__IsPasscodeEnabled__c.label}
                                </label>
                                <div class="col-lg-7 col-md-7 col-sm-12">
                                    <label class="switch switch-success"><input ng-model="general.clm__IsPasscodeEnabled__c" type="checkbox" /><i></i></label>
                                </div>
                            </div>



                          <div class="form-group" id="imgQualitySlider">
                            <label class="control-label col-lg-4 col-md-4 col-sm-4"
                                   tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__ImageQuality__c.InlineHelpText}"
                                   tooltip-placement="right" for="">
                              {!$Objecttype.clm__ApplicationSetup__c.fields.clm__ImageQuality__c.label}
                            </label>
                            <div class="col-lg-8 col-md-8 col-sm-8">
                              <input id="defaultImageQuality" class="slider-smd myEventDurationSlider" type="text" ui-range-slider="true"
                                     data-slider-min="0" data-slider-max="100" data-slider-step="1"
                                     data-slider-orientation="horizontal"
                                     data-slider-selection="before" data-slider-tooltip="show"
                                     data-slider-handle="round" />
                            </div>
                          </div>

                            <div class="page-header">
                                <h4>{!$Label.MS_UserInterface}</h4>
                            </div>
                            <div class="form-group">
                            <label class="control-label col-lg-4 col-md-4 col-sm-4"
                                   tooltip=""
                                   tooltip-placement="right" for="">
                              {!$Label.MS_SetAppView}
                            </label>

                                <div class="col-md-6 col-sm-12" > 
                                    <button class=" btn btn-success btn-lg ctm-next-btn" ng-click="openStyleCustomization()" type="button"  > 
                                        {!$Label.MS_Open}
                                    </button>
                                </div>
                            </div>

                            <!-- когда появится кнопка кастомизации нужно будет закомментить это -->
                            <div class="form-group" style="display: none">
                                <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                       tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__Theme__c.InlineHelpText}"
                                       tooltip-placement="right" for="">
                                    {!$Objecttype.clm__ApplicationSetup__c.fields.clm__Theme__c.label}
                                </label>
                                <div class="col-lg-4 col-md-4 col-sm-12">
                                    <input type="text" id="GeneralColor" colorpicker="hex" ng-model="general.clm__Theme__c" class="color-picker form-control" />
                                </div>
                                <div class="col-lg-3 col-md-3 col-sm-0"></div>
                            </div> 
                            <div class="form-group" style="display: none">
                                <label class="control-label col-lg-4 col-md-5 col-sm-12" for="">{!$Label.HomepageLogo}</label>
                                <div class="col-lg-6 col-md-6 col-sm-12" 
                                         ng-repeat="(key, profile) in $parent.$parent.profiles"
                                         ng-show="profile.value == general.SetupOwnerId">  

                                    <div style="float: left; margin-right: 20px" flow-init="{singleFile:true}"
                                         data-flow-file-added="processFiles( $file, $flow )"
                                         data-flow-files-submitted="$flow.upload();"
                                         data-flow-file-success="$file.msg = $message"
                                         data-flow-name="uploader.flow" 
                                         flow-name="uploader.flow"   
                                         info-tag-one="" 
                                         class="col-lg-6 col-md-6 col-sm-12" 
                                        >
                                        <div class="thumbnail" ng-show="!$flow.files.length" style="width: 100px;">
                                            <img src="{{target}}" /> 
                                        </div>
                                        <div class="thumbnail" ng-show="$flow.files.length" style="width: 100px;">
                                            <img flow-img="$flow.files[0]" />
                                        </div>
                                        <div>
                                            <span class="btn btn-primary" ng-show="general.Id != null" data-flow-btn="true">{!$Label.BaseImage}</span>
                                        </div>
                                    </div>

                                    <div id="hidden" class="hiddenLayer col-md-6 col-sm-12" style=" margin-top: 20px;display: none; "> 
                                        <button id="hiddenButton" class=" btn btn-success btn-lg ctm-next-btn" ng-click="openStyleCustomization()" type="button"  >                   
                                            {!$Label.MS_DeviceCustomizationButton}
                                        </button>
                                    </div>
                                </div>
                            </div>


                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12">
                            <div class="page-header">
                                <h4>{!$Label.MS_Geolocation}</h4>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                       tooltip="{!$Label.MS_GeolocationEnable_Help}" for=""
                                       tooltip-placement="right">
                                    {!$Label.MS_LocTrackingEnabled}
                                </label>
                                <div class="col-lg-7 col-md-7 col-sm-12">
                                    <label class="switch switch-success"><input type="checkbox" ng-model="$root.GeolocationEnabled" /><i></i></label>
                                </div>
                            </div>
                            <div class="fadein fadeout" ng-show="$root.GeolocationEnabled">

                                <div class="form-group">
                                    <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                           for=""
                                           tooltip-placement="right">
                                        {!$Label.MS_BackgroundLocation}
                                    </label>
                                    <div class="col-lg-7 col-md-7 col-sm-12">
                                        <label class="switch switch-success"><input type="checkbox" ng-model="geoTracingEnabled" ng-change="geoTracingChanged()"/><i></i></label>
                                    </div>
                                </div>

                                <div class="form-group fadein fadeout" ng-show="geoTracingEnabled">
                                    <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                           tooltip-placement="right" >
                                        {!$Label.MS_TrackingLabel}
                                    </label>
                                    <div class="col-lg-7 col-md-7 col-sm-12">
                                        <input type="number" class="form-control ctm-input-md" required="" 
                                        ng-min="0" step="10" min="0" ng-max="43200" max="43200" data-ng-model="general.clm__GeoTraceInterval__c" />
                                    </div>
                                </div>
                                        

                                <div class="form-group">
                                    <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                           tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__AccountGeolocationAPIField__c.InlineHelpText}"
                                           tooltip-placement="right" for="">
                                        {!$Objecttype.clm__ApplicationSetup__c.fields.clm__AccountGeolocationAPIField__c.label}
                                    </label>
                                    <div class="col-lg-7 col-md-7 col-sm-12">
                                        <span class="ui-select smd">
                                            <select ng-model="general.clm__AccountGeolocationAPIField__c" ng-options="k as v for (k, v) in account" >
                                                <option value=""></option>
                                            </select>
                                        </span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                           tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__AccountFullAddressAPIField__c.InlineHelpText}"
                                           tooltip-placement="right" for="">
                                        {!$Objecttype.clm__ApplicationSetup__c.fields.clm__AccountFullAddressAPIField__c.label}
                                    </label>
                                    <div class="col-lg-7 col-md-7 col-sm-12">
                                        <span class="ui-select smd">
                                            <select ng-model="general.clm__AccountFullAddressAPIField__c" ng-options="k as v for (k, v) in account" >
                                                <option value=""></option>
                                            </select>
                                        </span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                           tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__GoogleMapsAPIKey__c.InlineHelpText}"
                                           tooltip-placement="right" for="">
                                        {!$Objecttype.clm__ApplicationSetup__c.fields.clm__GoogleMapsAPIKey__c.label}
                                    </label>
                                    <div class="col-lg-7 col-md-7 col-sm-12">
                                        <input type="gooleMapsApiKey" class="form-control ctm-input-md" required="" data-ng-model="general.clm__GoogleMapsAPIKey__c" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                           tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__GoogleMapsJSKey__c.InlineHelpText}"
                                           tooltip-placement="right" for="">
                                        {!$Objecttype.clm__ApplicationSetup__c.fields.clm__GoogleMapsJSKey__c.label}
                                    </label>
                                    <div class="col-lg-7 col-md-7 col-sm-12">
                                        <input type="gooleMapsApiKey" class="form-control ctm-input-md" required="" data-ng-model="general.clm__GoogleMapsJSKey__c" />
                                    </div>
                                </div>                    
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12">
                            <div class="page-header">
                                <h4>{!$Label.MS_SupportAndLogs}</h4>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-lg-4 col-md-5 col-sm-12" tooltip="{!$Label.MS_SyncLogsEnable_Help}"
                                       tooltip-placement="right" for="">
                                    {!$Label.MS_EnableSyncLogs}
                                </label>
                                <div class="col-lg-7 col-md-7 col-sm-12">
                                    <label class="switch switch-success"><input type="checkbox" ng-model="LogsEnabled" /><i></i></label>
                                </div>
                            </div>
                            <div class="form-group fadein fadeout" ng-show="LogsEnabled">
                                <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                       tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__DebugLevel__c.InlineHelpText}"
                                       tooltip-placement="right" for="">
                                    {!$Objecttype.clm__ApplicationSetup__c.fields.clm__DebugLevel__c.label}
                                </label>
                                <div class="col-lg-7 col-md-7 col-sm-12">
                                    <span class="ui-select smd">
                                        <select ng-model="general.clm__DebugLevel__c" ng-options="o as o for o in debugLevel" >
                                            <option value=""></option>
                                        </select>
                                    </span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-lg-4 col-md-5 col-sm-12" for="">
                                    {!$Label.MS_DumpDestination}
                                </label>
                                <div class="col-lg-7 col-md-7 col-sm-12">
                                    <span class="ui-select smd">
                                        <select ng-model="logsDest" >
                                            <option value="Salesforce" >Salesforce.com</option>
                                            <option value="E-mail" >E-mail</option>
                                        </select>
                                    </span>
                                </div>
                            </div>
                            <div class="form-group fadein fadeout" ng-show="logsDest == 'E-mail'">
                                <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                       tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__SupportEmail__c.InlineHelpText}"
                                       tooltip-placement="right" for="">
                                    {!$Objecttype.clm__ApplicationSetup__c.fields.clm__SupportEmail__c.label}
                                </label>
                                <div class="col-lg-7 col-md-7 col-sm-12">
                                    <input type="email" class="form-control ctm-input-md" required="" data-ng-model="general.clm__SupportEmail__c" />
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12">
                            <div class="page-header">
                                <h4>{!$Label.MS_ObjectMappings}</h4>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                       tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__ProductObjectAPIName__c.InlineHelpText}"
                                       tooltip-placement="right" for="">
                                    {!$Objecttype.clm__ApplicationSetup__c.fields.clm__ProductObjectAPIName__c.label}
                                </label>
                                <div class="col-lg-7 col-md-7 col-sm-12">
                                    <span class="ui-select smd">
                                        <select name="object" ng-model="ProductObjectAPIName" ng-options="object.label for object in objects | orderBy: 'label' track by object.value" >
                                            <option value=""></option>
                                        </select>
                                    </span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                       tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__ReferenceObjectAPIName__c.InlineHelpText}"
                                       tooltip-placement="right" for="">
                                    {!$Objecttype.clm__ApplicationSetup__c.fields.clm__ReferenceObjectAPIName__c.label}
                                </label>
                                <div class="col-lg-7 col-md-7 col-sm-12">
                                    <span class="ui-select smd">
                                        <span class="ui-select smd">
                                            <select name="object" ng-model="ReferenceObjectAPIName" ng-options="object.label for object in objects | orderBy: 'label' track by object.value" >
                                                <option value=""></option>
                                            </select>
                                        </span>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ctm-save-panel">
                        <button type="button" class="pull-right btn btn-success btn-lg ctm-next-btn"
                                ng-click="submitData( true, true )">
                            <!--, $('#visibleHourRange'), $('#defaultEventDuration')-->
                            {!$Label.MS_Save}
                        </button>
                    </div>
                    <apex:actionFunction name="createField" action="{!createNewField}" rerender="none">
                        <apex:param assignTo="{!newFieldConnector}" name="newFieldConnector" value="" />
                    </apex:actionFunction>
                </apex:form>
            </div>


            <!-- Offline Objects -->
            <div class="tab-pane" id="OfflineObjects" ng-controller="OfflineObjectsListsController">
            <style type="text/css">
                .rellist{
                    margin-top: 10px;
                    vertical-align: bottom;
                    border-bottom: 2px solid #ddd;
                    border-bottom-width: 2px;
                    border-bottom-style: solid;
                    border-bottom-color: rgb(221, 221, 221);
                }

                .textleftside{
                    text-align: left !important;
                }

                .soql-filter-active {
                    background: url("../images/elipse.png") 60% 15% no-repeat;
                    display: block;
                    width: 52px;
                    height: 45px;
                    position: absolute;
                    top: 0;
                    left: 0;
                }


                .roundedSpan{
                    position: absolute;    
                    margin-left: 60%;
                    margin-top: 10%;
                    top: 0;
                    left: 0;
                    border: 4px solid red;
                    border-radius: 50%;
                }

            </style>

                <apex:form styleClass="form-horizontal form-validation">
                    <!-- Information -->
                    <div class="callout callout-info ctm-pos-rel">
                        <!-- Header and body of the form info -->
                        <h4 class="ctm-info">{!$Label.Settings_OfflineFullName}</h4>
                        <p>{!$Label.Settings_OfflineHelp}</p>
                    </div>
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <label class="control-label col-lg-1 col-md-1 col-sm-1" style="text-align: left"
                                   for="">
                                <!--tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__IsPersonAccountsEnabled__c.InlineHelpText}"-->
                                <!--tooltip-placement="right"-->
                                {!$Objecttype.clm__ApplicationSetup__c.fields.SetupOwnerId.label}
                            </label>
                            <div id="prof-selectlist-etc" ng-controller="OfflineObjectsProfileOptionsController">
                                <span class="ui-select md" >
                                    <select id="offlineObjectsProfileSelList" ng-options="option.label group by option.is_configured for option in profile.options"
                                            ng-change="profileChanged();"
                                            ng-model="profile.selected"
                                            ng-init="updateSelectedIn( true )"
                                            required="">
                                    </select>
                                </span>
                                <button class="btn btn-link btn-lg" 
                                type="button" 
                                ng-really-message="{!$Label.MS_DeleteSettingWarning}" 
                                ng-really-click="deleteSetting()" 
                                ng-hide="isUndeletable()">
                                    <span class="glyphicon glyphicon-trash" ></span>
                                </button>
                                <span class="ct-spinner" ng-show="isSaving">
                                    <img src="images/cube.gif" width="50" height="32" alt="Loading..."/>
                                </span>
                            </div>                
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-6">
                            <div class="page-header">
                                <h4>{!$Label.Settings_OfflineFullName}</h4>
                            </div>

                            <!-- ONE SEARCH STRING -->
                            <div class="col-lg-6 col-md-6 min-width-450">
                                             

                                <div class="row">
                                    <input type="text" placeholder="{!$Label.MS_SearchPlaceHolder}" ng-model="itemSearch" class="form-control" required="" 
                                    style="width: 68.3333%;  margin-bottom: 5px;    margin-left: 15px; " >
                                    </input>

                                    <div class="col-md-2">
                                        <label class="switch switch-success"><input ng-model="advancedSearchEnabled" type="checkbox" /><i></i></label>
                                    </div>

                                    <label class="control-label col-md-5"
                                           tooltip="{!$Label.MS_AdvancedSearch}"
                                           tooltip-placement="right" for=""
                                           style="">
                                        {!$Label.MS_AdvancedSearch}
                                    </label>

                                </div>

                                <div class="col-md-6 remove-col-paddings">
                                    <div class="ui-multiple-select">
                                        <div class="ui-multiple-select-available">
                                            <h5 style="margin-bottom: 0px;">
                                                {!$Label.MS_Available}
                                            </h5>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 remove-col-paddings">
                                    <div class="ui-multiple-select">
                                        <div class="ui-multiple-select-available">
                                            <h5 style="margin-bottom: 0px;">
                                                {!$Label.MS_Selected}
                                            </h5>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-6 remove-col-paddings">
                                    <div class="ui-multiple-select">
                                        <div class="ui-multiple-select-available">
                                            <ul dnd-list="models.lists.sourceItems" tooltip="{!$Label.MS_AvailableOffline_Help}" 
                                            style="width: 87.33333%;  margin-bottom: 5px; " 
                                            dnd-inserted="filterListAfterInsertItem(item, true, index, event)">
                                                <li ng-repeat="item in models.lists.sourceItems | orderBy: 'label' | filter:itemSearch"
                                                    dnd-draggable="item"
                                                    dnd-moved=""
                                                    dnd-effect-allowed="move"
                                                    ng-class="{'highlight': models.selected === item}"
                                                    ng-show="advancedSearchEnabled || describes[item.value].isLayoutable"
                                                    value="{{item.value}}" 
                                                    >
                                                    {{item.label}}
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-6 remove-col-paddings">
                                    <div class="ui-multiple-select list-wrapper">
                                        <div class="ui-multiple-select-selected">
                                            <ul dnd-list="models.lists.targetItems" 
                                            tooltip="{!$Label.MS_SelectedOffline_Help}" 
                                            style="width: 87.3333%;margin-bottom: 5px;"
                                            dnd-inserted="filterListAfterInsertItem(item, false, index, event)">
                                                <li ng-repeat="item in models.lists.targetItems track by $index | filter:itemSearch"
                                                    dnd-draggable="item"
                                                    dnd-moved=""
                                                    dnd-effect-allowed="move"
                                                    dnd-selected="updateSelected( item )"
                                                    ng-class="{'highlight': models.selected === item}"
                                                    value="{{item.value}}">
                                                    {{item.label}}
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                            </div>
                                

             
                        </div>

                        <div class="col-md-6 fadein fadeout offline-obj-options" id="OfflineObjectsRelatedListsId" ng-show="element.isHaveOptions" ng-controller="OfflineObjectsRelatedLists">

                            <div class="page-header">
                                <h4>{!$Label.MS_TOP_Options}</h4>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-3"
                                       tooltip="{!$Objecttype.clm__TopLvlObjects__c.fields.clm__ConflictManagerAttribute__c.InlineHelpText}"
                                       tooltip-placement="right" for="">
                                    {!$Label.MS_EnableConflictManager}
                                </label>
                                <div class="col-lg-4 col-sm-4">
                                    <label class="switch switch-success"><input ng-model="models.options.baseQuery[objKey].clm__isConflictManagerEnabled__c" type="checkbox" /><i></i></label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="control-label col-sm-3"
                                       tooltip="{!$Objecttype.clm__MobileRelatedListFilters__c.fields.clm__IsQuickSyncEnabled__c.InlineHelpText}"
                                       tooltip-placement="right" for="">
                                    {!$Objecttype.clm__MobileRelatedListFilters__c.fields.clm__IsQuickSyncEnabled__c.Label}
                                </label>
                                <span class="col-lg-4 col-sm-4">
                                    <label  class="switch switch-success">
                                        <input ng-model="models.options.baseQuery[objKey].clm__IsQuickSyncEnabled__c" type="checkbox"/>
                                        <i></i>
                                    </label> 

                                </span> 
                            </div>


                            <div class="form-group">
                                <label class="control-label col-sm-3"
                                       tooltip="{!$Objecttype.clm__MobileRelatedListFilters__c.fields.clm__SyncRecovery__c.InlineHelpText}"
                                       tooltip-placement="right" for="">
                                    {!$Objecttype.clm__MobileRelatedListFilters__c.fields.clm__SyncRecovery__c.Label}
                                </label>
                                <span class="col-lg-4 col-sm-4">
                                    <label  class="switch switch-success">
                                        <input ng-model="showSyncRecovery" type="checkbox" ng-change="changedSyncRecovery();"/>
                                        <i></i>
                                    </label> 

                                </span>
                                <span class="col-lg-4 col-sm-2" ng-show="showSyncRecovery">
                                    <div class="row" style="text-align: left;"> 
                                        <span style="margin-right: 5px;">{!$Label.MS_Mode}</span>
                                        <select ng-options="option.value as option.label for option in synchRecoveryList"
                                                ng-model="models.options.baseQuery[objKey].clm__SyncRecovery__c" 
                                                >
                                        </select> 

                                    </div>
                                </span>
                            </div>


                            <!-- clm__SyncRecovery__c 
                            <div class="form-group">
                                <label class="control-label col-sm-3"
                                       tooltip="{!$Objecttype.clm__MobileRelatedListFilters__c.fields.clm__SyncRecovery__c.InlineHelpText}"
                                       tooltip-placement="right" for="">
                                    {!$Objecttype.clm__MobileRelatedListFilters__c.fields.clm__SyncRecovery__c.Label}
                                </label>
                                <div class="col-lg-6 col-sm-6">
                                    <select ng-options="item.value as item.label for item in synchRecoveryList"
                                            ng-model="models.options.baseQuery[objKey].clm__SyncRecovery__c"
                                            ng-change="synchRecoveryChanged();" 
                                            ng-show="models.options.baseQuery[objKey].clm__IsQuickSyncEnabled__c">
                                    </select> 
                                </div>
                            </div>-->



                            <div class="page-header" ng-show="undefined != models.options.baseQuery[objKey]">
                                <h4>{!$Label.MS_BaseQuery}</h4>
                            </div>



                              <!-- НОРМАЛЬНЫЙ ВИД -->    

                              <div class="row">
                                     <div class="col-sm-12 rellist">
                                         <div class="col-xs-6"> </div>
                                         <div class="col-xs-2"> {!$Label.MS_TOP_CreateAllowed} </div>
                                         <div class="col-xs-2"> {!$Label.MS_TOP_DeleteAllowed}</div>
                                         <div class="col-xs-1">{!$Label.MS_TOP_SOQLFilter}</div>
                                     </div>

                                    <div class="table table-offline-objects" ng-show="uddefined != models.options.baseQuery[objKey]"
                                        ng-hide="undefined == models.options.baseQuery[objKey]" >

                                        <div>
                                             <div class="col-sm-12 rellist">
                                                <div class="col-xs-6">
                                                    <label class="control-label col-sm-5 textleftside" for="" >
                                                        {{objectLabel}}
                                                    </label>
                                                </div>

                                                <div class="col-xs-2">  
                                                    <div class="">
                                                        <label class="switch switch-success"><input ng-model="models.options.baseQuery[objKey].clm__isCreateAllowed__c" type="checkbox" /><i></i></label>
                                                    </div>
                                                </div>

                                                <div class="col-xs-2"> 
                                                    <div class="">
                                                        <label class="switch switch-success"><input ng-model="models.options.baseQuery[objKey].clm__isDeleteAllowed__c" type="checkbox" /><i></i></label>
                                                    </div>
                                                </div>

                                                <div class="col-xs-1">
                                                    <div id="baseQueryModal" class="modal fade">
                                                        <div class="modal-dialog">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h3>{!$Label.MS_QueryEditor}</h3>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <div class="form-horizontal">
                                                                        <div class="form-group">
                                                                            <label class="col-sm-5 control-label" for="">{!$Label.MS_TOP_SOQLFilter}</label>
                                                                            <div class="col-sm-8">
                                                                                <input ng-model="models.options.baseQuery[objKey].clm__SOQL__c" type="text" style="width: 100%"/>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button class="btn btn-success" onclick="CTM.checkSoqlFilter();" data-dismiss="modal">{!$Label.MS_Close}</button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <button class="btn btn-link btn-lg soql-filter-button" type="button"
                                                            ng-click="editSoqlQuery( { 'transitObject':models.options.baseQuery[objKey], 'isRelated': false } )">
                                                        <span class="glyphicon glyphicon-cog"></span>
                                                        <div ng-show="undefined != models.options.baseQuery[objKey].clm__SOQL__c">
                                                            <span class="soql-filter-active" ng-show="'' != models.options.baseQuery[objKey].clm__SOQL__c"></span>
                                                        </div>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                            </div>




                            <!--
                            <table class="table table-offline-objects" ng-show="uddefined != models.options.baseQuery[objKey]"
                                ng-hide="undefined == models.options.baseQuery[objKey]">
                                <tr>
                                    <th>
                                    </th>
                                    <th>
                                        {!$Label.MS_TOP_CreateAllowed}
                                    </th>
                                    <th>
                                        {!$Label.MS_TOP_DeleteAllowed}
                                    </th>
                                    <th>
                                        {!$Label.MS_TOP_SOQLFilter}
                                    </th>
                                </tr>
                                <tr>
                                    <td>
                                        <label class="control-label col-sm-3" for="" >
                                            {{objectLabel}}
                                        </label>
                                    </td>
                                    <td>
                                        <div class="col-lg-6 col-sm-6">
                                            <label class="switch switch-success"><input ng-model="models.options.baseQuery[objKey].clm__isCreateAllowed__c" type="checkbox" /><i></i></label>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="col-lg-6 col-sm-6">
                                            <label class="switch switch-success"><input ng-model="models.options.baseQuery[objKey].clm__isDeleteAllowed__c" type="checkbox" /><i></i></label>
                                        </div>
                                    </td>
                                    <td>
                                        <div id="baseQueryModal" class="modal fade">
                                            <div class="modal-dialog">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h3>{!$Label.MS_QueryEditor}</h3>
                                                    </div>
                                                    <div class="modal-body">
                                                        <div class="form-horizontal">
                                                            <div class="form-group">
                                                                <label class="col-sm-3 control-label" for="">{!$Label.MS_TOP_SOQLFilter}</label>
                                                                <div class="col-sm-8">
                                                                    <input ng-model="models.options.baseQuery[objKey].clm__SOQL__c" type="text" style="width: 100%"/>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button class="btn btn-success" onclick="CTM.checkSoqlFilter();" data-dismiss="modal">{!$Label.MS_Close}</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <button class="btn btn-link btn-lg soql-filter-button" type="button"
                                                ng-click="editSoqlQuery( { 'transitObject':models.options.baseQuery[objKey], 'isRelated': false } )">
                                            <span class="glyphicon glyphicon-cog"></span>
                                            <div ng-show="undefined != models.options.baseQuery[objKey].clm__SOQL__c">
                                                <span class="soql-filter-active" ng-show="'' != models.options.baseQuery[objKey].clm__SOQL__c"></span>
                                            </div>
                                        </button>
                                    </td>
                                </tr>
                            </table>
                            -->

                            <!--ct spinner for filter table-->
                            <span class="ct-spinner" ng-show="isLoading">
                                <img src="images/cube.gif" width="100" height="64" alt="Loading..."/>
                            </span>
                            <!--ct spinner for filter table-->

                            <div id="relaitedListsContainer"
                                ng-show="undefined != models.options.relatedLists[objKey][selectedRecordType] && 0 != models.options.relatedLists[objKey][selectedRecordType].length"
                                hg-hide="undefined == models.options.relatedLists[objKey][selectedRecordType] || 0 == models.options.relatedLists[objKey][selectedRecordType].length">

                                <div class="page-header">
                                    <h4 class="pull-left">{!$Label.MS_RelatedLists}</h4>
                                        <span class="ui-select pull-right" ng-show="0 != rtList.length">

                                            <select ng-options="option.value as option.label for option in rtList"
                                                    ng-model="selectedRecordType"
                                                    ng-change="rtChanged();"
                                                    required=""
                                                    ng-show="0 != rtList.length">
                                            </select>
                                        </span>
                                </div>

                                <div class="row">
                                     <div class="col-sm-12 rellist">
                                         <div class="col-xs-6"> </div>
                                         <div class="col-xs-2"> {!$Label.MS_TOP_CreateAllowed} </div>
                                         <div class="col-xs-2"> {!$Label.MS_TOP_DeleteAllowed}</div>
                                         <div class="col-xs-1" style="display:none"> {!$Label.MS_ShowAppLauncher}</div>
                                         <div class="col-xs-1">{!$Label.MS_TOP_SOQLFilter}</div>
                                     </div>


                                     <!-- НОРМАЛЬНЫЙ ВИД -->
                                     <div ng-repeat="filter in models.options.relatedLists[objKey][selectedRecordType]">

                                        <div ng-show="filter.clm__sObjectRelated__c != 'ActivityHistory' && filter.clm__sObjectRelated__c != 'OpenActivity' && filter.clm__sObjectRelated__c != 'Task' && filter.clm__sObjectRelated__c != 'Event'">
                                             <div class="col-sm-12 rellist">
                                                <div class="col-xs-6">
                                                    <label class="control-label col-sm-5 textleftside" for="" >
                                                        {{$parent.labels[filter.clm__sObjectRelated__c]}}
                                                    </label>
                                                </div>
                                                <div class="col-xs-2">  
                                                    <div class="">
                                                        <label class="switch switch-success"><input ng-model="filter.clm__isCreateAllowed__c" type="checkbox" /><i></i></label>
                                                    </div>
                                                </div>
                                                <div class="col-xs-2"> 
                                                    <div class="">
                                                        <label class="switch switch-success"><input ng-model="filter.clm__isDeleteAllowed__c" type="checkbox" /><i></i></label>
                                                    </div>
                                                </div>
                                                <div class="col-xs-1" style="display:none"> 
                                                    <div class="">
                                                        <label class="switch switch-success"><input ng-model="filter.clm__isApplicationLaunchEnabled__c" type="checkbox" /><i></i></label>
                                                    </div>
                                                </div>
                                                <div class="col-xs-1">
                                                    <button class="btn btn-link btn-lg soql-filter-button" type="button"
                                                            ng-click="editSoqlQuery( { 'transitObject': filter, 'isRelated': true } )">
                                                        <span class="glyphicon glyphicon-cog"></span>
                                                        <div ng-show="undefined != filter.clm__SOQL__c || ( undefined != filter.clm__SortTreeByFieldName__c && '' != filter.clm__SortTreeByFieldName__c )">
                                                            <span class="roundedSpan" ng-show="show_active_filter(filter)"> </span>
                                                            <span class="soql-filter-active" ></span>
                                                        </div>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>


                                        <!-- МОДИЦИФИРОВАННЫЙ ВИД -->
                                        <div ng-show="filter.clm__sObjectRelated__c == 'ActivityHistory' || filter.clm__sObjectRelated__c == 'OpenActivity'">
                                             <div class="col-sm-12 rellist">
                                                <div class="col-xs-6">
                                                    <label class="control-label col-sm-5 textleftside" for="" >
                                                        {{$parent.labels[filter.clm__sObjectRelated__c]}}
                                                    </label>
                                                </div>
                                                <div class="col-xs-2"></div>
                                                <div class="col-xs-2"></div>
                                                <div class="col-xs-1" style="display:none"> </div>
                                                <div class="col-xs-1">
                                                    <button class="btn btn-link btn-lg soql-filter-button" type="button"
                                                            ng-click="editSoqlQuery( { 'transitObject': filter, 'isRelated': true, 'hideQueryEditor': true } )">
                                                        <span class="glyphicon glyphicon-cog"></span>
                                                        <div ng-show="undefined != filter.clm__SOQL__c || ( undefined != filter.clm__SortTreeByFieldName__c && '' != filter.clm__SortTreeByFieldName__c )">
                                                            <span class="roundedSpan" ng-show="show_active_filter_openAct_actHistory(filter)"> </span>
                                                            <span class="soql-filter-active" ></span>
                                                        </div>
                                                    </button>
                                                </div>
                                            </div>

                                            <!-- E V E N T -->
                                             <div class="col-sm-12 rellist">
                                                <div class="col-xs-1">  </div>
                                                <div class="col-xs-5">
                                                    <label class="control-label col-sm-5 textleftside" for="" >
                                                        {{$parent.labels[eventObj]}}
                                                    </label>
                                                </div>
                                                <div class="col-xs-2">  
                                                    <div class="">
                                                        <label class="switch switch-success"><input ng-model="models.options.relatedLists[objKey][selectedRecordType][eventObj].clm__isCreateAllowed__c" type="checkbox" /><i></i></label>
                                                    </div>
                                                </div>
                                                <div class="col-xs-2"> 
                                                    <div class="">
                                                        <label class="switch switch-success"><input ng-model="models.options.relatedLists[objKey][selectedRecordType][eventObj].clm__isDeleteAllowed__c" type="checkbox" /><i></i></label>
                                                    </div>
                                                </div>
                                                <div class="col-xs-1" style="display:none"> </div>
                                                <div class="col-xs-1">
                                                    <button class="btn btn-link btn-lg soql-filter-button" type="button"
                                                            ng-click="editSoqlQuery( { 'transitObject': models.options.relatedLists[objKey][selectedRecordType][eventObj], 'isRelated': false    } )">
                                                        <span class="glyphicon glyphicon-cog"></span>
                                                        <div ng-show="undefined != models.options.relatedLists[objKey][selectedRecordType][eventObj].clm__SOQL__c || ( undefined != models.options.relatedLists[objKey][selectedRecordType][eventObj].clm__SortTreeByFieldName__c && '' != models.options.relatedLists[objKey][selectedRecordType][eventObj].clm__SortTreeByFieldName__c )">
                                                            <span class="roundedSpan" ng-show="'' != models.options.relatedLists[objKey][selectedRecordType][eventObj].clm__SOQL__c || ( undefined != models.options.relatedLists[objKey][selectedRecordType][eventObj].clm__SortTreeByFieldName__c && '' != models.options.relatedLists[objKey][selectedRecordType][eventObj].clm__SortTreeByFieldName__c )"> </span>
                                                            <span class="soql-filter-active" ng-show="'' != models.options.relatedLists[objKey][selectedRecordType][eventObj].clm__SortTreeByFieldName__c.clm__SOQL__c || ( undefined != models.options.relatedLists[objKey][selectedRecordType][eventObj].clm__SortTreeByFieldName__c && '' != models.options.relatedLists[objKey][selectedRecordType][eventObj].clm__SortTreeByFieldName__c )"></span>
                                                        </div>
                                                    </button>
                                                </div>
                                            </div>

                                            <!-- T A S K -->
                                            <div class="col-sm-12 rellist">
                                                <div class="col-xs-1">  </div>
                                                <div class="col-xs-5">
                                                    <label class="control-label col-sm-5 textleftside" for="" >
                                                        {{$parent.labels[taskObj]}}
                                                    </label>
                                                </div>
                                                <div class="col-xs-2">  
                                                    <div class="">
                                                        <label class="switch switch-success"><input ng-model="models.options.relatedLists[objKey][selectedRecordType][taskObj].clm__isCreateAllowed__c" type="checkbox" /><i></i></label>
                                                    </div>
                                                </div>
                                                <div class="col-xs-2"> 
                                                    <div class="">
                                                        <label class="switch switch-success"><input ng-model="models.options.relatedLists[objKey][selectedRecordType][taskObj].clm__isDeleteAllowed__c" type="checkbox" /><i></i></label>
                                                    </div>
                                                </div>
                                                <div class="col-xs-1" style="display:none"> </div>
                                                <div class="col-xs-1">
                                                    <button class="btn btn-link btn-lg soql-filter-button" type="button"
                                                            ng-click="editSoqlQuery( { 'transitObject': models.options.relatedLists[objKey][selectedRecordType][taskObj], 'isRelated': false  } )">
                                                        <span class="glyphicon glyphicon-cog"></span>
                                                        <div ng-show="undefined != models.options.relatedLists[objKey][selectedRecordType][taskObj].clm__SOQL__c || ( undefined != models.options.relatedLists[objKey][selectedRecordType][taskObj].clm__SortTreeByFieldName__c && '' != models.options.relatedLists[objKey][selectedRecordType][taskObj].clm__SortTreeByFieldName__c )">
                                                            <span class="roundedSpan" ng-show="'' != models.options.relatedLists[objKey][selectedRecordType][taskObj].clm__SOQL__c || ( undefined != models.options.relatedLists[objKey][selectedRecordType][taskObj].clm__SortTreeByFieldName__c && '' != models.options.relatedLists[objKey][selectedRecordType][taskObj].clm__SortTreeByFieldName__c )"> </span>
                                                            <span class="soql-filter-active" ng-show="'' != models.options.relatedLists[objKey][selectedRecordType][taskObj].clm__SOQL__c || ( undefined != models.options.relatedLists[objKey][selectedRecordType][taskObj].clm__SortTreeByFieldName__c && '' != models.options.relatedLists[objKey][selectedRecordType][taskObj].clm__SortTreeByFieldName__c )"></span>
                                                        </div>
                                                    </button>
                                                </div>
                                            </div> 

                                        </div>



                                     </div>
                                </div>
            <!-- 
                                <br></br>
                                <br></br>
                                <br></br>
                                <br></br>
                                <br></br>
                                <br></br>
                                <br></br>
                                <br></br>
                                <br></br>

                                <table class="table table-offline-objects" >
                                    <tr>
                                        <th>
                                        </th>
                                        <th>
                                            {!$Label.MS_TOP_CreateAllowed}
                                        </th>
                                        <th>
                                            {!$Label.MS_TOP_DeleteAllowed}
                                        </th>
                                        <th style="display:none">
                                            {!$Label.MS_ShowAppLauncher}
                                        </th>
                                        <th>
                                            {!$Label.MS_TOP_SOQLFilter}
                                        </th>
                                    </tr>
                                    <tr ng-repeat="filter in models.options.relatedLists[objKey][selectedRecordType]">
                                        <td>
                                            <label class="control-label col-sm-3" for="" >
                                                {{$parent.labels[filter.clm__sObjectRelated__c]}}
                                            </label>
                                        </td>
                                        <td>
                                            <div class="col-lg-6 col-sm-6">
                                                <label class="switch switch-success"><input ng-model="filter.clm__isCreateAllowed__c" type="checkbox" /><i></i></label>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="col-lg-6 col-sm-6">
                                                <label class="switch switch-success"><input ng-model="filter.clm__isDeleteAllowed__c" type="checkbox" /><i></i></label>
                                            </div>
                                        </td>
                                        <td style="display:none">
                                            <div class="col-lg-6 col-sm-6">
                                                <label class="switch switch-success"><input ng-model="filter.clm__isApplicationLaunchEnabled__c" type="checkbox" /><i></i></label>
                                            </div>
                                        </td>
                                        <td>
                                            <button class="btn btn-link btn-lg soql-filter-button" type="button"
                                                    ng-click="editSoqlQuery( { 'transitObject': filter, 'isRelated': true } )">
                                                <span class="glyphicon glyphicon-cog"></span>
                                                <div ng-show="undefined != filter.clm__SOQL__c || ( undefined != filter.clm__SortTreeByFieldName__c && '' != filter.clm__SortTreeByFieldName__c )">
                                                    <span class="soql-filter-active" ng-show="'' != filter.clm__SOQL__c || ( undefined != filter.clm__SortTreeByFieldName__c && '' != filter.clm__SortTreeByFieldName__c )"></span>
                                                </div>
                                            </button>
                                        </td>
                                    </tr>
                                </table> -->

                            </div>

                        </div>
                    </div>
                    <div class="ctm-save-panel">
                        <button type="button" class="pull-right btn btn-success btn-lg ctm-next-btn"
                                ng-click="submitData(true, true, false);"
                                ng-disabled="offlineObjectsForm.$invalid">
                            {!$Label.MS_Save}
                        </button>
                    </div>

                </apex:form>
            </div>


            <!-- App Menu -->
            <div class="tab-pane" id="AppMenu" ng-controller="AppmenuItemsListsController">

                <form name="appMenuForm" class="form-horizontal form-validation" novalidate="">
                    <fieldset>
                        <div class="callout callout-info">
                            <h4 class="ctm-info">{!$Label.Settings_AppMenuFullName}</h4>
                            <p>{!$Label.Settings_AppMenuHelp}</p>
                        </div>
                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12">
                                <label class="control-label col-lg-1 col-md-1 col-sm-1" style="text-align: left"
                                       for="">
                                    <!--tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__IsPersonAccountsEnabled__c.InlineHelpText}"-->
                                    <!--tooltip-placement="right"-->
                                    {!$Objecttype.clm__ApplicationSetup__c.fields.SetupOwnerId.label}
                                </label>
                                <div id="profileSelectorAppmenu" ng-controller="AppmenuProfileOptionsController">
                                    <span id="AppmenuProfile" class="ui-select md">
                                        <select ng-options="option.label group by option.is_configured for option in profile.options | orderBy: 'label'"
                                                ng-change="profileChanged()"
                                                ng-model="profile.selected"
                                                ng-init="updateSelected( true )"
                                                required="">
                                        </select>
                                    </span>
                                     <button class="btn btn-link btn-lg" type="button" ng-really-message="{!$Label.MS_DeleteSettingWarning}" ng-really-click="deleteSetting()"
                                            ng-hide="isUndeletable()">
                                        <span class="glyphicon glyphicon-trash" ></span>
                                    </button>
                                    <span class="ct-spinner" ng-show="isSaving">
                                        <img src="images/cube.gif" width="50" height="32" alt="Loading..."/>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="row">

                            <div class="col-lg-6 col-md-6">
                                <div class="page-header">
                                    <h4>{!$Label.Settings_AppMenuFullName}</h4>
                                </div>


                            <!-- ONE SEARCH STRING -->
                            <div class="col-lg-6 col-md-6 min-width-450">

                                <div>
                                  <input type="text" placeholder="{!$Label.MS_SearchPlaceHolder}" ng-model="itemSearch" class="form-control" required="" 
                                  style="width: 68.3333%;  margin-bottom: 5px; " >
                                  </input>
                                </div>

                                <div class="col-md-6 remove-col-paddings">
                                    <div class="ui-multiple-select">
                                        <div class="ui-multiple-select-available">
                                            <h5 style="margin-bottom: 0px;">
                                                {!$Label.MS_Available}
                                            </h5>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6 remove-col-paddings">
                                    <div class="ui-multiple-select">
                                        <div class="ui-multiple-select-available">
                                            <h5 style="margin-bottom: 0px;">
                                                {!$Label.MS_Selected}
                                            </h5>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-6 remove-col-paddings">
                                    <div class="ui-multiple-select">
                                        <div class="ui-multiple-select-available">
                                            <ul dnd-list="models.lists.sourceItems" tooltip="{!$Label.MS_AvailableMenu_Help}" 
                                            style="width: 87.33333%;  margin-bottom: 5px; " 
                                            dnd-inserted="filterListAfterInsertItem(item, true, index, event)">
                                                <li ng-repeat="item in models.lists.sourceItems | filter:itemSearch"
                                                    dnd-draggable="item"
                                                    dnd-moved=""
                                                    dnd-effect-allowed="move"
                                                    ng-class="{'highlight': models.selected === item}"
                                                    value="{{item.value}}">
                                                    {{item.label}}
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-6 remove-col-paddings">
                                    <div class="ui-multiple-select list-wrapper">
                                        <div class="ui-multiple-select-selected">
                                            <ul dnd-list="models.lists.targetItems" 
                                            tooltip="{!$Label.MS_SelectedMenu_Help}" 
                                            style="width: 87.3333%;margin-bottom: 5px;"
                                            dnd-inserted="filterListAfterInsertItem(item, false, index, event)">
                                                <li ng-repeat="item in models.lists.targetItems | filter:itemSearch"
                                                    dnd-draggable="item"
                                                    dnd-moved=""
                                                    dnd-effect-allowed="move"
                                                    dnd-selected="updateSelected( item )"
                                                    ng-class="{'highlight': models.selected === item}"
                                                    value="{{item.value}}">
                                                    {{item.label}}
                                                </li>
                                            </ul>
                                            <div id="appmenu-add-item-btn">
                                                <button class="btn btn-success btn-xs" ng-click="launchModal()">
                                                    +
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                                



                                <!-- old without search
                                <div class="col-lg-6 col-md-6 min-width-450">
                                    <div class="col-lg-6 col-md-6 remove-col-paddings">
                                        <div class="ui-multiple-select">
                                            <div class="ui-multiple-select-available">
                                                <h5>
                                                    {!$Label.MS_Available}
                                                </h5>
                                                <ul dnd-list="models.lists.sourceItems" tooltip="{!$Label.MS_AvailableMenu_Help}">
                                                    <li ng-repeat="item in models.lists.sourceItems"
                                                        dnd-draggable="item"
                                                        dnd-moved="models.lists.sourceItems.splice($index, 1)"
                                                        dnd-effect-allowed="move"
                                                        ng-class="{'highlight': models.selected === item}"
                                                        value="{{item.value}}">
                                                        {{item.label}}
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-6 remove-col-paddings">
                                        <div class="ui-multiple-select list-wrapper">
                                            <div class="ui-multiple-select-selected">
                                                <h5>
                                                    {!$Label.MS_Selected}
                                                </h5>
                                                <ul dnd-list="models.lists.targetItems" tooltip="{!$Label.MS_SelectedMenu_Help}">
                                                    <li ng-repeat="item in models.lists.targetItems"
                                                        dnd-draggable="item"
                                                        dnd-moved="models.lists.targetItems.splice($index, 1)"
                                                        dnd-effect-allowed="move"
                                                        dnd-selected="updateSelected( item )"
                                                        ng-class="{'highlight': models.selected === item}"
                                                        value="{{item.value}}">
                                                        {{item.label}}
                                                    </li>
                                                </ul>
                                                <div id="appmenu-add-item-btn">
                                                    <button class="btn btn-success btn-xs" ng-click="launchModal()">
                                                        +
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>-->
                            </div>
                            <div class="col-lg-6 col-md-6 fadein fadeout" ng-show="element.shouldShow">
                                <div class="page-header">
                                    <h4>{!$Label.MS_TOP_Options}</h4>
                                </div>
                                <div class="form-group">
                                    <label tooltip="{!$Label.MS_GroppingField_Help}" class="col-sm-3 control-label" for="">
                                        {!$Label.MS_GroupRecords}
                                    </label>
                                    <div class="col-lg-6 col-sm-6">
                                        <span class="ui-select md" style="float: left; margin-right: 5px;">
                                            <select style="width: auto;" ng-options="key as value for (key , value) in models.selected.properties.groupRecordsBy"
                                                    ng-model="models.selected.selectedProperty.groupRecordsBy"
                                                    ng-change="updateGroupField(models.selected.selectedProperty.groupRecordsBy)">
                                            </select>
                                        </span>
                                        <span class="ui-select" style="float: left">
                                            <select style="min-width: 70px;" ng-options="o as o for o in models.selected.properties.sortOrder"
                                                    ng-model="models.selected.selectedProperty.sortOrder"
                                                    ng-change="updateOrderField(models.selected.selectedProperty.sortOrder)">
                                            </select>
                                        </span>
                                    </div>
                                </div>
                                <div class="form-group" ng-show="element.fetchingShow">
                                    <label class="control-label col-sm-3"
                                           tooltip="{!$Objecttype.clm__TopLvlObjects__c.fields.clm__OnlineAttribute__c.InlineHelpText}"
                                           tooltip-placement="right" for="">
                                           {!$Label.MS_OnlineAttributeLabel}
                                    </label>
                                    <div class="col-lg-6 col-sm-6">
                                        <label class="switch switch-success"><input ng-model="master_filters_map[models.selected.value].clm__isOnlineFetchingEnabled__c" type="checkbox" /><i></i></label>
                                    </div>
                                </div>
                                <!-- <div class="form-group">
                                    <label class="col-sm-3 control-label" for="">Menu item title</label>
                                    <div class="col-sm-8">
                                        <span class="ui-select">
                                            <select>
                                                <option>Opportunity Name</option>
                                            </select>
                                        </span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-3 control-label" for="">Menu item subtitle</label>
                                    <div class="col-sm-8">
                                        <span class="ui-select">
                                            <select>
                                                <option>Account Name</option>
                                            </select>
                                        </span>
                                    </div>
                                </div> -->
                            </div>

                            <div class="col-lg-6 col-md-4 fadein fadeout" ng-show="element.linkListShouldShow">

                                 <div class="tab-pane" id="CustomLinks" data-ng-controller="CustomLinksCtrl">
                                    <form name="CustomLinksForm" class="form-horizontal form-validation" ng-submit="submitForm()">
                                        <div class="row"></div>
                                        <!-- Information -->
                                        <div class="callout callout-info ctm-pos-rel">
                                            <!-- Open info slider icon -->
                                            <!--<span class="glyphicon glyphicon-question-sign ctm-pos-abs forms-info-icon"
                                                  ng-click="openInfoSliderModal()"></span>-->
                                            <!-- Header and body of the form info -->
                                            <h4 class="ctm-info"> {!$Label.Settings_CustomLinksFullName} </h4>
                                            <div id="create-layout-btn">
                                                <button type="button" class="btn btn-w-md btn-gap-v btn-warning pull-right"
                                                        ng-click="createCategory()">
                                                        {!$Label.Settings_CreateNewCategory}
                                                </button>
                                            </div>
                                            <p> {!$Label.Settings_CustomLinksHelp} </p>


                                        </div>


                                        <!-- Main table -->
                                        <div class="row" ng-hide="model.links.length === 0">
                                            <div class="col-lg-12 col-md-12 col-sm-12">
                                                <div ng-repeat="(key, catItem) in model.categories">
                                                    <!-- Header -->
                                                    <div class="page-header table table-minilayouts">
                                                        <!-- Create new object button -->
                                                        <table style="width:100%;">
                                                            <tbody>
                                                               <tr>
                                                                  <td>
                                                                      <h4> {{catItem.name || 'None'}} </h4>
                                                                  </td>
                                                                  <td>
                                                                    <button class="tooltip-button btn btn-link btn-lg" type="button"
                                                                            ng-click="editCategory( catItem )">
                                                                            <span class="glyphicon glyphicon-cog"></span>
                                                                    </button>
                                                                  </td>
                                                                  <td>
                                                                    <button ng-model='catName' type="button" class="btn btn-w-md btn-gap-v btn-warning pull-right"
                                                                            ng-click="createObject(key,catItem.links)">
                                                                            {!$Label.MS_CreateLink}
                                                                    </button>
                                                                  </td>
                                                               </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>

                                                    <table class="table table-minilayouts">
                                                        <thead>
                                                            <tr>
                                                                <td> {!$Label.Settings_LinkColumnName} </td>
                                                            </tr>
                                                        </thead>

                                                        <tbody>
                                                            <tr>
                                                                <td dnd-list="catItem.links" style="padding: 0px;">
                                                                        <li style="list-style-type: none;" ng-repeat="value in catItem.links"
                                                                            dnd-draggable="value"
                                                                            dnd-moved="catItem.links.splice($index, 1); droppedElement($index, value, catItem.links, model.categories)"
                                                                            dnd-effect-allowed="move">

                                                                                <table>
                                                                                    <tbody>
                                                                                        <tr >
                                                                                        <td tooltip="{{value.clm__Description__c || ''}}"
                                                                                            style="cursor: pointer; cursor: hand;"
                                                                                            id="{{value.Id}}">
                                                                                            <b>{{value.Name}}</b>
                                                                                            <p>
                                                                                                <small>{{value.clm__URL__c || 'None'}}</small>
                                                                                            </p>
                                                                                        </td>
                                                                                        <!--<td> {{value.clm__URL__c || 'None'}} </td>
                                                                                        <td>
                                                                                            <label class="switch switch switch-success">
                                                                                                <input type="checkbox" ng-checked="{{value.clm__IsNavigationEnabled__c}}" ng-disabled="true"/>
                                                                                                <i></i>
                                                                                            </label>
                                                                                        </td>-->
                                                                                        <td>
                                                                                            <button class="tooltip-button btn btn-link btn-lg" type="button"
                                                                                                    ng-click="editObject( value )">
                                                                                                    <span class="glyphicon glyphicon-cog"></span>
                                                                                            </button>
                                                                                        </td>

                                                                                        <td>
                                                                                            <button class="tooltip-button btn btn-link btn-lg"
                                                                                                    ng-click="deleteObject( value.Id, '{!$Label.Settings_ConfirmDelete}' )" type="button">
                                                                                                    <span class="glyphicon glyphicon-remove"></span>
                                                                                            </button>
                                                                                        </td>
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>

                                                                        </li>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                       <!-- <tbody dnd-list="catItem.links">
                                                            <tr
                                                                dnd-draggable="value"
                                                                dnd-moved="catItem.links.splice($index, 1)"
                                                                dnd-effect-allowed="move"
                                                                ng-repeat="(key, value) in catItem.links">


                                                                <td id="{{value.Id}}"><b>{{value.Name}}</b>
                                                                    <p>
                                                                        <small>{{value.clm__Description__c || 'None'}}</small>
                                                                    </p>
                                                                </td>

                                                                <td> {{value.clm__URL__c || 'None'}} </td>
                                                                <td>
                                                                    <label class="switch switch switch-success">
                                                                        <input type="checkbox" ng-checked="{{value.clm__IsNavigationEnabled__c}}" />
                                                                        <i></i>
                                                                    </label>
                                                                </td>
                                                                <td>
                                                                    <button class="tooltip-button btn btn-link btn-lg" type="button"
                                                                            ng-click="editObject( value )">
                                                                            <span class="glyphicon glyphicon-cog"></span>
                                                                    </button>
                                                                </td>

                                                                <td>
                                                                    <button class="tooltip-button btn btn-link btn-lg"
                                                                            ng-click="deleteObject( value.Id )" type="button">
                                                                            <span class="glyphicon glyphicon-remove"></span>
                                                                    </button>
                                                                </td>
                                                            </tr>
                                                        </tbody>-->
                                                    </table>
                                                </div>
                                            </div>
                                        </div>

                                    </form>
                                </div>

                            </div>
                        
                            <div class="col-lg-6 col-md-6 fadein fadeout" ng-show="element.homePageShow">
                                <div ng-controller="MainCtrl">

                                    <div class="container">
                                        <div class="demo-container">

                                            <div class="page-header my-gridster">
                                                <div class="col-md-6 form-group"> 
                                                    <div class="form-group">
                                                        <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                                               tooltip="{!$Label.MS_SettingsEnabledTooltip}"
                                                               tooltip-placement="right" for="" style="padding: 0px;">
                                                            {!$Label.MS_SettingsEnabled}
                                                        </label>
                                                        <div class="col-lg-7 col-md-7 col-sm-12">
                                                            <label class="switch switch-success"><input ng-model="isOptionEnabled" ng-change="showHideWidgets()" type="checkbox" style="top: 5px;" /><i></i></label>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-offset-4 col-md-2">
                                                    <a ng-show="isOptionEnabled == true" class="btn btn-warning" onclick="scrollDownToPage()" ng-click="addWidget()"  
                                                    style=" top: 224px;
                                                            z-index: 9999;
                                                            position: fixed;
                                                            margin-left: -2%;" >
                                                            <i class="glyphicon glyphicon-plus"></i>{!$Label.MS_AddElement}</a>
                                                </div>
                                            </div>

                                            <div gridster="gridsterOpts" ng-show="isOptionEnabled == true">
                                                <ul>
                                                    <li gridster-item="customItemMap" ng-repeat="item in customItems" id="item-{{$index}}">
                                                        <div class="box-header-btns pull-right">
                                                            <a class="btn" title="Remove widget" ng-click="remove(item)"><i class="glyphicon glyphicon-trash"></i></a>
                                                        </div>
                                                        <div class="form-group my-select" >
                                                            <label for="sel1"><a ng-click="open(item.widget.id)"> Widget </a> ({{ item.size.x }}x{{ item.size.y }}):</label>
                                                            <div class="sizes"> Max: {{ showAllowSizes( item, selectedWidget ,'max' ) }}; min: {{ showAllowSizes( item, selectedWidget, 'min' ) }} </div>
                                                            <div class="my-arrow-2">
                                                                <select class="selectpicker form-control" ng-model="selectedWidget" ng-change="update(item, item.widget.id, selectedWidget)">
                                                                    <option value="report" ng-selected="item.widget.type == 'report'">Report</option>
                                                                    <option value="dashboard" ng-selected="item.widget.type == 'dashboard'">Dashboard</option>
                                                                    <option value="calendarWeekCarousel" ng-selected="item.widget.type == 'calendarWeekCarousel'">Calendar Week</option>
                                                                    <option value="calendarPresentationCarousel" ng-selected="item.widget.type == 'calendarPresentationCarousel'">Carousel Presentations </option>
                                                                    <option value="logo" ng-selected="item.widget.type == 'logo'">Logo</option>
                                                                </select>
                                                            </div>
                                                            <div class="my-arrow-2" ng-show="showFolders(selectedWidget, item.widget.type)">
                                                                <select class="selectpicker form-control" ng-model="selectedFolder" ng-change="downloadWidgets(selectedFolder)" ng-show="showFolders(selectedWidget,  item.widget.type)">
                                                                    <option ng-repeat="folder in folders" ng-selected="folder.id == item.widget.folderId" value="{{folder.id}}" ng-if="iFfolder( folder.type, item.widget.type, selectedWidget )">
                                                                        {{folder.folderName}}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                            <div class="my-arrow-2" ng-show="showSelect(selectedWidget, item.widget.type, 'report')">
                                                                <select class="selectpicker form-control" ng-model="item.widget.id" ng-change="update(item, item.widget.id)" ng-show="showSelect(selectedWidget, item.widget.type, 'report')">
                                                                    <option ng-repeat="w in widgets" ng-selected="w.id == item.widget.id" value="{{w.id}}" ng-if="check( w, selectedFolder, item.widget.folderId, 'report')">
                                                                        {{w.name}}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                            <div class="my-arrow-2" ng-show="showSelect(selectedWidget, item.widget.type, 'dashboard')">
                                                                <select class="selectpicker form-control" ng-model="item.widget.id" ng-change="update(item, item.widget.id)" ng-show="showSelect(selectedWidget, item.widget.type, 'dashboard')">
                                                                    <option ng-repeat="w in widgets" ng-selected="w.id == item.widget.id" value="{{w.id}}" ng-if="check( w, selectedFolder, item.widget.folderId,'dashboard')">
                                                                        {{w.name}}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="item-inner">
                                                            <icon-generator type="item.widget" select="selectedWidget" size="item.size"></icon-generator>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="ctm-save-panel">
                            <button type="submit"
                                    class="pull-right btn btn-success btn-lg ctm-next-btn"
                                    ng-click="setAlertsTrue(); submitData(true)"
                                    ng-disabled="appMenuForm.$invalid">
                                    {!$Label.MS_Save}
                            </button>
                        </div>
                        <div class="divider"></div>
                        <div class="alert alert-info" data-ng-show="showInfoOnSubmit">
                            This is just for demo. In real project, you will submit form with AJAX :)
                        </div>
                    </fieldset>
                </form>

                <script type="text/javascript">
                function scrollDownToPage(){
                     $("html, body").animate({ scrollTop: $(document).height() }, 500);
                }
                </script>
            </div>


            <!-- Calendar Tab -->
            <div class="tab-pane" id="Calendar" ng-controller="CalendarCtrl">
              <style type="text/css">
                .tooltip{
                  display: block !important;
                }
                .tooltip.top{
                  display: block !important;
                }
                .tooltip.top.in{
                  margin-top: -33px !important;
                }
              </style>

              <apex:form styleClass="form-horizontal form-validation">
                <fieldset>
                  <!-- Information -->
                  <div class="callout callout-info ctm-pos-rel">
                    <!-- Open info slider icon -->
                    <span class="glyphicon glyphicon-question-sign ctm-pos-abs forms-info-icon"
                          ng-click="openInfoSliderModal()"></span>
                    <!-- Header and body of the form info -->
                    <h4 class="ctm-info"> {!$Label.Settings_CalendarFullname} </h4>
                    <p> {!$Label.Settings_CalendarHelp} </p>
                  </div>

                  <!-- Left Column: activity planning -->
                  <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                                <label class="control-label col-lg-1 col-md-1 col-sm-1" style="text-align: left"
                             for="">
                        <!--tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__IsPersonAccountsEnabled__c.InlineHelpText}"-->
                        <!--tooltip-placement="right"-->
                        {!$Objecttype.clm__ApplicationSetup__c.fields.SetupOwnerId.label}
                      </label>
                                <div id="profileChaneddiv" ng-controller="ProfilePickListController">
                                    <span class="ui-select md" >
                        <select id="profileChanedSelect" ng-options="option.label group by option.is_configured for option in profile.options | orderBy: 'label'"
                                                ng-change="profileChanged()"
                                ng-model="profile.selected"
                                ng-init="profileChange()">
                          <!--<option value=""></option>-->
                          <!--required=""-->
                          <!--option.label group by option.is_configured for option in profile.options-->
                        </select>
                      </span>
                      <button class="btn btn-link btn-lg" type="button" ng-really-message="{!$Label.MS_DeleteSettingWarning}" ng-really-click="deleteSetting()"
                                            ng-hide="isUndeletable()">
                        <span class="glyphicon glyphicon-trash" ></span>
                      </button>
                                    <span class="ct-spinner" ng-show="isSaving">
                                        <img src="images/cube.gif" width="50" height="32" alt="Loading..."/>
                                    </span>                        
                                </div>
                      <!--ng-click="deleteSetting()"-->
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-12">
                      <div class="page-header col-lg-12 col-md-12 col-sm-12">
                        <h4>{!$Label.MS_ActivityPlanning}</h4>
                      </div>
                      <div class="form-group col-lg-12 col-md-12 col-sm-12">
                        <label class="control-label col-lg-4 col-md-4 col-sm-7"
                               tooltip="{!$Label.MS_ActivityPlanEnable_Help}"
                               tooltip-placement="right" for="">
                          {!$Label.MS_EnableActivityPlanning}
                        </label>
                        <div class="col-lg-2 col-md-2 col-sm-2">
                          <label class="switch switch-success"><input type="checkbox" ng-model="ActivityPlanningEnabled" /><i></i></label>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row" ng-show="ActivityPlanningEnabled">
                    <div class="page-header col-lg-12 col-md-12 col-sm-12">
                      <h4>{!$Label.MS_CalendarSettings}</h4>
                    </div>
                    <!-- Right Column -->
                    <div class="col-lg-6 col-md-6 col-sm-12">
                      
                      <div class="form-group">
                        <label class="control-label col-lg-4 col-md-4 col-sm-4"
                               tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__CalendarView__c.InlineHelpText}"
                               tooltip-placement="right" for="">
                          {!$Objecttype.clm__ApplicationSetup__c.fields.clm__CalendarView__c.label}
                        </label>
                        <div class="col-lg-8 col-md-8 col-sm-8">
                          <span class="ui-select smd">
                            <select ng-model="calendarView" ng-options="field.label for field in calendarViewFields track by field.value" >
                              <!--<option value=""></option>-->
                            </select>
                          </span>
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="control-label col-lg-4 col-md-4 col-sm-4"
                               tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__DefaultEventDuration__c.InlineHelpText}"
                               tooltip-placement="right" for="">
                          {!$Objecttype.clm__ApplicationSetup__c.fields.clm__DefaultEventDuration__c.label} 
                        </label>
                        <div class="col-lg-8 col-md-8 col-sm-8">
                          <input id="defaultEventDuration" class="slider-smd myEventDurationSlider" type="text" ui-range-slider="true"
                                 data-slider-min="5" data-slider-max="60" data-slider-step="5"
                                 data-slider-orientation="horizontal"
                                 data-slider-selection="before" data-slider-tooltip="show"
                                 data-slider-handle="round" />

                        </div>
                      </div>
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-12">
                      <div class="form-group">
                        <label class="control-label col-lg-4 col-md-4 col-sm-4"
                               tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__IsWeekSwitchShowed__c.InlineHelpText}"
                               tooltip-placement="right" for="">
                          {!$Objecttype.clm__ApplicationSetup__c.fields.clm__IsWeekSwitchShowed__c.label}
                        </label>
                        <div class="col-lg-8 col-md-8 col-sm-8">
                          <label class="switch switch-success"><input type="checkbox" ng-model="calendar.clm__IsWeekSwitchShowed__c" /><i></i></label>
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="control-label col-lg-4 col-md-4 col-sm-4"
                               tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__VisibleHourRange__c.InlineHelpText}"
                               tooltip-placement="right" for="">
                          {!$Objecttype.clm__ApplicationSetup__c.fields.clm__VisibleHourRange__c.label} 
                        </label>
                        <div class="col-lg-8 col-md-8 col-sm-8">
                          <input id="visibleHourRange" class="slider-smd" type="text" value="" ui-range-slider="true"
                                 data-slider-min="0" data-slider-max="24" data-slider-step="1"
                                 data-slider-orientation="horizontal"
                                 data-slider-value="[9,18]" data-slider-selection="before"
                                 data-slider-tooltip="show" data-slider-handle="round" />
                        </div>
                      </div>

                    </div>
                  </div>
                  
                  <div class="row" ng-show="ActivityPlanningEnabled">
                      
                      <div class="page-header col-lg-12 col-md-12 col-sm-12">
                        <h4>{!$Label.MS_AddSettings}</h4>
                      </div>

                      <!--start/finish funct-->
                      <div class="form-group">
                        <label class="control-label col-lg-4 col-md-4 col-sm-4"
                               tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__EnableStartFinish__c.InlineHelpText}"
                               tooltip-placement="right" for="">
                          {!$Objecttype.clm__ApplicationSetup__c.fields.clm__EnableStartFinish__c.label}
                        </label>
                        <div class="col-lg-8 col-md-8 col-sm-8">
                          <label class="switch switch-success"><input type="checkbox" ng-model="calendar.clm__EnableStartFinish__c" /><i></i></label>
                        </div>
                      </div>
                      <div class="form-group fadein fadeout" ng-show="calendar.clm__EnableStartFinish__c">
                        <label class="control-label col-lg-4 col-md-4 col-sm-4"
                               tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__EnableLockUnlock__c.InlineHelpText}"
                               tooltip-placement="right" for="">
                          {!$Objecttype.clm__ApplicationSetup__c.fields.clm__EnableLockUnlock__c.label}
                        </label>
                        <div class="col-lg-8 col-md-8 col-sm-8">
                          <label class="switch switch-success"><input type="checkbox" ng-model="calendar.clm__EnableLockUnlock__c" /><i></i></label>
                        </div>
                      </div>
                      <div class="form-group fadein fadeout" ng-show="calendar.clm__EnableStartFinish__c">
                        <label class="control-label col-lg-4 col-md-4 col-sm-4"
                               tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__CaptureGeoposition__c.InlineHelpText}"
                               tooltip-placement="right" for="">
                          {!$Objecttype.clm__ApplicationSetup__c.fields.clm__CaptureGeoposition__c.label}
                        </label>
                        <div class="col-lg-8 col-md-8 col-sm-8">
                          <label class="switch switch-success"><input type="checkbox" ng-model="calendar.clm__CaptureGeoposition__c" /><i></i></label>
                        </div>
                      </div>
                      <div class="form-group fadein fadeout" ng-show="calendar.clm__EnableStartFinish__c">
                        <label class="control-label col-lg-4 col-md-4 col-sm-4"
                               tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__UpdateDateFields__c.InlineHelpText}"
                               tooltip-placement="right" for="">
                          {!$Objecttype.clm__ApplicationSetup__c.fields.clm__UpdateDateFields__c.label}
                        </label>
                        <div class="col-lg-8 col-md-8 col-sm-8">
                          <label class="switch switch-success"><input type="checkbox" ng-model="calendar.clm__UpdateDateFields__c" /><i></i></label>
                        </div>
                      </div>
                      <!--start.finish funct-->
                  </div>

                  <!-- Left Column -->
                  <div class="row fadein fadeout" ng-show="ActivityPlanningEnabled" ng-repeat="calendarItem in calendars">
                    <div class="page-header col-lg-12 col-md-12 col-sm-12" ng-if="calendars.length <= 1">
                      <h4>{!$Label.MS_ActivitySettings}</h4>
                    </div>
                    <div class="page-header col-lg-12 col-md-12 col-sm-12" ng-if="calendars.length > 1">
                      <h4>{!$Label.MS_ActivitySettings} {{$index + 1}}</h4>
                    </div>
                    
                    <div class="col-lg-6 col-md-6 col-sm-12">

                      <div class="form-group">
                        <label class="control-label col-lg-4 col-md-4 col-sm-4"
                               tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__ActivityObjectAPIName__c.InlineHelpText}"
                               tooltip-placement="right" for="">
                          {!$Objecttype.clm__ApplicationSetup__c.fields.clm__ActivityObjectAPIName__c.label}
                        </label>
                        <div class="col-lg-8 col-md-8 col-sm-8">
                          <span class="ui-select smd">
                            <span class="ui-select smd">
                              <select name="object" ng-init="initActivityObjectAPIName(calendarItem.clm__ActivityObjectAPIName__c, $index);" ng-model="ActivityObjectAPINames[calendarItem.clm__ActivityObjectAPIName__c][0]" ng-change="testChange(calendarItem.clm__ActivityObjectAPIName__c, ActivityObjectAPINames[calendarItem.clm__ActivityObjectAPIName__c][0], calendarItem);" ng-options="object.label for object in objects | orderBy: 'label' track by object.value" >
                                <option></option>
                              </select>
                            </span>
                          </span>
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="control-label col-lg-4 col-md-4 col-sm-4"
                               tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__ActivityDateAPI__c.InlineHelpText}"
                               tooltip-placement="right" for="">
                          {!$Objecttype.clm__ApplicationSetup__c.fields.clm__ActivityDateAPI__c.label}
                        </label>
                        <div class="col-lg-8 col-md-8 col-sm-8">
                          <span class="ui-select smd">
                            <span class="ui-select smd">
                              <select ng-model="calendarItem.clm__ActivityDateAPI__c" ng-options="k as v for (k, v) in ActivityObjectAPINames[calendarItem.clm__ActivityObjectAPIName__c][0].dateFields" >
                                <option value=""></option>
                              </select>
                            </span>
                          </span>
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="control-label col-lg-4 col-md-4 col-sm-4"
                               tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__ActivityEndDateAPI__c.InlineHelpText}"
                               tooltip-placement="right" for="">
                          {!$Objecttype.clm__ApplicationSetup__c.fields.clm__ActivityEndDateAPI__c.label}
                        </label>
                        <div class="col-lg-8 col-md-8 col-sm-8">
                          <span class="ui-select smd">
                            <select ng-model="calendarItem.clm__ActivityEndDateAPI__c" ng-options="k as v for (k, v) in ActivityObjectAPINames[calendarItem.clm__ActivityObjectAPIName__c][0].dateFields" >
                              <option value=""></option>
                            </select>
                          </span>
                        </div>
                      </div>
                    </div>
                    <div  class="col-lg-6 col-md-6 col-sm-12">
                      <div class="form-group">
                        <label class="control-label col-lg-4 col-md-4 col-sm-4"
                               tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__ActivityStatusAPI__c.InlineHelpText}"
                               tooltip-placement="right" for="">
                          {!$Objecttype.clm__ApplicationSetup__c.fields.clm__ActivityStatusAPI__c.label}
                        </label>
                        <div class="col-lg-8 col-md-8 col-sm-8">
                          <span class="ui-select smd">
                            <select ng-model="calendarItem.clm__ActivityStatusAPI__c" ng-options="k as v for (k, v) in ActivityObjectAPINames[calendarItem.clm__ActivityObjectAPIName__c][0].statusFields" >
                              <option value=""></option>
                            </select>
                          </span>
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="control-label col-lg-4 col-md-4 col-sm-4"
                               tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__ActivityDescriptionAPI__c.InlineHelpText}"
                               tooltip-placement="right" for="">
                          {!$Objecttype.clm__ApplicationSetup__c.fields.clm__ActivityDescriptionAPI__c.label}
                        </label>
                        <div class="col-lg-8 col-md-8 col-sm-8">
                          <span class="ui-select smd">
                            <select ng-model="calendarItem.clm__ActivityDescriptionAPI__c" >
                              <option ng-repeat="(k,v) in ActivityObjectAPINames[calendarItem.clm__ActivityObjectAPIName__c][0].descriptionFields" ng-selected="{{k == calendarItem.clm__ActivityDescriptionAPI__c}}" value="{{k}}">{{v}}</option>
                            </select>
                          </span>
                        </div>
                      </div>

                      <div class="form-group" ng-show="$root.GeolocationEnabled">
                        <label class="control-label col-lg-4 col-md-4 col-sm-4"
                               tooltip="{!$Objecttype.clm__ApplicationSetup__c.fields.clm__ActivityGeolocationAPIField__c.label}"
                               tooltip-placement="right" for="">
                          {!$Objecttype.clm__ApplicationSetup__c.fields.clm__ActivityGeolocationAPIField__c.label}
                        </label>
                        <div class="col-lg-8 col-md-8 col-sm-8">
                          <span class="ui-select smd">
                            <select ng-model="calendarItem.clm__ActivityGeolocationAPIField__c" ng-options="k as v for (k, v) in ActivityObjectAPINames[calendarItem.clm__ActivityObjectAPIName__c][0].geolocationFields" >
                              <option value=""></option>
                            </select>
                          </span>
                        </div>
                      </div>
                    </div>
                    <span class="col-xs-offset-10 col-xs-2">
                      <button class="btn btn-default" 
                      ng-click="deleteActivityObject(calendarItem, $event); $event.preventDefault();">
                        {!$Label.MS_DeleteActivity}
                      </button>  
                    </span>
                  </div>
                  
                  <!-- addActivityNewGroup -->
                  <div class="container row" ng-show="ActivityPlanningEnabled">
                    <button class="btn btn-default" ng-click="addNewActivityObject(); $event.preventDefault();">
                      {!$Label.MS_AddNewActivity}
                    </button>
                  </div>
                  

                  <div class="ctm-save-panel">
                    <button type="button" class="pull-right btn btn-success btn-lg ctm-next-btn"
                            ng-click="submitData( true )">
                      {!$Label.MS_Save}
                    </button>
                  </div>
                  <apex:actionFunction action="{!saveCalendar}" name="saveCalendar" rerender="msg1" >
                    <apex:param name="visibleHourRange" assignTo="{!hourRangeMAS}" value="" />
                    <apex:param name="defaultEventDuration" assignTo="{!eventDurMAS}" value="" />
                  </apex:actionFunction>

                  <apex:actionFunction name="changeShedule" action="{!changeShedule}" rerender="none" oncomplete=" console.log('completed');angular.element(document.getElementById('Credentials')).scope().resetBlocking();" />

                </fieldset>
              </apex:form>
            </div>


            <!-- RD Settings Tab -->
            <div class="tab-pane" id="RDSettings" ng-controller="RdSettingsCtrl">
              <style type="text/css">
                .tooltip{
                  display: block !important;
                }
                .tooltip.top{
                  display: block !important;
                }
                .tooltip.top.in{
                  margin-top: -33px !important;
                }
              </style>

              <apex:form styleClass="form-horizontal form-validation">
                <fieldset>
                  <!-- Information -->
                  <div class="callout callout-info ctm-pos-rel"> 
                    <!-- <span class="glyphicon glyphicon-question-sign ctm-pos-abs forms-info-icon"
                          ng-click="openInfoSliderModal()"></span>  -->
                    <h4 class="ctm-info">{!$Label.MS_RDHeader}</h4>
                    <p>{!$Label.MS_RDHEaderTip}</p>

                      <button type="button" class="btn btn-w-md btn-gap-v btn-warning" ng-click="openJSONFileSenderModal()" style="float:right;margin-top:25px">
                              {!$Label.MS_AddClmPresentations}
                      </button> 
             
                  </div> 

                  <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                                <label class="control-label col-lg-1 col-md-1 col-sm-1" style="text-align: left"
                                   for=""> 
                                  {!$Objecttype.clm__ApplicationSetup__c.fields.SetupOwnerId.label}
                                </label>
                                <div id="profileChaneddiv" ng-controller="ProfilePickListController">
                                    <span class="ui-select md" >
                                    <select id="profileChanedSelect" ng-options="option.label group by option.is_configured for option in profile.options | orderBy: 'label'"
                                                      ng-change="profileChanged()"
                                                      ng-model="profile.selected"
                                                      ng-init="profileChange()">
                                   
                                              </select>
                            </span>
                            <button class="btn btn-link btn-lg" type="button" ng-really-message="{!$Label.MS_DeleteSettingWarning}" ng-really-click="deleteSetting()"
                                                  ng-hide="isUndeletable()">
                              <span class="glyphicon glyphicon-trash" ></span>
                            </button>
                            <span class="ct-spinner" ng-show="isSaving">
                                <img src="images/cube.gif" width="50" height="32" alt="Loading..."/>
                            </span>                        
                          </div> 
                    </div>


                    <div class="col-lg-6 col-md-6 col-sm-12">
                      <div class="page-header col-lg-12 col-md-12 col-sm-12">
                        <h4>{!$Label.MS_RDSettings}</h4>
                      </div>
                      <div class="form-group col-lg-12 col-md-12 col-sm-12">
                        <label class="control-label col-lg-4 col-md-4 col-sm-7"
                               tooltip="{!$Objecttype.clm__CLMSettings__c.fields.clm__IsRDEnabled__c.label}"
                               tooltip-placement="right" for="">
                            {!$Objecttype.clm__CLMSettings__c.fields.clm__IsRDEnabled__c.label} 
                        </label>
                        <div class="col-lg-2 col-md-2 col-sm-2">
                          <label class="switch switch-success"><input type="checkbox" ng-model="model.clm__IsRDEnabled__c" /><i></i></label>
                        </div>
                      </div>
                    </div>

                  </div>
             

                  <div class="fadein fadeout row" ng-show="model.clm__IsRDEnabled__c">

                      <div class="form-group">
                          <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                 for=""
                                 tooltip-placement="right">
                            {!$Objecttype.clm__CLMSettings__c.fields.clm__IsRDVideoStreamingEnabled__c.label} 
                          </label>
                          <div class="col-lg-7 col-md-7 col-sm-12">
                              <label class="switch switch-success"><input type="checkbox" ng-model="model.clm__IsRDVideoStreamingEnabled__c" /><i></i></label>
                          </div>
                      </div>

                      <div class="form-group">
                          <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                 for=""
                                 tooltip-placement="right">
                            {!$Objecttype.clm__CLMSettings__c.fields.clm__IsRDChatEnabled__c.label} 
                          </label>
                          <div class="col-lg-7 col-md-7 col-sm-12">
                              <label class="switch switch-success"><input type="checkbox" ng-model="model.clm__IsRDChatEnabled__c"  /><i></i></label>
                          </div>
                      </div>

                      <div class="form-group">
                          <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                 for=""
                                 tooltip-placement="right">
                            {!$Objecttype.clm__CLMSettings__c.fields.clm__IsRDChatLogEnabled__c.label} 
                          </label>
                          <div class="col-lg-7 col-md-7 col-sm-12">
                              <label class="switch switch-success"><input type="checkbox" ng-model="model.clm__IsRDChatLogEnabled__c" /><i></i></label>
                          </div>
                      </div>
             
                      <div class="form-group">
                          <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                 for=""
                                 tooltip-placement="right">
                            {!$Objecttype.clm__CLMSettings__c.fields.clm__IsRDJSAPIEnabled__c.label} 
                          </label>
                          <div class="col-lg-7 col-md-7 col-sm-12">
                              <label class="switch switch-success"><input type="checkbox" ng-model="model.clm__IsRDJSAPIEnabled__c" /><i></i></label>
                          </div>
                      </div>
             
                      <div class="form-group">
                          <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                 for=""
                                 tooltip-placement="right">
                            {!$Objecttype.clm__CLMSettings__c.fields.clm__IsRDDetailedStatsEnabled__c.label} 
                          </label>
                          <div class="col-lg-7 col-md-7 col-sm-12">
                              <label class="switch switch-success"><input type="checkbox" ng-model="model.clm__IsRDDetailedStatsEnabled__c" /><i></i></label>
                          </div>
                      </div>

             
                      <div class="form-group">
                          <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                 for=""
                                 tooltip-placement="right">
                            {!$Objecttype.clm__CLMSettings__c.fields.clm__SessionTimeout__c.label} 
                          </label>
                          <div class="col-lg-7 col-md-7 col-sm-12">
                              <input type="number" class="form-control ctm-input-md" required="" 
                                        ng-min="0" step="1" min="0" ng-max="1000" max="1000" ng-model="model.clm__SessionTimeout__c" /> 
                          </div> 
                      </div>

                      <div class="form-group">
                          <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                 for=""
                                 tooltip-placement="right">
                            {!$Objecttype.clm__CLMSettings__c.fields.clm__ApplicationsListField__c.label}
                          </label>
                          <div class="col-lg-7 col-md-7 col-sm-12">
                              <input type="text" class="form-control ctm-input-md" required="" data-ng-model="model.clm__ApplicationsListField__c" />
                          </div>
                      </div>

                      <div class="form-group">
                          <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                 for=""
                                 tooltip-placement="right">
                            {!$Objecttype.clm__CLMSettings__c.fields.clm__LinkField__c.label}
                          </label>
                          <div class="col-lg-7 col-md-7 col-sm-12">
                              <input type="text" class="form-control ctm-input-md" required="" data-ng-model="model.clm__LinkField__c" />
                          </div>
                      </div>
             
                      <div class="form-group">
                          <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                 for=""
                                 tooltip-placement="right">
                            {!$Objecttype.clm__CLMSettings__c.fields.clm__RestServicePrefix__c.label}
                          </label>
                          <div class="col-lg-7 col-md-7 col-sm-12">
                              <input type="restServicePrefix" class="form-control ctm-input-md" required="" data-ng-model="model.clm__RestServicePrefix__c" />
                          </div>
                      </div>
             
                      <div class="form-group">
                          <label class="control-label col-lg-4 col-md-5 col-sm-12"
                                 for=""
                                 tooltip-placement="right" style="margin-top: 10px;">
                            {!$Objecttype.clm__CLMSettings__c.fields.clm__LoginURL__c.label} 
                          </label>

                            <div class="col-lg-6 col-md-6 min-width-450">


                                <div class="col-md-6 remove-col-paddings">
                                    <div class="ui-multiple-select">
                                        <div class="ui-multiple-select-available">
                                            <h5 style="margin-bottom: 0px;">
                                                {!$Label.MS_Available}
                                            </h5>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 remove-col-paddings">
                                    <div class="ui-multiple-select">
                                        <div class="ui-multiple-select-available">
                                            <h5 style="margin-bottom: 0px;">
                                                {!$Label.MS_Selected}
                                            </h5>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4 remove-col-paddings">
                                    <div class="ui-multiple-select">
                                        <div class="ui-multiple-select-available">
                                            <ul dnd-list="model.availableLoginUrls"  
                                            style="width: 87.33333%;  margin-bottom: 5px; " 
                                            dnd-inserted="filterListAfterInsertItem(item, true, index, event)">
                                                <li ng-repeat="item in model.availableLoginUrls"
                                                    dnd-draggable="item"
                                                    dnd-moved=""
                                                    dnd-effect-allowed="move"
                                                    ng-class="{'highlight': model.selected === item}"
                                                    value="{{item.value}}" 
                                                    >
                                                    {{item.label}}
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4 remove-col-paddings">
                                    <div class="ui-multiple-select list-wrapper">
                                        <div class="ui-multiple-select-selected">
                                            <ul dnd-list="model.selectedLoginUrls"  
                                            style="width: 87.3333%;margin-bottom: 5px;"
                                            dnd-inserted="filterListAfterInsertItem(item, false, index, event)">
                                                <li ng-repeat="item in model.selectedLoginUrls"
                                                    dnd-draggable="item"
                                                    dnd-moved=""
                                                    dnd-effect-allowed="move"
                                                    ng-class="{'highlight': model.selected === item}"
                                                    value="{{item.value}}">
                                                    {{item.label}}
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div> 
                      </div> 


                  </div>
                   
             
               

                  <div class="ctm-save-panel">
                    <button type="button" class="pull-right btn btn-success btn-lg ctm-next-btn"
                            ng-click="submitData( true )">
                      {!$Label.MS_Save}
                    </button>
                  </div>
                  <apex:actionFunction action="{!saveCalendar}" name="saveCalendar" rerender="msg1" >
                    <apex:param name="visibleHourRange" assignTo="{!hourRangeMAS}" value="" />
                    <apex:param name="defaultEventDuration" assignTo="{!eventDurMAS}" value="" />
                  </apex:actionFunction>

                  <apex:actionFunction name="changeShedule" action="{!changeShedule}" rerender="none" oncomplete=" console.log('completed');angular.element(document.getElementById('Credentials')).scope().resetBlocking();" />

                </fieldset>
              </apex:form>
            </div>


            <!-- Mini Layouts Tab -->
            <div class="tab-pane" id="MiniLayouts" data-ng-controller="MiniLayoutCtrl">
                <form name="MiniLayoutsForm" class="form-horizontal form-validation" ng-submit="submitForm()">
                    <!-- Information -->
                    <div class="callout callout-info ctm-pos-rel">
                        <!-- Open info slider icon -->
                        <span class="glyphicon glyphicon-question-sign ctm-pos-abs forms-info-icon"
                              ng-click="openInfoSliderModal()"></span>
                        <!-- Header and body of the form info -->
                        <h4 class="ctm-info">{!$Label.Settings_MiniLayoutsFullName}</h4>
                        <p>{!$Label.Settings_MiniLayoutsHelp}</p>
                    </div>


                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12"> 

                            <label class="control-label col-lg-1 col-md-1 col-sm-1" style="text-align: left"
                                   for=""> 
                                {!$Objecttype.clm__ApplicationSetup__c.fields.SetupOwnerId.label}
                            </label>
                            <div id="profileSelectorMiniLayouts" ng-controller="MiniLayoutsProfileOptionsController">
                                <span class="ui-select md" >
                                    <select id="miniLayoutProfileSelList" ng-options="option.label group by option.minilay for option in profile.options | orderBy: 'label'"
                                            ng-change="profileChanged();"
                                            ng-model="profile.selected"
                                            ng-init="updateSelectedIn( true )"
                                            required="">
                                    </select>
                                </span> 
                            </div>                
                        </div>
                    </div>



                    <div id="create-layout-btn">
                        <button type="button" class="btn btn-w-md btn-gap-v btn-warning pull-right" 
                                ng-hide="!layouts" ng-click="launchCreateLayoutModal()">
                                {!$Label.MS_CreateLayout}
                        </button>
                    </div>
                    <div class="row">
                        <div class="col-lg-7 col-md-9 col-sm-12">
                            <div ng-repeat="(key, value) in layouts | groupBy: 'clm__SObject__c'">
                                <div class="page-header">
                                    <h4>{{labels[key]}}</h4>
                                </div>
                                <table class="table table-minilayouts">
                                    <thead>
                                    <tr>
                                        <th>{!$Label.MS_ActDataSettName}</th>
                                        <th>{!$Label.MS_MLS_RecordType}</th>
                                        <th></th>
                                        <th></th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr ng-repeat="object in value">
                                        <td>{{object.Name}}</td>
                                        <td>{{object.clm__RecordtypeDeveloperName__c || 'None'}}</td>
                                        <td>
                                            <button class="tooltip-button btn btn-link btn-lg" type="button" 
                                                    ng-click="launchCreateActionModal(object.Id, object.clm__SObject__c, object.Name, labels[object.clm__RecordtypeDeveloperName__c], labels[object.clm__SObject__c])">
                                                    <span class="glyphicon glyphicon-cog"></span>
                                            </button>
                                        </td>
                                        <td>
                                            <button class="tooltip-button btn btn-link btn-lg" 
                                                    ng-really-message="{!$Label.MS_DeleteSettingWarning}" 
                                                    ng-really-click="deleteLayout(object.Id)" 
                                                    type="button">
                                                    <span class="glyphicon glyphicon-remove"></span>
                                            </button>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="ctm-save-panel" style="display:none">
                        <button type="button" ng-click="$parent.nextTab()" class="btn btn-success btn-lg ctm-next-btn">
                            {!$Label.MS_Save}
                        </button>
                    </div>
                </form>
            </div>


            <!-- Custom Details Tab -->
            <div class="tab-pane" id="Customizations" data-ng-controller="CustomizationsCtrl">
                <form name="CustomizationsForm" class="form-horizontal form-validation" ng-submit="submitForm()">
                    <!-- Information -->
                    <div class="callout callout-info ctm-pos-rel">
                        <!-- Open info slider icon -->
                        <span class="glyphicon glyphicon-question-sign ctm-pos-abs forms-info-icon"
                              ng-click="openInfoSliderModal()"></span>
                        <!-- Header and body of the form info -->
                        <h4 class="ctm-info"> {!$Label.Settings_RecordColorsFullName} </h4>
                        <p> {!$Label.Settings_RecordColorsHelp} </p>
                    </div>
                    <div id="create-layout-btn">
                        <button type="button" class="btn btn-w-md btn-gap-v btn-warning pull-right"
                                ng-hide="!layouts" ng-click="launchCreateLayoutModal()">
                            {!$Label.MS_Create}
                        </button>
                    </div>



                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12"> 

                            <label class="control-label col-lg-1 col-md-1 col-sm-1" style="text-align: left"
                                   for=""> 
                                {!$Objecttype.clm__ApplicationSetup__c.fields.SetupOwnerId.label}
                            </label>
                            <div id="profileSelectorCustomizations" ng-controller="CustomizationsProfileOptionsController">
                                <span class="ui-select md" >
                                    <select id="customizationsProfileSelList" ng-options="option.label group by option.customize for option in profile.options"
                                            ng-change="profileChanged();"
                                            ng-model="profile.selected"
                                            ng-init="updateSelectedIn( true )"
                                            required="">
                                    </select>
                                </span> 
                            </div>                
                        </div>
                    </div>



                    <div class="row">
                        <div class="col-lg-6 col-md-9 col-sm-12">
                            <div ng-repeat="layout in layouts">
                                <div class="page-header">
                                    <div class="row">
                                        <div class="col-md-9">
                                            <h4>{{labels[layout.clm__Object__c]}}</h4>
                                            <h5>{{layout.clm__CriteriaFieldLabel__c}}</h5>
                                        </div>
                                        <div class="col-md-3">
                                            <button class="tooltip-button btn btn-link btn-lg" type="button"
                                                    ng-click="launchCreateActionModal(layout.Id, layout.clm__SObject__c, layout.clm__CriteriaField__c, layout.clm__CriteriaFieldLabel__c, layout.clm__Colors__c, layout.clm__Values__c)">
                                                <span class="glyphicon glyphicon-cog"></span>
                                            </button>
                                            <button class="tooltip-button btn btn-link btn-lg"
                                                    ng-really-message="{!$Label.MS_DeleteSettingWarning}" 
                                                    ng-really-click="deleteLayout(layout.Id)" 
                                                    type="button">
                                                <span class="glyphicon glyphicon-remove"></span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <table class="table table-minilayouts">
                                    <thead>
                                    <tr>
                                        <th>{!$Label.Value}</th>
                                        <th>{!$Label.Color}</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="data in layout.tableData">
                                            <td>{{data.name}}</td>
                                            <td><span style="background-color: {{data.color}};" class="color-sample"></span> {{data.color | hex}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="ctm-save-panel" style="display:none">
                        <button type="button" ng-click="$parent.nextTab()" class="btn btn-success btn-lg ctm-next-btn">
                            {!$Label.MS_Save}
                        </button>
                    </div>
                </form>
            </div>


            <!-- Custom Details Tab -->
            <div class="tab-pane" id="CustomDetails" data-ng-controller="CustomDetailsCtrl">
                <form name="CustomDetailsForm" class="form-horizontal form-validation" ng-submit="submitForm()">
                    <!-- Information -->
                    <div class="callout callout-info ctm-pos-rel">
                        <!-- Open info slider icon -->
                        <span class="glyphicon glyphicon-question-sign ctm-pos-abs forms-info-icon"
                              ng-click="openInfoSliderModal()"></span>
                        <!-- Header and body of the form info -->
                        <h4 class="ctm-info"> {!$Label.Settings_CustomDetailsFullName} </h4>
                        <p> {!$Label.Settings_CustomDetailsHelp} </p>
                    </div>

                    <!-- Create new object button -->
                    <div id="create-layout-btn">
                        <button type="button" class="btn btn-w-md btn-gap-v btn-warning pull-right" 
                                ng-click="createObject()">
                                {!$Label.MS_Create}
                        </button>
                    </div>

                    <!-- Main table -->
                    <div class="row" ng-hide="model.createdObjectsList.length === 0">
                        <div class="col-lg-7 col-md-9 col-sm-12">
                            <div ng-repeat="(key, value) in model.createdObjectsList | groupBy: 'clm__ParentObject__c'">
                                <!-- Header -->
                                <div class="page-header">
                                    <h4> {{labels[key]}} </h4>
                                </div>

                                <table class="table table-minilayouts">
                                    <thead>
                                        <tr>
                                            <th> {!$Label.MS_ActDataSettName} </th>
                                            <th> {!$Label.MS_ADC_ParentRecordType} </th>
                                            <th> {!$Label.MS_ADC_DataRecordType} </th>
                                            <th></th>
                                            <th></th>
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <tr ng-repeat="object in value">
                                            <!-- Object name -->
                                            <td id="{{object.Id}}">{{object.Name}}</td>
                                            <!-- Parent object record type -->
                                            <td> {{object.clm__ParentObjectRecordType__c || 'None'}} </td>
                                            <!-- Data object record type -->
                                            <td> {{object.clm__DataRecordType__c || 'None'}} </td>

                                            <td>
                                                <button class="tooltip-button btn btn-link btn-lg" type="button" 
                                                        ng-click="editObject( object )">
                                                        <span class="glyphicon glyphicon-cog"></span>
                                                </button>
                                            </td>

                                            <td>
                                                <button class="tooltip-button btn btn-link btn-lg"
                                                        ng-really-message="{!$Label.MS_DeleteSettingWarning}" 
                                                        ng-really-click="deleteObject( object.Id )" 
                                                        type="button">
                                                        <span class="glyphicon glyphicon-remove"></span>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Save form button -->
                    <div class="ctm-save-panel" style="display:none">
                        <button type="button" ng-click="$parent.nextTab()" class="btn btn-success btn-lg ctm-next-btn">
                            {!$Label.MS_Save}
                        </button>
                    </div>
                </form>
            </div>


            <!-- Custom Links Tab -->
            <div class="tab-pane" id="CustomLinks" data-ng-controller="CustomLinksCtrl">
                <form name="CustomLinksForm" class="form-horizontal form-validation" ng-submit="submitForm()">
                    <!-- Information -->
                    <div class="callout callout-info ctm-pos-rel">
                        <!-- Open info slider icon -->
                        <!--<span class="glyphicon glyphicon-question-sign ctm-pos-abs forms-info-icon"
                              ng-click="openInfoSliderModal()"></span>-->
                        <!-- Header and body of the form info -->
                        <h4 class="ctm-info"> {!$Label.Settings_CustomLinksFullName} </h4>
                        <p> {!$Label.Settings_CustomLinksHelp} </p>
                    </div>

                    <!-- Create new object button -->
                    <div id="create-layout-btn">
                        <button type="button" class="btn btn-w-md btn-gap-v btn-warning pull-right"
                                ng-click="createObject()">
                                {!$Label.MS_Create}
                        </button>
                    </div>

                    <!-- Main table -->
                    <div class="row" ng-hide="model.links.length === 0">
                        <div class="col-lg-7 col-md-9 col-sm-12">
                            <div ng-repeat="(key, catItem) in model.categories">
                                <!-- Header -->
                                <div class="page-header">
                                    <h4> {{catItem.name || 'None'}} </h4>
                                </div>

                                <table class="table table-minilayouts">
                                    <thead>
                                        <tr>
                                            <th> Name </th>
                                            <th> Url </th>
                                            <th> IsNavigationEnabled</th>
                                            <th></th>
                                            <th></th>
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <tr ng-repeat="(key, value) in catItem.links">
                                            <!-- Object name -->
                                            <td id="{{value.Id}}"><b>{{value.Name}}</b>
                                                <p>
                                                    <small>{{value.clm__Description__c || 'None'}}</small>
                                                </p>
                                            </td>
                                            <!-- Data object record type -->
                                            <td> {{value.clm__URL__c || 'None'}} </td>
                                            <td>
                                                <label class="switch switch switch-success">
                                                    <input type="checkbox" ng-checked="{{value.clm__IsNavigationEnabled__c}}" ng-disabled="true"/>
                                                    <i></i>
                                                </label>
                                            </td>
                                            <td>
                                                <button class="tooltip-button btn btn-link btn-lg" type="button"
                                                        ng-click="editObject( value )">
                                                        <span class="glyphicon glyphicon-cog"></span>
                                                </button>
                                            </td>

                                            <td>
                                                <button class="tooltip-button btn btn-link btn-lg"
                                                        ng-click="deleteObject( value.Id )" type="button">
                                                        <span class="glyphicon glyphicon-remove"></span>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </form>
            </div>


            <!-- Credentials Tab -->
            <div class="tab-pane" id="Credentials" ng-controller="CredentialsCtrl">
                <script type="text/javascript">
                    var superAdminClicks = 0;

                    function showSuperAdminRights(){
                        superAdminClicks++;
                        if (superAdminClicks > 3){
                            $('#refreshCTMSettings').show()
                        }
                    }
                </script>



                <div class="callout callout-info">
                    <h4 class="ctm-info" onclick="showSuperAdminRights()">{!$Label.Settings_CredentialsFullName}</h4>
                    <p>{!$Label.Settings_CredentialsHelp}</p>
                </div>

                <div class="row">
                    <!-- CREDENTIALS PANEL-->
                    <div class="form-horizontal col-lg-6 col-md-6 col-sm-12">
                        <div class="page-header col-lg-12 col-md-12 col-sm-12">
                            <h4 style="display: inline" onclick="showSuperAdminRights()">{!$Label.Settings_CredentialsFullName}</h4>
                            <!-- <button class="btn btn-link" type="button" ng-click="deleteCreds()">
                                <span class="glyphicon glyphicon-trash" ></span>
                            </button> -->
                        </div>
                        <div class="form-group col-lg-12 col-md-12 col-sm-12">
                            <label class="col-lg-3 col-md-3 col-sm-12 control-label"
                                   tooltip="{!$Objecttype.clm__MobileCredentialData__c.fields.clm__Login__c.InlineHelpText}"
                                   tooltip-placement="right" for="loginLabel">
                                   {!$Objecttype.clm__MobileCredentialData__c.fields.clm__Login__c.label}
                            </label>
                            <div class="col-lg-9 col-md-9 col-sm-12">
                                <input ng-model="cred.clm__Login__c"
                                       class="form-control" required="" id="loginLabel"/>
                            </div>
                        </div>
                        <div class="form-group col-lg-12 col-md-12 col-sm-12">
                            <label class="col-lg-3 col-md-3 col-sm-12 control-label"
                                   tooltip="{!$Objecttype.clm__MobileCredentialData__c.fields.clm__Password__c.InlineHelpText}"
                                   tooltip-placement="right" for="">
                                   {!$Objecttype.clm__MobileCredentialData__c.fields.clm__Password__c.label}
                            </label>
                            <div class="col-lg-9 col-md-9 col-sm-12">
                                <input id="password"  ng-model="cred.clm__Password__c" type="password"
                                       class="form-control" required=""/>
                                       <!-- onkeydown="if(jQuery(this).val().indexOf('******') != -1){ jQuery(this).val(jQuery(this).val().replace('******',''));jQuery('#token').val('') }" /> -->
                                       <!-- onclick="if(jQuery(this).val() == '******'){ jQuery(this).val(''); }"/> -->
                            </div>
                        </div>
                        <div class="form-group col-lg-12 col-md-12 col-sm-12">
                            <label class="col-lg-3 col-md-3 col-sm-12 control-label"
                                   tooltip="{!$Objecttype.clm__MobileCredentialData__c.fields.clm__Token__c.InlineHelpText}"
                                   tooltip-placement="right" for="">
                                   {!$Objecttype.clm__MobileCredentialData__c.fields.clm__Token__c.label}
                            </label>
                            <div class="col-lg-9 col-md-9 col-sm-6">
                                <input id="token"  ng-model="cred.clm__Token__c" type="password"
                                       class="form-control" required=""/>
                                       <!-- onkeydown="if(jQuery(this).val().indexOf('******') != -1){ jQuery(this).val(jQuery(this).val().replace('******','')); jQuery('#password').val('') }" /> -->
                                       <!-- onclick="if(jQuery(this).val() == '******'){ jQuery(this).val(''); }"/> -->
                            </div>
                        </div>
                        <div class="form-group col-lg-12 col-md-12 col-sm-12">

                            <label class="col-lg-3 col-md-3 col-sm-12 control-label"/>


                            <label class="col-lg-3 col-md-3 col-sm-12 control-label"/>
                            <button type="button" class="pull-right btn btn-success"
                                    ng-click="submitData()" 
                                    ng-disabled="checkSaveButton()" >
                                   {!$Label.MS_Save}
                            </button>
                            <button class="btn btn-danger pull-right" ng-click="resetCredentials()" type="button" 
                                ng-show="cred.clm__Login__c != null || cred.clm__Password__c != null || cred.clm__Token__c != null"
                                style="margin-right: 10px;">
                                <!-- TODO сменить на label -->
                               Clear 
                            </button>
                        </div>
                    </div>

                    <!-- CONTENT RESTORE PANEL-->
                    <div class="form-horizontal col-lg-6 col-md-6 col-sm-12" ng-else="isSandbox">
                    </div>

                    <div class="form-horizontal col-lg-6 col-md-6 col-sm-12" id="RemoteDetailing" data-ng-controller="RemoteDetailingCtrl" ng-if="isSandbox">
                        <div class="page-header col-lg-12 col-md-12 col-sm-12">
                            <h4 style="display: inline">{!$Label.MS_ContentRestoreHeader}</h4>
                            <span style="font-size: 23.5px;">&nbsp;</span>
                        </div>

                        <div class="form-group col-lg-12 col-md-12 col-sm-12" ng-show="model.showCopyButton">
                            <label class="control-label col-lg-3 col-md-3 col-sm-12 ng-scope"
                                    tooltip="{!$Label.MS_ProductionIDHelp}"
                                    tooltip-placement="right" for="loginLabel">
                                {!$Label.MS_ProductionIDLabel}
                            </label>

                            <div class="col-lg-7 col-md-7 col-sm-6">
                                <input ng-model="model.productionId"
                                       placeholder="{!$Label.MS_ProductionIDHelp}"
                                       class="form-control ng-pristine ng-valid" required="" id="loginLabel"/>
                            </div>

                            <button class="pull-right btn btn-success" ng-click="copyApplications()" type="button"
                                    ng-disabled="model.productionId.length != 18 && model.productionId.length != 15">
                                {!$Label.MS_CopyApplicationButton}
                            </button>
                        </div>
                        <div class="form-group col-lg-12 col-md-12 col-sm-12" ng-hide="model.showCopyButton">
                            <div class="progress">
                              <div class="progress-bar" role="progressbar" aria-valuenow="model.progress" aria-valuemin="0" aria-valuemax="100" ng-style="{ 'width': model.progress + '%' }">
                                {{model.progress}}%
                              </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <!-- ADDITIONAL SETTINGS PANEL-->
                    <div class="form-horizontal col-lg-6 col-md-6 col-sm-12">
                        <div class="page-header col-lg-12 col-md-12 col-sm-12">
                            <h4 style="display: inline">{!$Label.MS_AdditionalSettingsHeader}</h4>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-lg-3 col-md-3 col-sm-12"
                                   tooltip="{!$Label.MetadataScheduler_Help}"
                                   tooltip-placement="right" for="">
                                {!$Label.MetadataScheduler}
                            </label>
                            <div class="col-lg-7 col-md-7 col-sm-12">
                                <label class="switch switch-success"><input ng-model="MetadataCheckerEnabled" type="checkbox" ng-change="changeMetadataChecker()" ng-disabled="MetadataSaving===true || sceduleModifyNotAllowed === false" /><i></i></label>
                            </div>
                        </div>
                        <div class="form-group col-lg-12 col-md-12 col-sm-12">
                            <label class="control-label col-lg-3 col-md-3 col-sm-12 ng-scope"
                                    tooltip="{!$Label.MS_CloudTokenHelp}"
                                    tooltip-placement="right">
                                {!$Label.MS_CloudToken}
                            </label>

                            <div class="col-lg-7 col-md-7 col-sm-6">
                                <input class="form-control ng-pristine ng-valid" disabled="true" ng-model="org_token" />
                            </div>

                            <button style="" class="pull-right btn btn-success" ng-click="refreshToken()" type="button">
                                {!$Label.MS_RefreshCloudToken}
                            </button>
                        </div>
                    </div>

                    <!-- DROP ZONE PANEL-->
                    <div class="form-horizontal col-lg-6 col-md-6 col-sm-12">
                        <div class="page-header col-lg-12 col-md-12 col-sm-12">
                            <h4 style="display: inline">{!$Label.MS_ResetSettingsHeader}</h4>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-lg-6 col-md-6 col-sm-6">
                                {!$Label.MS_ResetSettingsHelp}
                            </label>
                            <div class="col-lg-6 col-md-6 col-sm-6">
                                <button class="btn btn-danger" ng-click="deleteSettings()" type="button">
                                    {!$Label.MS_ResetSettingsButton}
                                </button>
                            </div>
                        </div>

                        <div id="refreshCTMSettings" class="form-group" style="display: none">
                            <label class="control-label col-lg-6 col-md-6 col-sm-6">
                                Refresh CTM Settings
                            </label>
                            <div class="col-lg-6 col-md-6 col-sm-6">
                                <button class="btn btn-danger" onclick="if (confirm('Are you sure you want to refresh CTM Settings?')) { transferRLFandTopLVLObjectsToCustomObject() }" type="button">
                                    Refresh CTM Settings
                                </button>
                            </div>
                        </div>


                    </div>
                </div>
            </div>


            <!-- Live Tiles Tab -->
            <div class="tab-pane" id="Workflows" ng-controller="workflowsController">
                <apex:form styleClass="form-horizontal form-validation">
                    <style type="text/css">
                        #Workflows .tooltip{
                            display: none !important;
                        }
                        #Workflows .tooltip.top{
                            display: none !important;
                        }
                        #Workflows .tooltip.top.fade{
                            display: none !important;
                        }
                    </style>
                    <!-- Information -->
                    <div class="callout callout-info ctm-pos-rel"> 
                        <h4 class="ctm-info">{!$Objecttype.clm__Workflow__mdt.labelPlural}</h4>
                        <p>{!$Label.MS_WorkflowTitleHelp}</p>
                    </div>

                    <div id="create-layout-btn">
                        <button type="button" class="btn btn-w-md btn-gap-v btn-warning pull-right" 
                                ng-click="launchCreateWorkFlowModal(null, 'clm__Workflow__mdt')">
                                {!$Label.MS_Create}
                        </button>
                    </div>


                    <!-- Main table -->
                    <div class="row" ng-hide="model.workflows.length === 0">
                        <div class="col-lg-7 col-md-9 col-sm-12">
                            <div ng-repeat="item in models.workflows">
                                 <!-- Header -->
                                <div ng-init="item.clickedh=false" ng-click="item.clickedh=!item.clickedh"  class="page-header row" style="vertical-align: bottom;
                                                                    border-bottom: 2px solid #ddd;
                                                                    border-bottom-width: 2px;
                                                                    border-bottom-style: solid;
                                                                    border-bottom-color: rgb(221, 221, 221);" > <!--ng-click="updateRelatedStepsByClick(item)"-->
                                    <div class="col-xs-8" style="cursor: pointer;">
                                        <h4 tooltip="                    
                                            {!$Objecttype.clm__Workflow__mdt.fields.DeveloperName.label}: {{ item.DeveloperName }}, 
                                            {!$Objecttype.clm__Workflow__mdt.fields.clm__Description__c.label}: {{item.clm__Description__c}},  
                                            {!$Objecttype.clm__Workflow__mdt.fields.clm__IsActive__c.label}: {{item.clm__IsActive__c}} ">
                                            {{item.Label}}
                                        </h4>  
                                        <h4 class="text-muted"> 
                                            <small>
                                                {{item.clm__Description__c}}
                                            </small>
                                        </h4>
                                    </div>
                                    <button class="tooltip-button btn btn-link btn-lg col-xs-1" type="button" 
                                            ng-click="launchCreateWorkFlowModal(item, 'clm__WorkflowStep__mdt'); item.clickedh=!item.clickedh"
                                            style="pointer-events: all;">
                                            <span class="glyphicon glyphicon-plus"></span>
                                    </button>
                                    <button class="tooltip-button btn btn-link btn-lg col-xs-1" type="button" 
                                            ng-click="launchCreateWorkFlowModal(item, 'clm__Workflow__mdt'); item.clickedh=!item.clickedh">
                                            <span class="glyphicon glyphicon-cog"></span>
                                    </button>
                                    <button class="tooltip-button btn btn-link btn-lg col-xs-1"
                                            ng-really-message="{!$Label.MS_DeleteSettingWarning}" 
                                            ng-really-click="removeElement( 'clm__Workflow__mdt' , item.DeveloperName ); item.clickedh=!item.clickedh" 
                                            type="button">
                                            <span class="glyphicon glyphicon-remove"></span>
                                    </button>
                                </div>


                                <ul ng-show="item.clickedh" class="fadein fadeout" dnd-list="models.workflowstepsbyflow[item.DeveloperName]"
                                    dnd-inserted="AfterInsertActionsNew(item, false, index, event, item.DeveloperName)" style="cursor: pointer; padding: 0; list-style-type: none;">


                                    <li ng-repeat="step in models.workflowstepsbyflow[item.DeveloperName] | orderBy:'clm__Order__c' "
                                        dnd-draggable="step" 
                                        dnd-moved="" 
                                        style="list-style-type: none;" 
                                        >
                                        <dnd-nodrag>
                                            <div class="row" style="list-style-type: none;
                                                                    padding: 10px;
                                                                    line-height: 1.42857;
                                                                    vertical-align: middle;
                                                                    border-bottom: 1px solid #ddd;"> 
                                                  <div dnd-handle="true" class="handle col-xs-2">::: {{step.Label}} </div> 
                                                  <!-- <div class="col-xs-2"> {{step.DeveloperName}} </div> -->
                                                  <div class="col-xs-4">{{step.clm__Action__c}}</div>
                                                  <div class="col-xs-3">{{step.clm__Scope__c}}</div>
                                                  <div class="col-xs-1" style="margin-left: 2%;"> 
                                                        <button style="pointer-events: all;" 
                                                                class="tooltip-button btn btn-link btn-lg col-xs-4" type="button" 
                                                                ng-click="launchCreateWorkFlowModal(item, 'clm__WorkflowStep__mdt', step)">
                                                                <span class="glyphicon glyphicon-cog"></span>
                                                        </button>
                                                  </div>
                                                  <div class="col-xs-1">  
                                                        <button style="pointer-events: all;" 
                                                                class="tooltip-button btn btn-link btn-lg"
                                                                ng-really-message="{!$Label.MS_DeleteSettingWarning}" 
                                                                ng-really-click="removeElement( 'clm__WorkflowStep__mdt' , step.DeveloperName )" 
                                                                type="button">
                                                                <span class="glyphicon glyphicon-remove"></span>
                                                        </button>
                                                  </div>
                                            </div>
                                        </dnd-nodrag>
                                    </li>

                                </ul> 
                            </div>
                        </div>
                    </div>
                </apex:form>
            </div>

            
            <!-- Download Tab -->
            <div class="tab-pane" id="Download">

                    <div class="callout callout-info">
                        <h4 class="ctm-info">{!$Label.Settings_DownloadFullname}</h4>
                        <p>{!$Label.Settings_DownloadHelp}</p>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="ipad-url">
                                <a href="{!AppInstallURL}">{!AppInstallURL}</a>
                            </div>
                        </div>
                    </div>

            </div>


            <!-- Live Tiles Tab -->
            <div class="tab-pane" id="LiveTiles" ng-controller="MainCtrl">
               
                <div class="callout callout-info ctm-pos-rel">
                    <!-- Open info slider icon -->
                    <span class="glyphicon glyphicon-question-sign ctm-pos-abs forms-info-icon"
                          ng-click="openInfoSliderModal()"></span>
                    <!-- Header and body of the form info -->
                    <h4 class="ctm-info"> LiveTile </h4>
                    <p> LiveTile</p>
                </div>

                <div class="container">
                    <div class="demo-container">

                        <div class="page-header my-gridster">
                            <div class="col-md-4 form-group">
                                <div class="form-horizontal">
                                    <div class="form-group">
                                        <label class="col-md-2 control-label" for="profiles">
                                            Profile:
                                        </label>
                                        <div class="col-md-offset-1 col-md-9 my-select">
                                            <div class="my-arrow-1">
                                                <select id="profiles" class="selectpicker form-control"  ng-model="selectedProfileId" ng-options="p.Id as p.Name for p in profiles" ng-change="changeShow()">
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-offset-6 col-md-2">
                                <a class="btn btn-warning" ng-click="addWidget()"><i class="glyphicon glyphicon-plus"></i>Add Element</a>
                            </div>
                        </div>

                        <div gridster="gridsterOpts">
                            <ul>
                                <li gridster-item="customItemMap" ng-repeat="item in customItems" ng-show="item.profile.id == selectedProfileIdForHomePage">
                                    <div class="box-header-btns pull-right">
                                        <a class="btn" title="Remove widget" ng-click="remove(item)"><i class="glyphicon glyphicon-trash"></i></a>
                                    </div>
                                    <div class="form-group my-select" >
                                        <label for="sel1">Widget ({{ item.size.x }}x{{ item.size.y }}):</label>
                                        <div class="sizes"> Max size: {{ showAllowSizes( item, selectedWidget ,'max' ) }}; min size: {{ showAllowSizes( item, selectedWidget, 'min' ) }} </div>
                                        <div class="my-arrow-2">
                                            <select class="selectpicker form-control" ng-model="selectedWidget" ng-change="update(item, item.widget.id, selectedWidget)">
                                                <option value="report" ng-selected="item.widget.type == 'report'">Report</option>
                                                <option value="dashboard" ng-selected="item.widget.type == 'dashboard'">Dashboard</option>
                                                <option value="calendarWeekCarousel" ng-selected="item.widget.type == 'calendarWeekCarousel'">Calendar Week Carousel</option>
                                                <option value="logo" ng-selected="item.widget.type == 'logo'">Logo</option>
                                            </select>
                                        </div>
                                        <div class="my-arrow-2" ng-show="showSelect(selectedWidget, item.widget.type, 'report')">
                                            <select class="selectpicker form-control" ng-model="item.widget.id" ng-change="update(item, item.widget.id)" ng-show="showSelect(selectedWidget, item.widget.type, 'report')">
                                                <option ng-repeat="w in widgets" ng-selected="w.id == item.widget.id" value="{{w.id}}" ng-if="w.type == 'report'">
                                                    {{w.name}}
                                                </option>
                                            </select>
                                        </div>
                                        <div class="my-arrow-2" ng-show="showSelect(selectedWidget, item.widget.type, 'dashboard')">
                                            <select class="selectpicker form-control" ng-model="item.widget.id" ng-change="update(item, item.widget.id)" ng-show="showSelect(selectedWidget, item.widget.type, 'dashboard')">
                                                <option ng-repeat="w in widgets" ng-selected="w.id == item.widget.id" value="{{w.id}}" ng-if="w.type == 'dashboard'">
                                                    {{w.name}}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="item-inner">
                                        <icon-generator type="item.widget" select="selectedWidget"></icon-generator>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="ctm-save-panel">
                    <button type="button" ng-click="submitData()" class="btn btn-success btn-lg ctm-next-btn">
                        {!$Label.MS_Save}
                    </button>
                </div>

            </div>

        </div>

    </div>

    <span us-spinner="{ lines: 17, radius: 12, width: 2, length: 2}" spinner-key="spinner-1"></span>

    <apex:form >
        <apex:actionFunction action="{!getNewToken}" name="getNewToken" rerender=""/>
        <apex:actionFunction action="{!transferRLFandTopLVLObjectsToCustomObject}" name="transferRLFandTopLVLObjectsToCustomObject" rerender="none" oncomplete="console.log('completed'); window.location.reload();"/>
    </apex:form>

    <script>
        /**
         * Accepts path string and embed chain of nested objects  (namespaces)
         * into global object.
         * @param {String} path - namespace path, splited by ".".
         * Example:
         *     var yourNamespace = ns( 'yourNamespace' );
         * You can create meta-namespaces then:
         *     var exampleTools = ns( 'yourNamespace.exampleTools' );
         */
        'use strict';
        if ( !window.ns )
        window.ns = function namespace ( path ) {
            if ( !path || (typeof path !== "string") )
                return;
            var tokens = path.split( '.' )
              , current = window;
            for ( var i = 0, len = tokens.length; i < len; i++ ) {
                var currToken = tokens[ i ];
                current[ currToken ] = current[ currToken ] || {};
                current = current[ currToken ];
            }
            return current;
        };
        // Init CTM namespace.
        var CTM = ns( 'CTM' );
        var lang = ns( 'CTM.lang' );
        CTM.sessionId = "{!$Api.Session_ID}";
        CTM.baseUrl = "{!baseUrl}";
        CTM.getObjectsFromPage = {!getObjectsFromPage};
        CTM.restVersion = "v47.0";
        CTM.soapVersion = "36.0";
        CTM.OrgId = "{!CASESAFEID($Organization.Id)}";
        CTM.isSandbox = {!IsSandbox};
        CTM.allowCreateMetadata = {!allowCreateMetadata}
        CTM.apexAvailableObjects = {!availableObjects};
        CTM.AvailableObjectsWithParam = {!AvailableObjectsWithParams};
        CTM.ModifyAllDataPermission = {!ModifyAllDataPermission};
        CTM.apexLabels = {!Labels};
        CTM.soapNames = {!SoapNames};
        // Objects profile options for dropdown.
        CTM.apexObjectsProfileOptions = {!ProfileSelect};
        CTM.apexObjectsProfileTopOptions = {!ProfileSelectTop};
        CTM.quizInstalled = {!isQuiz};
        CTM.prefixesArray = {!Prefixes};
        CTM.cloud_url = '{!cloud_url}';
        CTM.cloud_token = '{!cloud_token}';
        CTM.lang = {
            MS_ActDataSettName: "{!$Label.MS_ActDataSettName}",
            MS_None: "{!$Label.MS_None}",
            clm__SObject__c: "{!$Objecttype.clm__MobileLayoutSettings__c.fields.clm__SObject__c.label}",
            MS_MLS_RecordType: "{!$Label.MS_MLS_RecordType}",
            MS_CreateLayout: "{!$Label.MS_CreateLayout}",
            clm__RequiredAttribute__c: '{!$Objecttype.clm__MobileLayoutSettings__c.fields.clm__RequiredAttribute__c.label}',
            MS_AddNewField: "{!$Label.MS_AddNewField}",
            MS_MLS_Field: "{!$Label.MS_MLS_Field}",
            MS_Create: "{!$Label.MS_Create}",
            MS_Close: "{!$Label.MS_Close}",
            MS_EditLayout: "{!$Label.MS_EditLayout}",
            MS_SaveThisSettings: "{!$Label.MS_SaveThisSettings}",
            MS_Save: "{!$Label.MS_Save}",
            MS_CreateMenuItem: "{!$Label.MS_CreateMenuItem}",
            MS_AdditionalSettingsHeader: "{!$Label.MS_AdditionalSettingsHeader}",
            MS_ResetSettingsAlert: "{!$Label.MS_ResetSettingsAlert}",
            MS_SuccessfullySaved: "{!$Label.MS_SuccessfullySaved}",
            MS_SaveError: "{!$Label.MS_SaveError}",
            MS_ErrorExistingElement: "{!$Label.MS_ErrorExistingElement}",
            MS_CreateRelations: "{!$Label.MS_CreateRelations}",
            MS_CreateRelationsHeader: "{!$Label.MS_CreateRelationsHeader}",
            MS_FieldFound: "{!$Label.MS_FieldFound}",
            MS_CreateNewField: "{!$Label.MS_CreateNewField}",
            MS_Use: "{!$Label.MS_Use}",
            MS_SoqlQueryFilter:"{!$Label.MS_TOP_SOQLFilter}",
            MS_AppMenuCalendarTip: "{!$Label.MS_AppMenuCalendarTip}",
            MS_AppMenuRoutesTip: "{!$Label.MS_AppMenuRoutesTip}",
            MS_AppMenuQuizzesTip: "{!$Label.MS_AppMenuQuizzezTip}",
            MS_AppMenuApplicationsTip: "{!$Label.MS_AppMenuApplicationsTip}",
            MS_AppMenuDashboardsTip: "{!$Label.MS_AppMenuDashboardsTip}",
            MS_AppMenuNearbyAccountsTip: "{!$Label.MS_AppMenuNearbyAccountsTip}",
            MS_AppMenuRecentTip: "{!$Label.MS_AppMenuRecentTip}",
            MS_AppMenuChatterTip: "{!$Label.MS_AppMenuChatterTip}",
            MS_AppMenuAddCustom: "{!$Label.MS_AM_AddCustom}",
            MS_AppMenuAddCustomTip: "{!$Label.MS_AM_AddCustomTip}",
            MS_DeleteSettingWarning: "{!$Label.MS_DeleteSettingWarning}",
            NeedQuizInstall: "{!$Label.NeedQuizInstall}",
            MS_AppMenuContentTip: "{!$Label.MS_AppMenuContentTip}",
            MS_AppMenuCalendarItem: "{!$Label.MS_AppMenuCalendarItem}",
            MS_AppMenuRoutesItem: "{!$Label.MS_AppMenuRoutesItem}",
            MS_AppMenuQuizzezItem: "{!$Label.MS_AppMenuQuizzezItem}",
            MS_AppMenuApplicationsItem: "{!$Label.MS_AppMenuApplicationsItem}",
            MS_AppMenuDashboardsItem: "{!$Label.MS_AppMenuDashboardsItem}",
            MS_AppMenuContentItem: "{!$Label.MS_AppMenuContentItem}",
            MS_AppMenuNearbyAccountsItem: "{!$Label.MS_AppMenuNearbyAccountsItem}",
            MS_AppMenuRecentItem: "{!$Label.MS_AppMenuRecentItem}",
            MS_AppMenuChatter: "{!$Label.MS_AppMenuChatter}",
            MS_FilterLogic: "{!$Label.MS_FilterLogic}",
            MS_NewCriteria: "{!$Label.MS_NewCriteria}",
            MS_ShowAppLauncher: "{!$Label.MS_ShowAppLauncher}",
            MS_ReadOnly: "{!$Label.MS_ReadOnly}",
            MS_OperatorLabel: "{!$Label.MS_OperatorLabel}",
            //LinkLists
            MS_AppMenuLinkList: "{!$Label.Settings_LinkList}",
            MS_AppMenuLinkListTip: "{!$Label.Settings_LinkListTip}",
            MS_AppMenuLinkCreateLinkHeader: "{!$Label.Settings_CreateCustomLinkHeader} ",
            MS_AppMenuLinkEditLink: "{!$Label.Settings_EditLinkHeader}",
            MS_AppMenuLinkPopupDescription: "{!$Label.Settings_Popup_Description}",
            MS_AppMenuLinkUrl: "{!$Label.Settings_LinkList_Url}",
            MS_AppMenuLinkNav: "{!$Label.Settings_LinkList_Nav}",
            MS_AppMenuLinkObjectName: "{!$Label.Settings_ObjectName}",
            MS_AppMenuLinkCreateCatHeader: "{!$Label.Settings_CreateCategoryHeader}",
            MS_AppMenuLinkEditCatHeader: "{!$Label.Settings_EditCategoryHeader}",
            MS_AppMenuLink: "{!$Label.Settings_LinkListTip}",
            MS_AppMenuLinkName: "{!$Label.Setting_LinkName}",
            MS_AppMenuConfirmDelete: "{!$Label.Settings_ConfirmDelete}",
            MS_TOP_SOQLFilter: "{!$Label.MS_TOP_SOQLFilter}",
            MS_QueryEditor: "{!$Label.MS_QueryEditor}",
            MS_Add: "{!$Label.MS_AddButton}",
            //OrderModule
            MS_AppMenuOrder: "{!$Label.Settings_Orders}",
            MS_AppMenuOrderModuleTip: `{!$Label.Settings_OrdersTip}`,
            // Using in Custom Details.
            parentObject:     "{!$Label.MS_ADC_ParentObjectName}",
            parentRecordType: "{!$Label.MS_ADC_ParentRecordType}",
            dataObject:       "{!$Label.MS_ADC_DataObjectName}",
            dataRecordType:   "{!$Label.MS_ADC_DataRecordType}",
            lookupField:      "{!$Label.MS_ADC_LookupField}",
            createAllowed:    "{!$Label.MS_TOP_CreateAllowed}",
            deleteAllowed:    "{!$Label.MS_TOP_DeleteAllowed}",
            drillDownEnabled: "{!$Label.MS_TOP_DrillDownEnabled}",
            CreateMobCustom:  "{!$Label.CreateMobCustom}",
            TypeNameHere:     "{!$Label.TypeNameHere}",
            Color:            "{!$Label.Color}",
            Value:            "{!$Label.Value}",
            MS_OO_TabQueryEditor:     "{!$Label.MS_OO_TabQueryEditor}",
            MS_OO_DisplayAsTree:      "{!$Label.MS_OO_DisplayAsTree}",
            MS_OO_TabDisplaySettings: "{!$Label.MS_OO_TabDisplaySettings}",
            header:  "{!$Label.MS_DeleteActivity_header}",
            message: "{!$Label.MS_DeleteActivity_message}",
            CloseBtn: "{!$Label.MS_DeleteActivity_CancelBtn}",
            SaveBtn: "{!$Label.MS_DeleteActivity_OkBtn}",
            CredentialsTab: "{!$Label.Settings_CredentialsTabName}",
            MS_HomeMenuItem: "{!$Label.MS_HomeMenuItem}",
            MS_BackgroundLocation: "{!$Label.MS_BackgroundLocation}",
            MS_TrackingLabel: "{!$Label.MS_TrackingLabel}", 
            MS_WorkflowCreateHeader : "{!$Label.MS_WorkflowCreateHeader}",
            MS_WorkflowUpdateHeader : "{!$Label.MS_WorkflowUpdateHeader}",
            MS_FieldValueAdd: `{!$Label.MS_FieldValueAdd}`,
            MS_StepFieldsNamesHeader: `{!$Objecttype.clm__WorkflowStep__mdt.fields.clm__FieldAPIName__c.label}`,
            MS_StepFieldsValueHeader:`{!$Objecttype.clm__WorkflowStep__mdt.fields.clm__FieldValue__c.label}`,
            MS_StepUpdateHeader: `{!$Label.MS_StepUpdateHeader}`,
            MS_CreateStepHeader: `{!$Label.MS_CreateStepHeader}`,
            MS_Configured: `{!$Label.MS_Configured}`,
            MS_NotConfigured: `{!$Label.MS_NotConfigured}`,
            MS_Profile_Select_Header: `{!$Label.MS_Profile_Select_Header}`,
            MS_TOP_CopySetting : `{!$Label.MS_TOP_CopySetting}`,
            MS_Please_select_profile: `{!$Label.MS_Please_select_profile}`,
            MS_ProfileSelectDescr: `{!$Label.MS_ProfileSelectDescr}`,
            MS_Workflow_label: `{!$Objecttype.clm__Workflow__mdt.labelPlural}`,
            MS_WorkflowStep_label: `{!$Objecttype.clm__WorkflowStep__mdt.labelPlural}`,
            MS_ShowHideFields : `{!$Label.MS_ShowHideFields}`,
            Settings_GeneralTabName: `{!$Label.Settings_GeneralTabName}`,
            MS_WF_General: `{!$Label.MS_WF_General}`,
            MS_WF_Additional: `{!$Label.MS_WF_Additional}`,
            MS_WF_FromPicklist: `{!$Label.MS_WF_FromPicklist}`,
            MS_WF_OwnValue: `{!$Label.MS_WF_OwnValue}`,
            MS_WF_Change: `{!$Label.MS_WF_Change}`,
            MS_WF_buttonAPI_ActivityHistory: `{!$Label.MS_WF_buttonAPI_ActivityHistory}`,
            MS_WF_buttonAPI_CreatingButton: `{!$Label.MS_WF_buttonAPI_CreatingButton}`,
            MS_WF_buttonAPI_ChatterButton: `{!$Label.MS_WF_buttonAPI_ChatterButton}`,
            MS_WF_buttonAPI_ConvertButton: `{!$Label.MS_WF_buttonAPI_ConvertButton}`,
            MS_WF_buttonAPI_DocGeneratorButton: `{!$Label.MS_WF_buttonAPI_DocGeneratorButton}`,
            MS_WF_buttonAPI_FinishOnActivity: `{!$Label.MS_WF_buttonAPI_FinishOnActivity}`,
            MS_WF_buttonAPI_ComboMenuGeoposButton: `{!$Label.MS_WF_buttonAPI_ComboMenuGeoposButton}`,
            MS_WF_buttonAPI_SendByMailButton: `{!$Label.MS_WF_buttonAPI_SendByMailButton}`,
            MS_WF_buttonAPI_CallingScannerIcon: `{!$Label.MS_WF_buttonAPI_CallingScannerIcon}`,
            MS_WF_buttonAPI_CollectSignatureButton: `{!$Label.MS_WF_buttonAPI_CollectSignatureButton}`,
            MS_WF_buttonAPI_ButtonSwitch: `{!$Label.MS_WF_buttonAPI_ButtonSwitch}`,
            MS_WF_buttonAPI_StartButton: `{!$Label.MS_WF_buttonAPI_StartButton}`,
            MS_WF_buttonAPI_ScreenCaptureButton: `{!$Label.MS_WF_buttonAPI_ScreenCaptureButton}`,
            MS_WF_OwnValueButtonName: `{!$Label.MS_WF_OwnValueButtonName}`,
            MS_AdvancedSearch: `{!$Label.MS_AdvancedSearch}`,
            MS_Cancel: `{!$Label.MS_Cancel}`,
            MS_BaseImage: `{!$Label.BaseImage}`,
            MS_DeviceCustomizationButton: `{!$Label.MS_DeviceCustomizationButton}`,
            MS_DeviceCustomizationTitle: `{!$Label.MS_DeviceCustomizationTitle}`,
            MS_TitlePattern: `{!$Label.MS_TitlePattern}`,
            MS_HomePattern: `{!$Label.MS_HomePattern}`,
            MS_DeviceBackgroundColor: `{!$Label.MS_DeviceBackgroundColor}`,
            MS_Load: `{!$Label.MS_Load }`, 
            MS_PatternNum: `{!$Label.MS_PatternNum}`,
            MS_Phone: `{!$Label.MS_Phone}`,
            MS_Tablet: `{!$Label.MS_Tablet}`,
            MS_HomePageLogo: `{!$Label.HomepageLogo}`,
            MS_Extension: `{!Panel_Extension_Label}`,
            MS_AdjustWidth: `{!$Label.MS_AdjustWidth}`, 
            MS_Width: `{!$Label.MS_Width}`,
            MS_RDHeader: `{!$Label.MS_RDHeader}`,
            MS_RDHEaderTip: `{!$Label.MS_RDHEaderTip}`,
            MS_RDSettings: `{!$Label.MS_RDSettings}`,
            MS_AddClmPresentations: `{!$Label.MS_AddClmPresentations}`,
            MS_SpecifyConds: `{!$Label.MS_SpecifyConds}`,
            MS_RDActive: `{!$Label.MS_RDActive}`,
            MS_RDAvailable: `{!$Label.MS_RDAvailable}`,
            MS_NumberPres: `{!$Label.MS_NumberPres}`,
            MS_SendBtn: `{!$Label.MS_SendBtn}`,
            MS_DontCloseWindow: `{!$Label.MS_DontCloseWindow}`,
            MS_RDSent: `{!$Label.MS_RDSent}`,
            MS_RDSuccessfullySent: `{!$Label.MS_RDSuccessfullySent}`,
            MS_RDErrors: `{!$Label.MS_RDErrors}`,
            MS_SendOperationFinished: `{!$Label.MS_SendOperationFinished}`


        };
        CTM.createDetailingButtons =  function(objApiName){
//            var objApiName = 'clm__Application__c';
            Visualforce.remoting.Manager.invokeAction(
                '{!$RemoteAction.SettingsController.createDetailingButtons}',
                objApiName,
                function(result, event){
                    alert(result)
                }
            );
        }
        //CTM.newTokenRequest = getNewToken;
        CTM.deleteSettingAction = '{!$RemoteAction.SettingsController.deleteSettings}';

        CTM.newTokenRequest =  function(callback){
            Visualforce.remoting.Manager.invokeAction(
                '{!$RemoteAction.SettingsController.getNewToken}',
                function(result, event){
                    callback();
                }
            );
        }
        CTM.createRDButtonAndFieldSetFuture = function(objApiName) {
            Visualforce.remoting.Manager.invokeAction(
                '{!$RemoteAction.SettingsController.createRDButtonAndFieldSetFuture}',
                objApiName,
                function(result, event){
                    //alert(result)
                } 
            );
        }

        CTM.extensionTabUrl = '{!extensionTabUrl}';
        CTM.synchRecoveryList = {!synchRecoveryList};

        if (CTM.isSandbox){
             document.getElementById('refreshCTMSettings').style.display = '' //показываем кнопку переноса настроек на песочнице
        }
    </script>

    <script src="scripts/vendor.js"></script>

    <script src="scripts/ui.js"></script>

    <script src="scripts/app.js"></script>

</body>
</html>

</apex:page>