<messaging:emailTemplate subject="A MFM PO-{!RelatedTo.Name} Application is pending for approval â€“ PO Amount: {!RelatedTo.ASI_MFM_JP_PO_Amount__c} ({!RelatedTo.ASI_MFM_Currency__c})" recipientType="User" relatedToType="ASI_MFM_PO__c"><messaging:htmlEmailBody ><html>    <body>    <p>Please note the following MFM PO Application is waiting for your approval. Kindly refer attached PDF report for the more details.  </p>  <table>            <tr>                <td>                    PO Number:                 </td>                <td>{!RelatedTo.Name} </td>            </tr>            <tr>                <td>                    PO Currency:                 </td>                <td>{!RelatedTo.ASI_MFM_Currency__c}</td>            </tr>            <tr>                <td>                    PO Amount:                 </td>                <td>                    <apex:outputText value="{0, number, ###,##0.00}">                        <apex:param value="{!RelatedTo.ASI_MFM_PO_Amount__c}"/>                    </apex:outputText>                </td>            </tr>             <tr>                <td>                    Exchange Rate:                 </td>                <td>                    {!RelatedTo.ASI_MFM_Exchange_Rate__c}                 </td>            </tr>            <tr>                <td>                    Supplier Name:                 </td>                <td>                    {!RelatedTo.ASI_MFM_Supplier_Name__r.name}                 </td>            </tr>             <tr>                <td>                    Supplier Address:                 </td>                <td>                    {!RelatedTo.ASI_MFM_Supplier_Address_Line_1__c} &nbsp;{!RelatedTo.ASI_MFM_Supplier_Address_Line_2__c} &nbsp;{!RelatedTo.ASI_MFM_Supplier_Address_Line_3__c} &nbsp;{!RelatedTo.ASI_MFM_Supplier_Address_Line_4__c}                 </td>            </tr>            <tr>                <td>                PO Start Date:                 </td>                <td>                   <apex:outputText value="{0,date,dd/MM/yyyy}">                           <apex:param value="{!RelatedTo.ASI_MFM_PO_Start_Date__c}" />                   </apex:outputText>                </td>            </tr>            <tr>                <td>                    PO End Date:                 </td>                <td>                    <apex:outputText value="{0,date,dd/MM/yyyy}">                           <apex:param value="{!RelatedTo.ASI_MFM_PO_End_Date__c}" />                   </apex:outputText>                 </td>            </tr>            <tr>                <td>                    Promotion Plan :</td><td> {!RelatedTo.ASI_MFM_Plan__r.name} &nbsp; {!RelatedTo.ASI_MFM_Sys_Plan_Name__c}                </td>            </tr>            <tr>                <td>                Plan Current Amount: </td>                <td>                    <apex:outputText value="{0, number, ###,##0.00}">                        <apex:param value="{!RelatedTo.ASI_MFM_Sys_Plan_Amount__c}"/>                    </apex:outputText>                 ({!RelatedTo.ASI_MFM_Plan__r.ASI_MFM_Currency__c})</td>            </tr>            <tr>                <td>                    PO Amount Amount:</td><td>                     <apex:outputText value="{0, number, ###,##0.00}">                        <apex:param value="{!RelatedTo.ASI_MFM_Base_Currency_Amount__c}"/>                    </apex:outputText>                    ({!RelatedTo.ASI_MFM_Plan__r.ASI_MFM_Currency__c} Equivalent)                 </td>            </tr>            <tr>                <td>                    Cumulative PO Amount:</td><td>                     <apex:outputText value="{0, number, ###,##0.00}">                        <apex:param value="{!RelatedTo.ASI_MFM_Plan__r.ASI_MFM_Total_PO_Amount__c}"/>                    </apex:outputText>                    ({!RelatedTo.ASI_MFM_Plan__r.ASI_MFM_Currency__c} Equivalent)                 </td>            </tr>            <tr>                <td>                    Remaining Amount:</td>                <td>                     <apex:outputText value="{0, number, ###,##0.00}">                        <apex:param value="{!RelatedTo.ASI_MFM_Sys_Plan_Balance__c}"/>                    </apex:outputText>                    ({!RelatedTo.ASI_MFM_Plan__r.ASI_MFM_Currency__c} Equivalent)                 </td>            </tr>             <tr>                <td colspan="2">                    {!if(isBlank(RelatedTo.ASI_MFM_Sys_Reject_Comments__c), null, "Previous Reject Comments: ")} {!RelatedTo.ASI_MFM_Sys_Reject_Comments__c}                 </td>            </tr>            </table>   <p>To approve the MFM PO, click this <apex:outputLink value="{!LEFT($Api.Partner_Server_URL_140, FIND('.com/',$Api.Partner_Server_URL_140)+3)}/{!RelatedTo.id}">              link        </apex:outputLink> or by reply this email with keywords - APPROVE, YES, REJECT, NO.</p>        <tr>            <td colspan='2'>                <c:ASI_MFM_JP_AttachmentList ParentIDAtt="{!relatedto.id}" SObjectNameAtt="ASI_MFM_PO"/>            </td>        </tr></body></html></messaging:htmlEmailBody><messaging:attachment renderAs="PDF"  filename="{!RelatedTo.name}">    <c:ASI_MFM_TR_PO_PDF_Component po_id="{!RelatedTo.Id}" /></messaging:attachment></messaging:emailTemplate>