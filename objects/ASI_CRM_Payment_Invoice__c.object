<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>Accept</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Accept</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Accept</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <content>ASI_CRM_JP_InvoiceRedirectPage</content>
        <skipRecordTypeSelect>false</skipRecordTypeSelect>
        <type>Visualforce</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <allowInChatterGroups>false</allowInChatterGroups>
    <compactLayoutAssignment>SYSTEM</compactLayoutAssignment>
    <deploymentStatus>Deployed</deploymentStatus>
    <description>ASI CRM JP - Payment Invoice</description>
    <enableActivities>false</enableActivities>
    <enableBulkApi>true</enableBulkApi>
    <enableFeeds>false</enableFeeds>
    <enableHistory>true</enableHistory>
    <enableLicensing>false</enableLicensing>
    <enableReports>true</enableReports>
    <enableSearch>true</enableSearch>
    <enableSharing>true</enableSharing>
    <enableStreamingApi>true</enableStreamingApi>
    <externalSharingModel>Private</externalSharingModel>
    <fields>
        <fullName>ASI_CRM_A_P_Cash_Invoice_Amount__c</fullName>
        <externalId>false</externalId>
        <formula>ASI_CRM_Total_Invoice_Amount__c -  ASI_CRM_Rebate_Invoice_Amount__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>A&amp;P Cash Invoice Amount</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_A_P_Cash_Tax_Amount__c</fullName>
        <externalId>false</externalId>
        <formula>ASI_CRM_A_P_Cash_Invoice_Amount__c -  ASI_CRM_A_P_Cash_Taxable_Amount__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>A&amp;P Cash Tax Amount</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_A_P_Cash_Taxable_Amount__c</fullName>
        <externalId>false</externalId>
        <formula>ASI_CRM_Total_Taxable_Amount__c -  ASI_CRM_Rebate_Taxable_Amount__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>A&amp;P Cash Taxable Amount</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_Accounting_Review__c</fullName>
        <externalId>false</externalId>
        <formula>ISPICKVAL(ASI_CRM_Status__c , &quot;Verified by SA&quot;) || ( ASI_CRM_No_of_Rebate_Line__c = 0 &amp;&amp; ISPICKVAL(ASI_CRM_Status__c , &quot;Approval In Progress&quot;) )</formula>
        <label>Accounting Review</label>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Actual_Amount__c</fullName>
        <externalId>false</externalId>
        <label>Actual Amount</label>
        <summarizedField>ASI_CRM_Payment_Invoice_Line_Item__c.ASI_CRM_Actual_Amount__c</summarizedField>
        <summaryFilterItems>
            <field>ASI_CRM_Payment_Invoice_Line_Item__c.RecordTypeId</field>
            <operation>equals</operation>
            <value>JP SPTD FOC Invoice Line Item</value>
        </summaryFilterItems>
        <summaryForeignKey>ASI_CRM_Payment_Invoice_Line_Item__c.ASI_CRM_Payment_Invoice__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Actual_Taxable_Amount__c</fullName>
        <externalId>false</externalId>
        <label>Actual Taxable Amount</label>
        <summarizedField>ASI_CRM_Payment_Invoice_Line_Item__c.ASI_CRM_Final_Amount__c</summarizedField>
        <summaryForeignKey>ASI_CRM_Payment_Invoice_Line_Item__c.ASI_CRM_Payment_Invoice__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Adjustment_Amount__c</fullName>
        <externalId>false</externalId>
        <label>A&amp;P Adjustment Amount</label>
        <summarizedField>ASI_CRM_Payment_Invoice_Line_Item__c.ASI_CRM_Adjustment_Amount__c</summarizedField>
        <summaryFilterItems>
            <field>ASI_CRM_Payment_Invoice_Line_Item__c.RecordTypeId</field>
            <operation>equals</operation>
            <value>JP SPTD Cash Invoice Line Item</value>
        </summaryFilterItems>
        <summaryForeignKey>ASI_CRM_Payment_Invoice_Line_Item__c.ASI_CRM_Payment_Invoice__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Approver_10__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Sys_Approver 10</label>
        <referenceTo>User</referenceTo>
        <relationshipName>Payment_Invoices9</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Approver_1__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Sys_Approver 1</label>
        <referenceTo>User</referenceTo>
        <relationshipName>Payment_Invoices</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Approver_2__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Sys_Approver 2</label>
        <referenceTo>User</referenceTo>
        <relationshipName>Payment_Invoices1</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Approver_3__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Sys_Approver 3</label>
        <referenceTo>User</referenceTo>
        <relationshipName>Payment_Invoices2</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Approver_4__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Sys_Approver 4</label>
        <referenceTo>User</referenceTo>
        <relationshipName>Payment_Invoices3</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Approver_5__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Sys_Approver 5</label>
        <referenceTo>User</referenceTo>
        <relationshipName>Payment_Invoices4</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Approver_6__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Sys_Approver 6</label>
        <referenceTo>User</referenceTo>
        <relationshipName>Payment_Invoices5</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Approver_7__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Sys_Approver 7</label>
        <referenceTo>User</referenceTo>
        <relationshipName>Payment_Invoices6</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Approver_8__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Sys_Approver 8</label>
        <referenceTo>User</referenceTo>
        <relationshipName>Payment_Invoices7</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Approver_9__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Sys_Approver 9</label>
        <referenceTo>User</referenceTo>
        <relationshipName>Payment_Invoices8</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Clone_Record_Type_Id__c</fullName>
        <externalId>false</externalId>
        <label>Clone Record Type Id</label>
        <length>20</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_Customer_Ship_Pay_To__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Customer (Ship To)</label>
        <lookupFilter>
            <active>true</active>
            <errorMessage>Value does not exist or does not match filter criteria.
Please choose active status of customer records.</errorMessage>
            <filterItems>
                <field>ASI_CRM_AccountsAdditionalField__c.ASI_CRM_CN_Inactive_Flag__c</field>
                <operation>notEqual</operation>
                <value>True</value>
            </filterItems>
            <isOptional>false</isOptional>
        </lookupFilter>
        <referenceTo>ASI_CRM_AccountsAdditionalField__c</referenceTo>
        <relationshipLabel>Payment Invoices</relationshipLabel>
        <relationshipName>Payment_Invoices_del</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Delivery_Time__c</fullName>
        <externalId>false</externalId>
        <label>Delivery Time</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>0000-0000</fullName>
                    <default>false</default>
                    <label>0000-0000</label>
                </value>
                <value>
                    <fullName>0000-1200</fullName>
                    <default>false</default>
                    <label>0000-1200</label>
                </value>
                <value>
                    <fullName>1200-0000</fullName>
                    <default>false</default>
                    <label>1200-0000</label>
                </value>
                <value>
                    <fullName>1400-1600</fullName>
                    <default>false</default>
                    <label>1400-1600</label>
                </value>
                <value>
                    <fullName>1600-1800</fullName>
                    <default>false</default>
                    <label>1600-1800</label>
                </value>
                <value>
                    <fullName>1800-2000</fullName>
                    <default>false</default>
                    <label>1800-2000</label>
                </value>
                <value>
                    <fullName>1900-2100</fullName>
                    <default>false</default>
                    <label>1900-2100</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>ASI_CRM_Difference_to_Adjust__c</fullName>
        <externalId>false</externalId>
        <formula>ASI_CRM_Total_Taxable_Amount__c  - ASI_CRM_Actual_Taxable_Amount__c</formula>
        <label>Difference to Adjust</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_From_Month__c</fullName>
        <externalId>false</externalId>
        <label>Invoice Period From</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_G_L_Date__c</fullName>
        <externalId>false</externalId>
        <label>G/L Date</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Invoice_Date__c</fullName>
        <externalId>false</externalId>
        <label>Invoice Date</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Invoice_No__c</fullName>
        <externalId>false</externalId>
        <label>Invoice No.</label>
        <length>255</length>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_JDE_Document_No__c</fullName>
        <externalId>false</externalId>
        <label>JDE Document No.</label>
        <length>100</length>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_JDE_Group_Name__c</fullName>
        <externalId>false</externalId>
        <label>JDE Group Name</label>
        <length>20</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_JDE_Synced__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <label>JDE Synced</label>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Journal_Voucher__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <label>Journal Voucher</label>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Line_Total_Amount__c</fullName>
        <externalId>false</externalId>
        <formula>ASI_CRM_Actual_Taxable_Amount__c* (1+ASI_CRM_Tax_Rate__c)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Line Total Amount</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_No_of_A_P_Line__c</fullName>
        <externalId>false</externalId>
        <label>No. of A&amp;P/SPTD Line</label>
        <summaryFilterItems>
            <field>ASI_CRM_Payment_Invoice_Line_Item__c.RecordTypeId</field>
            <operation>equals</operation>
            <value>JP SPTD Cash Invoice Line Item</value>
        </summaryFilterItems>
        <summaryForeignKey>ASI_CRM_Payment_Invoice_Line_Item__c.ASI_CRM_Payment_Invoice__c</summaryForeignKey>
        <summaryOperation>count</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_No_of_Lines_A_P_Vs_Rebate__c</fullName>
        <externalId>false</externalId>
        <formula>Text(ASI_CRM_No_of_A_P_Line__c) &amp; &quot; / &quot; &amp; Text(ASI_CRM_No_of_Rebate_Line__c)</formula>
        <label>No. of Lines (A&amp;P / Rebate)</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_No_of_Rebate_Line__c</fullName>
        <externalId>false</externalId>
        <label>No. of Rebate Line</label>
        <summaryFilterItems>
            <field>ASI_CRM_Payment_Invoice_Line_Item__c.RecordTypeId</field>
            <operation>equals</operation>
            <value>JP Indirect Rebate Invoice Line Item</value>
        </summaryFilterItems>
        <summaryForeignKey>ASI_CRM_Payment_Invoice_Line_Item__c.ASI_CRM_Payment_Invoice__c</summaryForeignKey>
        <summaryOperation>count</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Order_Date__c</fullName>
        <externalId>false</externalId>
        <formula>ASI_CRM_Payment_Date__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Order Date</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Owner__c</fullName>
        <externalId>false</externalId>
        <formula>Owner:User.LastName + &quot; &quot; + Owner:User.FirstName</formula>
        <label>Owner</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_Pay_To__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Pay To</label>
        <lookupFilter>
            <active>true</active>
            <filterItems>
                <field>ASI_CRM_Pay_To__c.ASI_CRM_Active__c</field>
                <operation>equals</operation>
                <value>True</value>
            </filterItems>
            <isOptional>false</isOptional>
        </lookupFilter>
        <referenceTo>ASI_CRM_Pay_To__c</referenceTo>
        <relationshipLabel>Payment Invoices</relationshipLabel>
        <relationshipName>Payment_Invoices</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Payment_Date__c</fullName>
        <externalId>false</externalId>
        <label>Payment Date</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Payment_Invoice_External_ID__c</fullName>
        <caseSensitive>true</caseSensitive>
        <externalId>true</externalId>
        <label>Payment Invoice External ID</label>
        <length>255</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>true</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_Rebate_Adjustment_Amount__c</fullName>
        <externalId>false</externalId>
        <label>Rebate Adjustment Amount</label>
        <summarizedField>ASI_CRM_Payment_Invoice_Line_Item__c.ASI_CRM_Adjustment_Amount__c</summarizedField>
        <summaryFilterItems>
            <field>ASI_CRM_Payment_Invoice_Line_Item__c.RecordTypeId</field>
            <operation>equals</operation>
            <value>JP Indirect Rebate Invoice Line Item</value>
        </summaryFilterItems>
        <summaryForeignKey>ASI_CRM_Payment_Invoice_Line_Item__c.ASI_CRM_Payment_Invoice__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Rebate_Invoice_Amount__c</fullName>
        <defaultValue>0</defaultValue>
        <externalId>false</externalId>
        <label>Rebate Invoice Amount</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_Rebate_Tax_Amount__c</fullName>
        <externalId>false</externalId>
        <formula>IF( ASI_CRM_No_of_A_P_Line__c = 0 &amp;&amp; ASI_CRM_Rebate_Taxable_Amount__c == ASI_CRM_Total_Taxable_Amount__c ,  ASI_CRM_Total_Tax_Amount__c , ASI_CRM_Rebate_Invoice_Amount__c - ASI_CRM_Rebate_Taxable_Amount__c )</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Rebate Tax Amount</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_Rebate_Taxable_Amount__c</fullName>
        <externalId>false</externalId>
        <label>Rebate Taxable Amount</label>
        <summarizedField>ASI_CRM_Payment_Invoice_Line_Item__c.ASI_CRM_Final_Amount__c</summarizedField>
        <summaryFilterItems>
            <field>ASI_CRM_Payment_Invoice_Line_Item__c.RecordTypeId</field>
            <operation>equals</operation>
            <value>JP Indirect Rebate Invoice Line Item</value>
        </summaryFilterItems>
        <summaryForeignKey>ASI_CRM_Payment_Invoice_Line_Item__c.ASI_CRM_Payment_Invoice__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Reject_Reason__c</fullName>
        <externalId>false</externalId>
        <label>Reject Reason</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>TextArea</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Remarks_Notes__c</fullName>
        <externalId>false</externalId>
        <formula>&quot;Remarks is maximum 19 digits and please use katakana, alphabet and numbers.&quot; &amp; BR() &amp; &quot;備考欄は最大19桁まで。半角カタカナ、英数で入力ください。&quot;</formula>
        <label>* Notes</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_Remarks__c</fullName>
        <externalId>false</externalId>
        <label>Remarks</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>TextArea</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Sales_Group__c</fullName>
        <externalId>false</externalId>
        <label>Sales Group</label>
        <length>20</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_Staff_Code__c</fullName>
        <externalId>false</externalId>
        <formula>Owner:User.ASI_TnE_Sub_Ledger__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Staff Code</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_Status__c</fullName>
        <externalId>false</externalId>
        <label>Status</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Draft</fullName>
                    <default>false</default>
                    <label>Draft</label>
                </value>
                <value>
                    <fullName>Submitted</fullName>
                    <default>false</default>
                    <label>Submitted</label>
                </value>
                <value>
                    <fullName>Approval In Progress</fullName>
                    <default>false</default>
                    <label>Approval In Progress</label>
                </value>
                <value>
                    <fullName>Approved</fullName>
                    <default>false</default>
                    <label>Approved</label>
                </value>
                <value>
                    <fullName>Final</fullName>
                    <default>false</default>
                    <label>Final</label>
                </value>
                <value>
                    <fullName>Complete</fullName>
                    <default>false</default>
                    <label>Complete</label>
                </value>
                <value>
                    <fullName>Cancelled</fullName>
                    <default>false</default>
                    <label>Cancelled</label>
                </value>
                <value>
                    <fullName>Shipment Cancelled</fullName>
                    <default>false</default>
                    <label>Shipment Cancelled</label>
                </value>
                <value>
                    <fullName>Partial Complete</fullName>
                    <default>false</default>
                    <label>Partial Complete</label>
                </value>
                <value>
                    <fullName>Verified by SA</fullName>
                    <default>false</default>
                    <label>Verified by SA</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>ASI_CRM_Sys_Allow_Set_Draft__c</fullName>
        <externalId>false</externalId>
        <formula>IF( CONTAINS($Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Object_API__c, &apos;ASI_CRM_Payment_Invoice__c&apos; ) &amp;&amp; ( ISBLANK( $Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Record_Type__c ) || CONTAINS($Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Record_Type__c , RecordType.DeveloperName ) ), $Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Bybass_Validation__c , false)</formula>
        <label>Sys_Allow Set Draft</label>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Sys_Allow_Submit_Approval__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <label>Sys_Allow Submit Approval</label>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Sys_Current_Approver__c</fullName>
        <externalId>false</externalId>
        <label>Sys Current Approver</label>
        <length>20</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_Sys_Next_Auto_Number__c</fullName>
        <defaultValue>1</defaultValue>
        <externalId>false</externalId>
        <label>Sys Next Auto Number</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_Tax_Rate_Area__c</fullName>
        <externalId>false</externalId>
        <label>Tax Rate/Area</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>CP0</fullName>
                    <default>false</default>
                    <label>CP0</label>
                </value>
                <value>
                    <fullName>CP8</fullName>
                    <default>false</default>
                    <label>CP8</label>
                </value>
                <value>
                    <fullName>CP8R</fullName>
                    <default>false</default>
                    <label>CP8R</label>
                </value>
                <value>
                    <fullName>CP10</fullName>
                    <default>false</default>
                    <label>CP10</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>ASI_CRM_Tax_Rate__c</fullName>
        <externalId>false</externalId>
        <inlineHelpText>If Tax Rate is empty, system will automatically calculate the Tax with default setting.</inlineHelpText>
        <label>Tax Rate</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Percent</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_To_Month__c</fullName>
        <externalId>false</externalId>
        <label>Invoice Period To</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Total_Invoice_Amount__c</fullName>
        <externalId>false</externalId>
        <label>Total Invoice Amount</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_Total_Tax_Amount__c</fullName>
        <externalId>false</externalId>
        <formula>ASI_CRM_Total_Invoice_Amount__c -  ASI_CRM_Total_Taxable_Amount__c</formula>
        <label>Total Tax Amount</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_Total_Taxable_Amount__c</fullName>
        <externalId>false</externalId>
        <formula>IF( CONTAINS(RecordType.DeveloperName, &quot;ASI_CRM_JP_SPTD_Cash_Invoice&quot;) || CONTAINS(RecordType.DeveloperName, &quot;ASI_CRM_JP_Cash_Invoice&quot;)  , ROUND(ASI_CRM_Total_Invoice_Amount__c /(1+ ASI_CRM_Tax_Rate__c), 0),  ASI_CRM_Actual_Taxable_Amount__c )</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Total Taxable Amount</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <label>Payment Invoice</label>
    <listViews>
        <fullName>ASI_CRM_JP_All_Invoices</fullName>
        <booleanFilter>1 OR 2 OR 3 OR 4 OR 5</booleanFilter>
        <columns>NAME</columns>
        <columns>RECORDTYPE</columns>
        <columns>ASI_CRM_Status__c</columns>
        <columns>ASI_CRM_Customer_Ship_Pay_To__c</columns>
        <columns>ASI_CRM_Pay_To__c</columns>
        <columns>ASI_CRM_Invoice_No__c</columns>
        <columns>ASI_CRM_Invoice_Date__c</columns>
        <columns>ASI_CRM_Payment_Date__c</columns>
        <columns>ASI_CRM_Owner__c</columns>
        <columns>ASI_CRM_No_of_A_P_Line__c</columns>
        <columns>ASI_CRM_No_of_Rebate_Line__c</columns>
        <filterScope>Everything</filterScope>
        <filters>
            <field>RECORDTYPE</field>
            <operation>equals</operation>
            <value>ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_SPTD_Cash_Invoice,ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_SPTD_Cash_Invoice_Read_Only</value>
        </filters>
        <filters>
            <field>RECORDTYPE</field>
            <operation>equals</operation>
            <value>ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_SPTD_FOC_Invoice,ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_SPTD_FOC_Invoice_Read_Only</value>
        </filters>
        <filters>
            <field>RECORDTYPE</field>
            <operation>equals</operation>
            <value>ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_Indirect_Rebate_Invoice,ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_Indirect_Rebate_Invoice_Read_Only</value>
        </filters>
        <filters>
            <field>RECORDTYPE</field>
            <operation>equals</operation>
            <value>ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_Cash_Invoice,ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_Cash_Invoice_Read_Only</value>
        </filters>
        <filters>
            <field>ASI_CRM_Status__c</field>
            <operation>equals</operation>
            <value>Approved,Complete</value>
        </filters>
        <label>All JP Invoices</label>
        <language>en_US</language>
        <sharedTo>
            <group>ASI_CRM_JP_All_Users</group>
        </sharedTo>
    </listViews>
    <listViews>
        <fullName>ASI_CRM_JP_Cash_Invoice_for_Accounting_Review</fullName>
        <booleanFilter>1 AND 2</booleanFilter>
        <columns>NAME</columns>
        <columns>ASI_CRM_Status__c</columns>
        <columns>ASI_CRM_Reject_Reason__c</columns>
        <columns>ASI_CRM_Pay_To__c</columns>
        <columns>ASI_CRM_Invoice_No__c</columns>
        <columns>ASI_CRM_Invoice_Date__c</columns>
        <columns>ASI_CRM_Payment_Date__c</columns>
        <columns>ASI_CRM_G_L_Date__c</columns>
        <columns>ASI_CRM_Journal_Voucher__c</columns>
        <columns>ASI_CRM_Total_Invoice_Amount__c</columns>
        <columns>ASI_CRM_Difference_to_Adjust__c</columns>
        <columns>ASI_CRM_Tax_Rate__c</columns>
        <columns>ASI_CRM_Owner__c</columns>
        <filterScope>Everything</filterScope>
        <filters>
            <field>RECORDTYPE</field>
            <operation>equals</operation>
            <value>ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_Cash_Invoice_Read_Only</value>
        </filters>
        <filters>
            <field>ASI_CRM_Accounting_Review__c</field>
            <operation>equals</operation>
            <value>1</value>
        </filters>
        <label>JP Cash Invoice for Accounting Review</label>
        <language>en_US</language>
        <sharedTo>
            <group>ASI_CRM_JP_Accounting</group>
        </sharedTo>
    </listViews>
    <listViews>
        <fullName>ASI_CRM_JP_Cash_Invoice_for_SA_Review</fullName>
        <columns>NAME</columns>
        <columns>ASI_CRM_Status__c</columns>
        <columns>ASI_CRM_Reject_Reason__c</columns>
        <columns>ASI_CRM_Pay_To__c</columns>
        <columns>ASI_CRM_Invoice_No__c</columns>
        <columns>ASI_CRM_Invoice_Date__c</columns>
        <columns>ASI_CRM_Payment_Date__c</columns>
        <columns>ASI_CRM_Total_Invoice_Amount__c</columns>
        <columns>ASI_CRM_Difference_to_Adjust__c</columns>
        <columns>ASI_CRM_Tax_Rate__c</columns>
        <columns>ASI_CRM_Owner__c</columns>
        <filterScope>Everything</filterScope>
        <filters>
            <field>RECORDTYPE</field>
            <operation>equals</operation>
            <value>ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_Cash_Invoice_Read_Only</value>
        </filters>
        <filters>
            <field>ASI_CRM_Status__c</field>
            <operation>equals</operation>
            <value>Approval In Progress</value>
        </filters>
        <filters>
            <field>ASI_CRM_No_of_Rebate_Line__c</field>
            <operation>greaterThan</operation>
            <value>0</value>
        </filters>
        <label>JP Cash Invoice for SA Review</label>
        <language>en_US</language>
        <sharedTo>
            <group>ASI_CRM_JP_Sales_Admin</group>
        </sharedTo>
    </listViews>
    <listViews>
        <fullName>ASI_CRM_JP_Ind_Rebate_Invoice_Review</fullName>
        <columns>NAME</columns>
        <columns>ASI_CRM_Status__c</columns>
        <columns>ASI_CRM_Pay_To__c</columns>
        <columns>ASI_CRM_Invoice_No__c</columns>
        <columns>ASI_CRM_Invoice_Date__c</columns>
        <columns>ASI_CRM_Payment_Date__c</columns>
        <columns>ASI_CRM_Tax_Rate__c</columns>
        <columns>ASI_CRM_Owner__c</columns>
        <filterScope>Everything</filterScope>
        <filters>
            <field>RECORDTYPE</field>
            <operation>equals</operation>
            <value>ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_Indirect_Rebate_Invoice_Read_Only</value>
        </filters>
        <filters>
            <field>ASI_CRM_Status__c</field>
            <operation>equals</operation>
            <value>Approval In Progress</value>
        </filters>
        <label>JP Indirect Rebate Invoice for Review</label>
        <language>en_US</language>
        <sharedTo>
            <group>ASI_CRM_JP_Sales_Admin</group>
        </sharedTo>
    </listViews>
    <listViews>
        <fullName>ASI_CRM_JP_My_Invoices</fullName>
        <booleanFilter>1 OR 2 OR 3 OR 4</booleanFilter>
        <columns>NAME</columns>
        <columns>RECORDTYPE</columns>
        <columns>ASI_CRM_Status__c</columns>
        <columns>ASI_CRM_Customer_Ship_Pay_To__c</columns>
        <columns>ASI_CRM_Pay_To__c</columns>
        <columns>ASI_CRM_Invoice_No__c</columns>
        <columns>ASI_CRM_Invoice_Date__c</columns>
        <columns>ASI_CRM_Payment_Date__c</columns>
        <columns>ASI_CRM_Owner__c</columns>
        <filterScope>Mine</filterScope>
        <filters>
            <field>RECORDTYPE</field>
            <operation>equals</operation>
            <value>ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_SPTD_Cash_Invoice,ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_SPTD_Cash_Invoice_Read_Only</value>
        </filters>
        <filters>
            <field>RECORDTYPE</field>
            <operation>equals</operation>
            <value>ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_SPTD_FOC_Invoice,ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_SPTD_FOC_Invoice_Read_Only</value>
        </filters>
        <filters>
            <field>RECORDTYPE</field>
            <operation>equals</operation>
            <value>ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_Indirect_Rebate_Invoice,ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_Indirect_Rebate_Invoice_Read_Only</value>
        </filters>
        <filters>
            <field>RECORDTYPE</field>
            <operation>equals</operation>
            <value>ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_Cash_Invoice,ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_Cash_Invoice_Read_Only</value>
        </filters>
        <label>My JP Invoices</label>
        <language>en_US</language>
        <sharedTo>
            <group>ASI_CRM_JP_All_Users</group>
        </sharedTo>
    </listViews>
    <listViews>
        <fullName>ASI_CRM_JP_SPTD_Cash_Invoice_for_Review</fullName>
        <columns>NAME</columns>
        <columns>ASI_CRM_Status__c</columns>
        <columns>ASI_CRM_Reject_Reason__c</columns>
        <columns>ASI_CRM_Pay_To__c</columns>
        <columns>ASI_CRM_Invoice_No__c</columns>
        <columns>ASI_CRM_Invoice_Date__c</columns>
        <columns>ASI_CRM_Payment_Date__c</columns>
        <columns>ASI_CRM_G_L_Date__c</columns>
        <columns>ASI_CRM_Journal_Voucher__c</columns>
        <columns>ASI_CRM_Total_Invoice_Amount__c</columns>
        <columns>ASI_CRM_Difference_to_Adjust__c</columns>
        <columns>ASI_CRM_Owner__c</columns>
        <filterScope>Everything</filterScope>
        <filters>
            <field>RECORDTYPE</field>
            <operation>equals</operation>
            <value>ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_SPTD_Cash_Invoice_Read_Only</value>
        </filters>
        <filters>
            <field>ASI_CRM_Status__c</field>
            <operation>equals</operation>
            <value>Approval In Progress</value>
        </filters>
        <filters>
            <field>ASI_CRM_Difference_to_Adjust__c</field>
            <operation>equals</operation>
            <value>0</value>
        </filters>
        <label>JP SPTD Cash Invoice for Review</label>
        <language>en_US</language>
        <sharedTo>
            <group>ASI_CRM_JP_Accounting</group>
        </sharedTo>
    </listViews>
    <listViews>
        <fullName>JP_Cash_Invoice_Approved_Final</fullName>
        <booleanFilter>1 AND 2</booleanFilter>
        <columns>NAME</columns>
        <columns>ASI_CRM_Status__c</columns>
        <columns>ASI_CRM_Reject_Reason__c</columns>
        <columns>ASI_CRM_Pay_To__c</columns>
        <columns>ASI_CRM_Invoice_No__c</columns>
        <columns>ASI_CRM_Invoice_Date__c</columns>
        <columns>ASI_CRM_Payment_Date__c</columns>
        <columns>ASI_CRM_G_L_Date__c</columns>
        <columns>ASI_CRM_Journal_Voucher__c</columns>
        <columns>ASI_CRM_Total_Invoice_Amount__c</columns>
        <columns>ASI_CRM_Difference_to_Adjust__c</columns>
        <columns>ASI_CRM_Tax_Rate__c</columns>
        <columns>ASI_CRM_Owner__c</columns>
        <columns>ASI_CRM_No_of_A_P_Line__c</columns>
        <columns>ASI_CRM_No_of_Rebate_Line__c</columns>
        <filterScope>Everything</filterScope>
        <filters>
            <field>RECORDTYPE</field>
            <operation>equals</operation>
            <value>ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_Cash_Invoice_Read_Only</value>
        </filters>
        <filters>
            <field>ASI_CRM_Status__c</field>
            <operation>equals</operation>
            <value>Approved,Final</value>
        </filters>
        <label>JP Cash Invoice_Approved_Final</label>
        <language>en_US</language>
        <sharedTo>
            <group>ASI_CRM_JP_Accounting</group>
        </sharedTo>
    </listViews>
    <listViews>
        <fullName>JP_Grouped_Payment</fullName>
        <booleanFilter>1 AND 2</booleanFilter>
        <columns>NAME</columns>
        <columns>ASI_CRM_Status__c</columns>
        <columns>ASI_CRM_Reject_Reason__c</columns>
        <columns>ASI_CRM_Pay_To__c</columns>
        <columns>ASI_CRM_Invoice_No__c</columns>
        <columns>ASI_CRM_Invoice_Date__c</columns>
        <columns>ASI_CRM_Payment_Date__c</columns>
        <columns>ASI_CRM_G_L_Date__c</columns>
        <columns>ASI_CRM_Journal_Voucher__c</columns>
        <columns>ASI_CRM_Total_Invoice_Amount__c</columns>
        <columns>ASI_CRM_Difference_to_Adjust__c</columns>
        <columns>ASI_CRM_JDE_Group_Name__c</columns>
        <columns>ASI_CRM_Tax_Rate__c</columns>
        <columns>ASI_CRM_Owner__c</columns>
        <filterScope>Everything</filterScope>
        <filters>
            <field>RECORDTYPE</field>
            <operation>equals</operation>
            <value>ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_SPTD_Cash_Invoice_Read_Only,ASI_CRM_Payment_Invoice__c.ASI_CRM_JP_Cash_Invoice_Read_Only</value>
        </filters>
        <filters>
            <field>ASI_CRM_JDE_Group_Name__c</field>
            <operation>notEqual</operation>
        </filters>
        <label>JP Grouped Payment</label>
        <language>en_US</language>
        <sharedTo>
            <group>ASI_CRM_JP_Accounting</group>
        </sharedTo>
    </listViews>
    <nameField>
        <label>Payment Invoice Ref No.</label>
        <trackHistory>false</trackHistory>
        <type>Text</type>
    </nameField>
    <pluralLabel>Payment Invoices</pluralLabel>
    <recordTypeTrackHistory>false</recordTypeTrackHistory>
    <recordTypes>
        <fullName>ASI_CRM_JP_Cash_Invoice</fullName>
        <active>true</active>
        <label>JP Cash Invoice</label>
        <picklistValues>
            <picklist>ASI_CRM_Delivery_Time__c</picklist>
            <values>
                <fullName>0000-1200</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>1400-1600</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>1600-1800</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>1800-2000</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>1900-2100</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>ASI_CRM_Status__c</picklist>
            <values>
                <fullName>Cancelled</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Draft</fullName>
                <default>true</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>ASI_CRM_Tax_Rate_Area__c</picklist>
            <values>
                <fullName>CP0</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP10</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP8</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP8R</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <recordTypes>
        <fullName>ASI_CRM_JP_Cash_Invoice_Read_Only</fullName>
        <active>true</active>
        <label>JP Cash Invoice Read-Only</label>
        <picklistValues>
            <picklist>ASI_CRM_Delivery_Time__c</picklist>
            <values>
                <fullName>0000-1200</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>1400-1600</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>1600-1800</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>1800-2000</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>1900-2100</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>ASI_CRM_Status__c</picklist>
            <values>
                <fullName>Draft</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Final</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Verified by SA</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>ASI_CRM_Tax_Rate_Area__c</picklist>
            <values>
                <fullName>CP0</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP10</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP8</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP8R</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <recordTypes>
        <fullName>ASI_CRM_JP_Indirect_Rebate_Invoice</fullName>
        <active>true</active>
        <label>JP Indirect Rebate Invoice</label>
        <picklistValues>
            <picklist>ASI_CRM_Delivery_Time__c</picklist>
            <values>
                <fullName>1900-2100</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>ASI_CRM_Status__c</picklist>
            <values>
                <fullName>Cancelled</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Draft</fullName>
                <default>true</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>ASI_CRM_Tax_Rate_Area__c</picklist>
            <values>
                <fullName>CP0</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP10</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP8</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP8R</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <recordTypes>
        <fullName>ASI_CRM_JP_Indirect_Rebate_Invoice_Read_Only</fullName>
        <active>true</active>
        <label>JP Indirect Rebate Invoice Read-Only</label>
        <picklistValues>
            <picklist>ASI_CRM_Delivery_Time__c</picklist>
            <values>
                <fullName>1900-2100</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>ASI_CRM_Status__c</picklist>
            <values>
                <fullName>Draft</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Final</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>ASI_CRM_Tax_Rate_Area__c</picklist>
            <values>
                <fullName>CP0</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP10</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP8</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP8R</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <recordTypes>
        <fullName>ASI_CRM_JP_SPTD_Cash_Invoice</fullName>
        <active>true</active>
        <label>JP SPTD Cash Invoice</label>
        <picklistValues>
            <picklist>ASI_CRM_Delivery_Time__c</picklist>
            <values>
                <fullName>1900-2100</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>ASI_CRM_Status__c</picklist>
            <values>
                <fullName>Cancelled</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Draft</fullName>
                <default>true</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>ASI_CRM_Tax_Rate_Area__c</picklist>
            <values>
                <fullName>CP0</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP10</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP8</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP8R</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <recordTypes>
        <fullName>ASI_CRM_JP_SPTD_Cash_Invoice_Read_Only</fullName>
        <active>true</active>
        <label>JP SPTD Cash Invoice Read-Only</label>
        <picklistValues>
            <picklist>ASI_CRM_Delivery_Time__c</picklist>
            <values>
                <fullName>1900-2100</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>ASI_CRM_Status__c</picklist>
            <values>
                <fullName>Draft</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Final</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>ASI_CRM_Tax_Rate_Area__c</picklist>
            <values>
                <fullName>CP0</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP10</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP8</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP8R</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <recordTypes>
        <fullName>ASI_CRM_JP_SPTD_FOC_Invoice</fullName>
        <active>true</active>
        <label>JP SPTD FOC Invoice</label>
        <picklistValues>
            <picklist>ASI_CRM_Delivery_Time__c</picklist>
            <values>
                <fullName>0000-0000</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>0000-1200</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>1200-0000</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>1400-1600</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>1600-1800</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>1800-2000</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>1900-2100</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>ASI_CRM_Status__c</picklist>
            <values>
                <fullName>Cancelled</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Draft</fullName>
                <default>true</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>ASI_CRM_Tax_Rate_Area__c</picklist>
            <values>
                <fullName>CP0</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP10</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP8</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP8R</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <recordTypes>
        <fullName>ASI_CRM_JP_SPTD_FOC_Invoice_Read_Only</fullName>
        <active>true</active>
        <label>JP SPTD FOC Invoice Read-Only</label>
        <picklistValues>
            <picklist>ASI_CRM_Delivery_Time__c</picklist>
            <values>
                <fullName>0000-0000</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>0000-1200</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>1200-0000</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>1400-1600</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>1600-1800</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>1800-2000</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>1900-2100</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>ASI_CRM_Status__c</picklist>
            <values>
                <fullName>Approved</fullName>
                <default>true</default>
            </values>
            <values>
                <fullName>Complete</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>ASI_CRM_Tax_Rate_Area__c</picklist>
            <values>
                <fullName>CP0</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP10</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP8</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>CP8R</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <searchLayouts>
        <customTabListAdditionalFields>RECORDTYPE</customTabListAdditionalFields>
        <customTabListAdditionalFields>ASI_CRM_Status__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>ASI_CRM_Customer_Ship_Pay_To__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>ASI_CRM_Pay_To__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>ASI_CRM_Invoice_No__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>ASI_CRM_Invoice_Date__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>ASI_CRM_Payment_Date__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>ASI_CRM_Owner__c</customTabListAdditionalFields>
        <lookupDialogsAdditionalFields>RECORDTYPE</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>ASI_CRM_Invoice_No__c</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>ASI_CRM_Customer_Ship_Pay_To__c</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>ASI_CRM_Pay_To__c</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>ASI_CRM_Status__c</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>ASI_CRM_Invoice_Date__c</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>ASI_CRM_Payment_Date__c</lookupDialogsAdditionalFields>
        <searchResultsAdditionalFields>RECORDTYPE</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>ASI_CRM_Invoice_No__c</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>ASI_CRM_Customer_Ship_Pay_To__c</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>ASI_CRM_Pay_To__c</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>ASI_CRM_Status__c</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>ASI_CRM_Invoice_Date__c</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>ASI_CRM_Payment_Date__c</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>OWNER.ALIAS</searchResultsAdditionalFields>
    </searchLayouts>
    <sharingModel>Private</sharingModel>
    <validationRules>
        <fullName>ASI_CRM_JP_Cant_Change_Back_Draft</fullName>
        <active>true</active>
        <errorConditionFormula>/* Prevent user changing Cancelled Invoice back to Draft status. 

Criteria:
* Record Type match all JP CRM record types, but not read-only
* Status previous value is Cancelled
* Status current value is Draft

Remark: this validation rule should not bypass any user to ensure data integrity.  
*/

OR(RecordType.DeveloperName = &apos;ASI_CRM_JP_Indirect_Rebate_Invoice&apos;, RecordType.DeveloperName = &apos;ASI_CRM_JP_SPTD_Cash_Invoice&apos;, RecordType.DeveloperName = &apos;ASI_CRM_JP_SPTD_FOC_Invoice&apos;, RecordType.DeveloperName = &apos;ASI_CRM_JP_Cash_Invoice&apos;) &amp;&amp;  ISPICKVAL( ASI_CRM_Status__c , &apos;Draft&apos;) &amp;&amp; ISPICKVAL(PRIORVALUE(ASI_CRM_Status__c),&quot;Cancelled&quot;)</errorConditionFormula>
        <errorDisplayField>ASI_CRM_Status__c</errorDisplayField>
        <errorMessage>You are NOT allowed to change back Status from Cancelled</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>ASI_CRM_JP_Cant_Update_CashInvoice</fullName>
        <active>true</active>
        <errorConditionFormula>/* Prevent user to change Cash Invoice to Final or Draft; prevent user to update certain fields 

Criteria: 
* Record Type match Cash Invoice Read Only 
* Status is changed to Final, bypassing accounting role OR
* Status is changed to Draft, bypassing accounting role, sales planning role, sales admin and line manager OR
* Status is changed from Final to Draft OR
* Any of following fields is changed, bypassing accounting and sales admin role when invoice is not yet final. 
Payment Date, G/L Date, Invoice No./Date, Journal Voucher, Remark and Pay To
* Bypass JP IT Support &amp; System Administrator (Regional IT Support) 
*/

(
	RecordType.DeveloperName =&apos;ASI_CRM_JP_Cash_Invoice_Read_Only&apos; &amp;&amp; !INCLUDES($User.BypassTriggers__c,&apos;ASI_JP_Admin&apos;)
		&amp;&amp; 
	OR (
		(!CONTAINS($UserRole.DeveloperName,&apos;ASI_JP_Accounting&apos;) &amp;&amp; ISPICKVAL( ASI_CRM_Status__c, &apos;Final&apos;) &amp;&amp; ISCHANGED(ASI_CRM_Status__c) ),

		AND(	
			!CONTAINS($UserRole.DeveloperName,&apos;ASI_JP_Accounting&apos;), 
			!CONTAINS($UserRole.DeveloperName,&apos;ASI_JP_Sales_Planning_Team&apos;), 
			!CONTAINS($UserRole.DeveloperName,&apos;ASI_JP_Sales_Admin_Team&apos;),  
			ASI_CRM_Approver_1__r.Id != $User.Id
		) 
		&amp;&amp; ISPICKVAL(ASI_CRM_Status__c, &apos;Draft&apos;) 
		&amp;&amp; ISCHANGED(ASI_CRM_Status__c), 


		(ISPICKVAL( ASI_CRM_Status__c, &apos;Draft&apos;) &amp;&amp; ISPICKVAL(PRIORVALUE(ASI_CRM_Status__c),&apos;Final&apos;)),


		OR(
			!CONTAINS($UserRole.DeveloperName,&apos;ASI_JP_Accounting&apos;) &amp;&amp; !CONTAINS($UserRole.DeveloperName,&apos;ASI_JP_Sales_Admin_Team&apos;) ,
			ISPICKVAL( ASI_CRM_Status__c, &apos;Final&apos;) 
		) 
		&amp;&amp; (
			(ISCHANGED(ASI_CRM_Payment_Date__c) 
				|| ISCHANGED(ASI_CRM_G_L_Date__c) 
				|| ISCHANGED(ASI_CRM_Invoice_No__c) 
				|| ISCHANGED(ASI_CRM_Invoice_Date__c) 
				|| ISCHANGED(ASI_CRM_Journal_Voucher__c) 
				|| ISCHANGED(ASI_CRM_Remarks__c) 
				|| ISCHANGED(ASI_CRM_Tax_Rate__c) 
				|| ISCHANGED(ASI_CRM_Pay_To__c ) 
				|| ISCHANGED(ASI_CRM_Total_Invoice_Amount__c) 
			)
		)
	)
)
&amp;&amp; 
!AND(CONTAINS($Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Object_API__c, &apos;ASI_CRM_Payment_Invoice__c&apos; ), ISBLANK( $Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Record_Type__c ))</errorConditionFormula>
        <errorMessage>You are not allowed to update the Invoice after Final Print</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>ASI_CRM_JP_Cant_Update_IndirRebatInvoice</fullName>
        <active>true</active>
        <errorConditionFormula>/* Prevent user to change indirect rebate invoice approval in progress to either Final or Draft. 

Criteria: 
* Record Type match Indirect Rebate Invoice Read Only 
* Status is changed to either Draft or Final
* Bypass the role of Sales Admin
* Bypass JP IT Support &amp; System Administrator (Regional IT Support)
*/

(RecordType.DeveloperName = &apos;ASI_CRM_JP_Indirect_Rebate_Invoice_Read_Only&apos; &amp;&amp; 

(OR(ISPICKVAL( ASI_CRM_Status__c, &apos;Draft&apos;) &amp;&amp; ASI_CRM_Approver_1__r.Id != $User.Id, ISPICKVAL( ASI_CRM_Status__c, &apos;Final&apos;)) 

&amp;&amp; ISCHANGED(ASI_CRM_Status__c)) &amp;&amp; $UserRole.DeveloperName &lt;&gt; &apos;ASI_JP_Sales_Admin_Team&apos;)

&amp;&amp; !AND(CONTAINS($Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Object_API__c, &apos;ASI_CRM_Payment_Invoice__c&apos; ), ISBLANK( $Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Record_Type__c ))</errorConditionFormula>
        <errorDisplayField>ASI_CRM_Status__c</errorDisplayField>
        <errorMessage>You are not allowed to update Status.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>ASI_CRM_JP_Cant_Update_InvoiceRefNo</fullName>
        <active>true</active>
        <errorConditionFormula>/* Prevent user changing Invoice Ref No.

Criteria: 
* Record Type match all JP CRM record types 
* Name (Invoice Ref No.)is changed
* Bypass JP IT Support &amp; System Administrator (Regional IT Support) 

Remark: Allow IT Support to update Invoice Ref No. IT must ensure data integrity the Ref No. updated not duplicated with running number assigned by system.
*/

(CONTAINS(RecordType.DeveloperName, &apos;ASI_CRM_JP&apos;) &amp;&amp; ISCHANGED(Name))
&amp;&amp; !AND(CONTAINS($Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Object_API__c, &apos;ASI_CRM_Payment_Invoice__c&apos; ), ISBLANK( $Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Record_Type__c ))</errorConditionFormula>
        <errorDisplayField>Name</errorDisplayField>
        <errorMessage>Change of Payment Invoice Ref No. is not allowed.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>ASI_CRM_JP_Cant_Update_SPTDCashInvoice</fullName>
        <active>true</active>
        <errorConditionFormula>/* Prevent user to change SPTD Cash Invoice approval in progress to Final or Draft; prevent user to update certain fields 

Criteria: 
* Record Type match SPTD Cash Invoice Read Only 
* Status is changed from Approval In Progress to Final, bypassing accounting role OR
* Status is changed from Approval In Progress to Draft, bypassing accounting role, sales planning role and line manager OR
* Status is changed from Final to Draft OR
* Any of following fields is changed, bypassing accounting role when invoice is not yet final. 
Payment Date, G/L Date, Invoice No./Date, Journal Voucher, Remark and Pay To
* Bypass JP IT Support &amp; System Administrator (Regional IT Support) 
*/

(RecordType.DeveloperName =&apos;ASI_CRM_JP_SPTD_Cash_Invoice_Read_Only&apos; &amp;&amp; !INCLUDES($User.BypassTriggers__c,&apos;ASI_CRM_JP_Cant_Update_SPTDCashInvoice&apos;)&amp;&amp; OR (

(!CONTAINS($UserRole.DeveloperName,&apos;ASI_JP_Accounting&apos;) &amp;&amp; ISPICKVAL( ASI_CRM_Status__c, &apos;Final&apos;) &amp;&amp; ISCHANGED(ASI_CRM_Status__c) ),

AND(!CONTAINS($UserRole.DeveloperName,&apos;ASI_JP_Accounting&apos;), !CONTAINS($UserRole.DeveloperName,&apos;ASI_JP_Sales_Planning&apos;),  ASI_CRM_Approver_1__r.Id != $User.Id
) &amp;&amp; ISPICKVAL( ASI_CRM_Status__c, &apos;Draft&apos;) &amp;&amp; ISCHANGED(ASI_CRM_Status__c), 

(ISPICKVAL( ASI_CRM_Status__c, &apos;Draft&apos;) &amp;&amp; ISPICKVAL(PRIORVALUE(ASI_CRM_Status__c),&apos;Final&apos;)),

OR(!CONTAINS($UserRole.DeveloperName,&apos;ASI_JP_Accounting&apos;),ISPICKVAL( ASI_CRM_Status__c, &apos;Final&apos;) ) &amp;&amp; ( (ISCHANGED(ASI_CRM_Payment_Date__c) || ISCHANGED(ASI_CRM_G_L_Date__c) || ISCHANGED(ASI_CRM_Invoice_No__c) || ISCHANGED(ASI_CRM_Invoice_Date__c) || ISCHANGED(ASI_CRM_Journal_Voucher__c) || ISCHANGED(ASI_CRM_Remarks__c) || ISCHANGED(ASI_CRM_Tax_Rate__c) 
|| ISCHANGED( ASI_CRM_Pay_To__c ) || ISCHANGED( ASI_CRM_Total_Invoice_Amount__c ) )
)
))
&amp;&amp; !AND(CONTAINS($Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Object_API__c, &apos;ASI_CRM_Payment_Invoice__c&apos; ), ISBLANK( $Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Record_Type__c ))</errorConditionFormula>
        <errorMessage>You are not allowed to update the Invoice after Final Print</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>ASI_CRM_JP_Cash_Invoice_Final_Validation</fullName>
        <active>true</active>
        <errorConditionFormula>/* Prevent user to change Cash Invoice to Status Verified by SA 

Criteria: 
* Record Type match Cash Invoice Read Only 
* Status is changed from Approval In Progress to Final
* No. of Rebate Invoice Line &gt; 0
* Bypass JP IT Support &amp; System Administrator (Regional IT Support) 
*/ 

RecordType.DeveloperName =&apos;ASI_CRM_JP_Cash_Invoice_Read_Only&apos; &amp;&amp; ISPICKVAL( ASI_CRM_Status__c , &quot;Final&quot;) &amp;&amp;  Text(PRIORVALUE(ASI_CRM_Status__c)) = &quot;Approval In Progress&quot; &amp;&amp;   ASI_CRM_No_of_Rebate_Line__c &gt; 0 
&amp;&amp; !AND(CONTAINS($Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Object_API__c, &apos;ASI_CRM_Payment_Invoice__c&apos; ), ISBLANK( $Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Record_Type__c ))</errorConditionFormula>
        <errorDisplayField>ASI_CRM_Status__c</errorDisplayField>
        <errorMessage>You are not allowed to change Status to Final before this Cash Invoice gets verified by SA.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>ASI_CRM_JP_Cash_Invoice_NotAllowSAVerify</fullName>
        <active>true</active>
        <errorConditionFormula>RecordType.DeveloperName = &apos;ASI_CRM_JP_Cash_Invoice_Read_Only&apos; &amp;&amp; 
ISCHANGED(ASI_CRM_Status__c) &amp;&amp;
ISPICKVAL( ASI_CRM_Status__c, &apos;Verified by SA&apos;) &amp;&amp; 
ASI_CRM_No_of_Rebate_Line__c == 0</errorConditionFormula>
        <errorDisplayField>ASI_CRM_Status__c</errorDisplayField>
        <errorMessage>You are not allowed to update Status &quot;Verified by SA&quot;. Cash Invoice does not contain Rebate Line</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>ASI_CRM_JP_Cash_Invoice_Prevent_Weekend</fullName>
        <active>true</active>
        <errorConditionFormula>AND ( 
OR(
CONTAINS(RecordType.DeveloperName,&quot;ASI_CRM_JP_Cash_Invoice&quot;), 
CONTAINS(RecordType.DeveloperName,&quot;ASI_CRM_JP_Cash_Invoice_Read_Only&quot;)
),
(CASE(MOD( ASI_CRM_Payment_Date__c - DATE(1900, 1, 7), 7),
0, 0,
6, 0,
1) = 0)
)</errorConditionFormula>
        <errorDisplayField>ASI_CRM_Payment_Date__c</errorDisplayField>
        <errorMessage>Payment Date must be a weekday for Cash Invoice.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>ASI_CRM_JP_Cash_Invoice_SA_Verify</fullName>
        <active>true</active>
        <errorConditionFormula>/* Prevent user to change Cash Invoice to Status Verified by SA 

Criteria: 
* Record Type match Cash Invoice Read Only 
* Status is changed and changed to Verified by SA
* Bypassing Sales Admin 
* Bypass JP IT Support &amp; System Administrator (Regional IT Support) 
*/ 

RecordType.DeveloperName = &apos;ASI_CRM_JP_Cash_Invoice_Read_Only&apos; &amp;&amp; 
ISCHANGED(ASI_CRM_Status__c) &amp;&amp;
ISPICKVAL( ASI_CRM_Status__c, &apos;Verified by SA&apos;) &amp;&amp;  
$UserRole.DeveloperName &lt;&gt; &apos;ASI_JP_Sales_Admin_Team&apos;
&amp;&amp; !AND(CONTAINS($Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Object_API__c, &apos;ASI_CRM_Payment_Invoice__c&apos; ), ISBLANK( $Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Record_Type__c ))</errorConditionFormula>
        <errorDisplayField>ASI_CRM_Status__c</errorDisplayField>
        <errorMessage>You are not allowed to update Status &quot;Verified by SA&quot;. Please have Sales Admin verify</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>ASI_CRM_JP_FOC_Delivery_Time</fullName>
        <active>true</active>
        <errorConditionFormula>/* Prevent user input afternoon for On-Trade Outlet; Prevent users input concrete time for non-On-Trade Outlet

Criteria: 
* Record Type match FOC Invoice 
* Customer Record is On-Trade AND Delivery Time is After Noon (&quot;1200-0000&quot;), OR
* Customer Record is non-On-Trade AND Delivery Time is NOT After Noon (&quot;1200-0000&quot;) AND Delivery Time is NOT Before Noon (&quot;0000-1200&quot;) 

Remark: this validation rule should not bypass any user to ensure data integrity. 
*/ 

CONTAINS(RecordType.DeveloperName,&quot;ASI_CRM_JP_SPTD_FOC_Invoice&quot;) &amp;&amp; OR (ASI_CRM_Customer_Ship_Pay_To__r.RecordType.DeveloperName = &quot;ASI_CRM_JP_On_Trade_Outlet&quot; &amp;&amp;  OR(ISPICKVAL( ASI_CRM_Delivery_Time__c, &quot;1200-0000&quot;),ISPICKVAL( ASI_CRM_Delivery_Time__c, &quot;0000-0000&quot;)
), ASI_CRM_Customer_Ship_Pay_To__r.RecordType.DeveloperName != &quot;ASI_CRM_JP_On_Trade_Outlet&quot; &amp;&amp; !ISPICKVAL( ASI_CRM_Delivery_Time__c, &quot;1200-0000&quot;) &amp;&amp; !ISPICKVAL( ASI_CRM_Delivery_Time__c, &quot;0000-1200&quot;) &amp;&amp; !ISPICKVAL( ASI_CRM_Delivery_Time__c, &quot;0000-0000&quot;)) &amp;&amp; 
OR (ISNEW(), ISCHANGED(ASI_CRM_Delivery_Time__c) )</errorConditionFormula>
        <errorDisplayField>ASI_CRM_Delivery_Time__c</errorDisplayField>
        <errorMessage>The Delivery Time input is not valid. Please correct</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>ASI_CRM_JP_FOC_Invoice_Prevent_Back_Date</fullName>
        <active>true</active>
        <errorConditionFormula>/* Prevent user input back date for Delivery Date (Payment Date) in FOC Invoice. 

Criteria: 
* Record Type match FOC Invoice
* Payment Date is not equal to blank and Payment is equal or less than today
* when FOC Invoice is newly created or the payment date gets changed 

Remark: this validation rule should not bypass any user to ensure data integrity. 
*/

AND ( 
CONTAINS(RecordType.DeveloperName,&quot;ASI_CRM_JP_SPTD_FOC_Invoice&quot;), 
NOT( ISBLANK(  ASI_CRM_Payment_Date__c  ) ), 
ASI_CRM_Payment_Date__c &lt;= TODAY(), 
OR (ISNEW(),  ISCHANGED(ASI_CRM_Payment_Date__c)  )
)</errorConditionFormula>
        <errorDisplayField>ASI_CRM_Payment_Date__c</errorDisplayField>
        <errorMessage>You are not allowed to input Delivery Date earlier than today.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>ASI_CRM_JP_Final_Status_Zero_Diff_To_Adj</fullName>
        <active>true</active>
        <description>ASI_CRM_JP_Final_Status_Zero_Difference_To_Adjust</description>
        <errorConditionFormula>/* Prevent user change SPTD Cash Invoice status to Final if difference to adjust not 0 

Criteria: 
* Record Type match SPTD Cash Invoice or Cash Invoice
* Status is changed to Final 
* Difference to adjust not 0
* Bypass JP IT Support &amp; System Administrator (Regional IT Support) 
*/

(OR(CONTAINS(RecordType.DeveloperName, &apos;ASI_CRM_JP_SPTD_Cash_Invoice&apos;), CONTAINS(RecordType.DeveloperName, &apos;ASI_CRM_JP_Cash_Invoice&apos;))&amp;&amp;  ISPICKVAL(ASI_CRM_Status__c,&apos;Final&apos;) &amp;&amp;  ASI_CRM_Difference_to_Adjust__c  &lt;&gt; 0)
&amp;&amp; !AND(CONTAINS($Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Object_API__c, &apos;ASI_CRM_Payment_Invoice__c&apos; ), ISBLANK( $Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Record_Type__c ))</errorConditionFormula>
        <errorDisplayField>ASI_CRM_Status__c</errorDisplayField>
        <errorMessage>If “Difference to Adjust” is not 0, Invoice Status cannot be changed to Final.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>ASI_CRM_JP_GL_Date</fullName>
        <active>true</active>
        <description>Only allow input date in current Month or future</description>
        <errorConditionFormula>/* Prevent user input G/L Date less than current month of this year OR any date of previous year.

Criteria: 
* Record Type match all JP CRM record types 
* G/L Date less than current month of this year OR 
* G/L Date less than previous year 
* Bypass JP IT Support &amp; System Administrator (Regional IT Support) 
*/ 

(CONTAINS(RecordType.DeveloperName,&apos;ASI_CRM_JP&apos;) &amp;&amp;   ISCHANGED(ASI_CRM_G_L_Date__c) &amp;&amp; OR (MONTH(ASI_CRM_G_L_Date__c) &lt; MONTH(TODAY()) &amp;&amp; YEAR(ASI_CRM_G_L_Date__c) = YEAR(TODAY()), YEAR(ASI_CRM_G_L_Date__c) &lt; YEAR(TODAY())))
&amp;&amp; !AND(CONTAINS($Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Object_API__c, &apos;ASI_CRM_Payment_Invoice__c&apos; ), ISBLANK( $Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Record_Type__c ))</errorConditionFormula>
        <errorDisplayField>ASI_CRM_G_L_Date__c</errorDisplayField>
        <errorMessage>Only G/L Date in current month or future date is allowed.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>ASI_CRM_JP_Indirect_Cant_Update_Paydate</fullName>
        <active>true</active>
        <errorConditionFormula>/* Prevent user to change Payment Date for Indirect Rebate Invoice in Final status except for Super User

Criteria: 


* Record Type match Indirect Rebate Invoice Read Only 
* Status is Final
* Bypass roles: JP Sales Planning Team, JP Sales Admin Team, JP Accounting Team, ASI JP, JP Sales Assistant
* Any of following fields is changed, bypassing accounting and sales admin role when invoice is not yet final. 
Payment Date
* Bypass JP IT Support &amp; System Administrator (Regional IT Support) 
*/ 

(
	RecordType.DeveloperName = &apos;ASI_CRM_JP_Indirect_Rebate_Invoice_Read_Only&apos; 
	&amp;&amp; ISPICKVAL( ASI_CRM_Status__c, &apos;Final&apos;) 
	&amp;&amp; ISCHANGED( ASI_CRM_Payment_Date__c ) 
)

&amp;&amp; 	!(
	 AND (
		CONTAINS($Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Object_API__c, &apos;ASI_CRM_Payment_Invoice__c&apos;), 
		(
			CONTAINS($Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Record_Type__c, RecordType.DeveloperName) 
			|| $Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Record_Type__c = RecordType.DeveloperName 
			|| ISBLANK($Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Record_Type__c)
		),
		$Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Bybass_Validation__c = True 
	) 
	|| AND ( 
		CONTAINS($UserRole.DeveloperName,&apos;ASI_JP_Sales_Planning_Team&apos;), 
		CONTAINS($UserRole.DeveloperName,&apos;ASI_JP_Sales_Admin_Team&apos;),
		CONTAINS($UserRole.DeveloperName,&apos;ASI_JP_Accounting_Team&apos;),
		CONTAINS($UserRole.DeveloperName,&apos;ASI_JP&apos;),
		CONTAINS($UserRole.DeveloperName,&apos;ASI_JP_Sales_Assistant&apos;),
		$Profile.Name = &apos;System Administrator&apos;
	)
)</errorConditionFormula>
        <errorMessage>Only super user may change Payment Date after Final Print</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>ASI_CRM_JP_Limit_FOC_Remark_Length</fullName>
        <active>true</active>
        <errorConditionFormula>CONTAINS( RecordType.DeveloperName , &quot;ASI_CRM_JP_SPTD_FOC_Invoice&quot;) &amp;&amp;  LEN( ASI_CRM_Remarks__c)&gt;19 &amp;&amp; OR (ISNEW(), ISCHANGED(ASI_CRM_Remarks__c) )</errorConditionFormula>
        <errorDisplayField>ASI_CRM_Remarks__c</errorDisplayField>
        <errorMessage>You are not allowed to input Remark longer than 19 digits</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>ASI_CRM_JP_No_Modification_When_Complete</fullName>
        <active>true</active>
        <errorConditionFormula>/* Prevent user make any changes when status is complete

Criteria: 
* Record Type match all JP CRM record types 
* Status is Complete 
* Bypass JP IT Support &amp; System Administrator (Regional IT Support) 
*/ 

(CONTAINS(RecordType.DeveloperName, &apos;ASI_CRM_JP&apos;) &amp;&amp;   !INCLUDES($User.BypassTriggers__c,&apos;ASI_JP_Admin&apos;) &amp;&amp;
ISPICKVAL(ASI_CRM_Status__c, &apos;Complete&apos;))
&amp;&amp; !AND(CONTAINS($Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Object_API__c, &apos;ASI_CRM_Payment_Invoice__c&apos; ), ISBLANK( $Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Record_Type__c ))</errorConditionFormula>
        <errorDisplayField>ASI_CRM_Clone_Record_Type_Id__c</errorDisplayField>
        <errorMessage>Payment Invoice is now in Complete status. No modification is allowed.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>ASI_CRM_JP_Start_End_Date_Validation</fullName>
        <active>true</active>
        <errorConditionFormula>/* Prevent user input From Date greater than To Date

Criteria: 
* Record Type match Indirect Rebate Invoice or Cash Invoice 
* From Date greater than To Date
* Bypass JP IT Support &amp; System Administrator (Regional IT Support) , --- Remove this
*/ 

(OR(RecordType.DeveloperName = &apos;ASI_CRM_JP_Indirect_Rebate_Invoice&apos;, RecordType.DeveloperName = &apos;ASI_CRM_JP_Cash_Invoice&apos;) &amp;&amp;  ASI_CRM_From_Month__c &gt;  ASI_CRM_To_Month__c)
/* &amp;&amp; !AND(CONTAINS($Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Object_API__c, &apos;ASI_CRM_Payment_Invoice__c&apos; ), ISBLANK( $Setup.ASI_JP_Validation_Bypass__c.ASI_JP_Record_Type__c ))*/</errorConditionFormula>
        <errorDisplayField>ASI_CRM_To_Month__c</errorDisplayField>
        <errorMessage>Invoice Period To must be greater than or equal to Invoice Period From</errorMessage>
    </validationRules>
    <visibility>Public</visibility>
    <webLinks>
        <fullName>ASI_CRM_JP_Clone</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <encodingKey>UTF-8</encodingKey>
        <linkType>url</linkType>
        <masterLabel>Clone</masterLabel>
        <openType>replace</openType>
        <protected>false</protected>
        <url>/{!ASI_CRM_Payment_Invoice__c.Id}/e?clone=1&amp;retURL={!ASI_CRM_Payment_Invoice__c.Id}&amp;00ND0000005s2GY=Draft&amp;00NM0000001AMtk={!ASI_CRM_Payment_Invoice__c.Id}&amp;RecordType={!ASI_CRM_Payment_Invoice__c.ASI_CRM_Clone_Record_Type_Id__c}</url>
    </webLinks>
    <webLinks>
        <fullName>ASI_CRM_JP_CloneCashInvoice</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <encodingKey>UTF-8</encodingKey>
        <linkType>url</linkType>
        <masterLabel>Clone</masterLabel>
        <openType>replace</openType>
        <protected>false</protected>
        <url>/{!ASI_CRM_Payment_Invoice__c.Id}/e?clone=1&amp;retURL={!ASI_CRM_Payment_Invoice__c.Id}&amp;00ND0000005s2GY=Draft&amp;00NM0000001AMtk={!ASI_CRM_Payment_Invoice__c.Id}&amp;RecordType={!ASI_CRM_Payment_Invoice__c.ASI_CRM_Clone_Record_Type_Id__c}&amp;00ND0000005s2GN=&amp;00ND0000005s2GM=</url>
    </webLinks>
    <webLinks>
        <fullName>ASI_CRM_JP_Final_Print</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Final Print</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>{!requireScript(&quot;/soap/ajax/30.0/connection.js&quot;)} 
sforce.connection.sessionId = &quot;{!$Api.Session_ID}&quot;; 

var currentHeaderDetails = sforce.connection.query(&quot;Select Id from ASI_CRM_Payment_Invoice_Line_Item__c where ASI_CRM_Payment_Invoice__c = &apos;{!ASI_CRM_Payment_Invoice__c.Id}&apos; &quot;); 
var detailRecords = currentHeaderDetails.getArray(&quot;records&quot;);

try {
if(&apos;{!ASI_CRM_Payment_Invoice__c.RecordType}&apos; == &apos;JP Cash Invoice&apos; &amp;&amp; (&apos;{!ASI_CRM_Payment_Invoice__c.ASI_CRM_From_Month__c}&apos; == null ||
&apos;{!ASI_CRM_Payment_Invoice__c.ASI_CRM_From_Month__c}&apos; == &apos;&apos;) &amp;&amp; &apos;{!ASI_CRM_Payment_Invoice__c.ASI_CRM_No_of_Rebate_Line__c}&apos; != &apos;0&apos;){
alert(&apos;{!$Label.ASI_CRM_JP_PeriodFromRequired}&apos;);
}else if(!(&apos;{!ASI_CRM_Payment_Invoice__c.ASI_CRM_Difference_to_Adjust__c}&apos; == &apos;0&apos;) &amp;&amp; (&apos;{!ASI_CRM_Payment_Invoice__c.RecordType}&apos; == &apos;JP SPTD Cash Invoice&apos; || &apos;{!ASI_CRM_Payment_Invoice__c.RecordType}&apos; == &apos;JP Cash Invoice&apos; )){
alert(&apos;{!$Label.ASI_CRM_JP_Invoice_DiffToAdjust_Zero_Warning}&apos;);
}else if(detailRecords.length == 0){
alert(&apos;{!$Label.ASI_CRM_JP_NoInvoiceItemsWarning}&apos;); 
}else{
window.open(&quot;/apex/ASI_CRM_JP_PaymentInvoice_PDFPage?action=finalPrint&amp;id={! ASI_CRM_Payment_Invoice__c.Id}&quot;, &apos;&apos;, &quot;width=700,height=500,toolbar=0,menubar=0,location=0,status=1,scrollbars=1,resizable=1,left=0,top=0&quot;);

window.open(&quot;/apex/ASI_CRM_JP_FinalPrintPage?id={!ASI_CRM_Payment_Invoice__c.Id}&quot;,&quot;_self&quot;);
}
}
catch(error) {
 sforce.debug.log(error.faultstring); 
}</url>
    </webLinks>
    <webLinks>
        <fullName>ASI_CRM_JP_New_SPTD_FOC</fullName>
        <availability>online</availability>
        <displayType>massActionButton</displayType>
        <linkType>javascript</linkType>
        <masterLabel>New SPTD FOC Invoice</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <requireRowSelection>false</requireRowSelection>
        <url>{!requireScript(&quot;/soap/ajax/30.0/connection.js&quot;)}
sforce.connection.sessionId = &quot;{!$Api.Session_ID}&quot;;

try { 
var recordtypeList = sforce.connection.query(&quot;Select id, name, developername from recordtype where developername = &apos;ASI_CRM_JP_SPTD_FOC_Invoice&apos;&quot;); 

var records = recordtypeList.getArray(&quot;records&quot;);

var recordtypeID = records[0].Id;

window.open(&quot;aIl/e?RecordType=&quot;+recordtypeID+&quot;&amp;retURL=&quot;+&apos;{!ASI_CRM_AccountsAdditionalField__c.Id}&apos;+&quot;&amp;CF00ND0000005s2GH=&quot;+&quot;{!ASI_CRM_AccountsAdditionalField__c.Name}&quot;+&quot;&amp;Name=[AutoNumber]&quot;, &quot;_parent&quot;);

}
catch (error) { 
alert(error);
}</url>
    </webLinks>
    <webLinks>
        <fullName>ASI_CRM_JP_Proof_Print</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <hasMenubar>false</hasMenubar>
        <hasScrollbars>true</hasScrollbars>
        <hasToolbar>false</hasToolbar>
        <height>600</height>
        <isResizable>true</isResizable>
        <linkType>page</linkType>
        <masterLabel>Proof Print</masterLabel>
        <openType>newWindow</openType>
        <page>ASI_CRM_JP_PaymentInvoice_PDFPage</page>
        <position>none</position>
        <protected>false</protected>
        <showsLocation>false</showsLocation>
        <showsStatus>false</showsStatus>
    </webLinks>
    <webLinks>
        <fullName>ASI_CRM_JP_Recall</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Recall</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>{!REQUIRESCRIPT(&quot;/soap/ajax/30.0/connection.js&quot;)} 
{!REQUIRESCRIPT(&quot;/soap/ajax/30.0/apex.js&quot;)} 
try { 
operate : { 
if(&apos;{! ASI_CRM_Payment_Invoice__c.ASI_CRM_Status__c }&apos; == &apos;Draft&apos;) { 
alert(&apos;You cannot recall because it is in Draft&apos;); 
break operate; 
} 

var queryString = &apos;SELECT Id, (SELECT Id, StepStatus, Comments FROM StepsAndWorkitems WHERE TargetObjectId = \&apos;{!ASI_CRM_Payment_Invoice__c.Id}\&apos; AND (StepStatus = \&apos;Approved\&apos; OR StepStatus = \&apos;Rejected\&apos;) ORDER BY CreatedDate DESC) FROM ProcessInstance WHERE TargetObjectId = \&apos;{!ASI_CRM_Payment_Invoice__c.Id}\&apos; ORDER BY CreatedDate DESC&apos;; 

var data = sforce.connection.query(queryString); 

if(data.getBoolean(&apos;done&apos;) &amp;&amp; data.getInt(&apos;size&apos;)&gt;=0) { 
var records = data.getArray(&apos;records&apos;); 
console.log(records); 
if(records.length &gt; 0) { 
if(records[0].StepsAndWorkitems != null) { 
alert(&apos;{!$Label.ASI_CRM_JP_RecallWarning}&apos;); 
} else { 
sforce.apex.execute(&quot;ASI_CRM_JP_ApprovalRecall&quot;,&quot;recallApproval&quot;,{recId:&quot;{!ASI_CRM_Payment_Invoice__c.Id}&quot;});
var invoice = new sforce.SObject(&apos;ASI_CRM_Payment_Invoice__c&apos;);  
invoice.id = &quot;{!ASI_CRM_Payment_Invoice__c.Id}&quot;; 
invoice.ASI_CRM_Status__c = &quot;Draft&quot;;
try { 
result = sforce.connection.update([invoice]);
} catch(error) { 
sforce.debug.log(error.faultstring); 
} 
window.location.reload(); 
} 
} else { 
alert(&apos;{!$Label.ASI_CRM_JP_RecallWarning}&apos;); 
} 
} 
} 
} catch(error) { 
alert(&apos;An error occurred. Details : &apos; + error); 
}</url>
    </webLinks>
    <webLinks>
        <fullName>ASI_CRM_JP_Set_Status_Draft</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Set Status Draft</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>{!requireScript(&quot;/soap/ajax/30.0/connection.js&quot;)} 
sforce.connection.sessionId = &quot;{!$Api.Session_ID}&quot;; 
var isComplete = false; 
var linesArray = sforce.connection.query(&quot;Select ASI_CRM_Contract_No__r.ASI_CRM_Status__c From ASI_CRM_Payment_Invoice_Line_Item__c Where ASI_CRM_Payment_Invoice__c = &apos;{!ASI_CRM_Payment_Invoice__c.Id}&apos;&quot;); 

lines = linesArray.getArray(&quot;records&quot;); 

for (var i = 0; i &lt; lines.length; i++) { 
   if (lines[i].ASI_CRM_Contract_No__r.ASI_CRM_Status__c == &quot;Complete&quot;) { 
      isComplete = true; 
   } 
} 

if( 
( 
   ({!ASI_CRM_Payment_Invoice__c.ASI_CRM_Sys_Allow_Set_Draft__c} == true || 
   &quot;{!$User.Id}&quot; == &quot;{!ASI_CRM_Payment_Invoice__c.ASI_CRM_Approver_1Id__c}&quot;) &amp;&amp; 
   &quot;{!ASI_CRM_Payment_Invoice__c.ASI_CRM_Status__c}&quot; == &quot;Approval In Progress&quot; &amp;&amp; 
   (&quot;{!ASI_CRM_Payment_Invoice__c.RecordType}&quot; == &quot;JP SPTD Cash Invoice Read-Only&quot; ||
   &quot;{!ASI_CRM_Payment_Invoice__c.RecordType}&quot; == &quot;JP Cash Invoice Read-Only&quot; || &quot;{!ASI_CRM_Payment_Invoice__c.RecordType}&quot; == &quot;JP Indirect Rebate Invoice Read-Only&quot;)
) 
|| 
(	
   ( &quot;{!ASI_CRM_Payment_Invoice__c.RecordType}&quot; == &quot;JP Indirect Rebate Invoice Read-Only&quot; || 
   &quot;{!ASI_CRM_Payment_Invoice__c.RecordType}&quot; == &quot;JP SPTD Cash Invoice Read-Only&quot;  ||
   &quot;{!ASI_CRM_Payment_Invoice__c.RecordType}&quot; == &quot;JP Cash Invoice Read-Only&quot;
   ) &amp;&amp; 
   {!ASI_CRM_Payment_Invoice__c.ASI_CRM_Sys_Allow_Set_Draft__c} == true &amp;&amp; 
  ( 
   !isComplete &amp;&amp; 
   {!ASI_CRM_Payment_Invoice__c.ASI_CRM_JDE_Synced__c} == false 
  ) 
) 
|| 
(&quot;{!ASI_CRM_Payment_Invoice__c.RecordType}&quot; == &quot;JP SPTD FOC Invoice Read-Only&quot; &amp;&amp; 
{!ASI_CRM_Payment_Invoice__c.ASI_CRM_Sys_Allow_Set_Draft__c} == true &amp;&amp; 
(!isComplete &amp;&amp; &quot;{!ASI_CRM_Payment_Invoice__c.ASI_CRM_Status__c}&quot; != &quot;Complete&quot;))) 
{ 
window.open(&quot;apex/ASI_CRM_JP_SetStatusDraftPage?id={!ASI_CRM_Payment_Invoice__c.Id}&quot;,&quot;_self&quot;); 
}else{ 
if(&quot;{!ASI_CRM_Payment_Invoice__c.ASI_CRM_Status__c}&quot; == &quot;Approval In Progress&quot; &amp;&amp; 
&quot;{!ASI_CRM_Payment_Invoice__c.RecordType}&quot; == &quot;JP SPTD Cash Invoice Read-Only&quot; ){ 
alert(&apos;{!$Label.ASI_CRM_JP_InvalidUser}&apos;); 
}else{ 
alert(&apos;{!$Label.ASI_CRM_JP_SetStatusDraftWarning}&apos;); 
} 
}</url>
    </webLinks>
    <webLinks>
        <fullName>ASI_CRM_JP_Submit_for_Approval</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Submit for Approval</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>{!requireScript(&quot;/soap/ajax/30.0/connection.js&quot;)}
sforce.connection.sessionId = &quot;{!$Api.Session_ID}&quot;; 

var currentHeader = sforce.connection.query(&quot;Select ASI_CRM_Status__c, Id from ASI_CRM_Payment_Invoice__c where Id = &apos;{!ASI_CRM_Payment_Invoice__c.Id}&apos;&quot;);

var currentHeaderDetails = sforce.connection.query(&quot;Select Id from ASI_CRM_Payment_Invoice_Line_Item__c where ASI_CRM_Payment_Invoice__c = &apos;{!ASI_CRM_Payment_Invoice__c.Id}&apos; &quot;); 

var records = currentHeader.getArray(&quot;records&quot;);
var detailRecords = currentHeaderDetails.getArray(&quot;records&quot;); 
var ownerId = &apos;{!ASI_CRM_Payment_Invoice__c.OwnerId}&apos;; 
var createdById = &apos;{!ASI_CRM_Payment_Invoice__c.CreatedById}&apos;; 
var currentUserId = &apos;{!$User.Id}&apos;; 
var isCorrectUser = true; 
if(currentUserId != ownerId &amp;&amp; currentUserId != createdById){ 
isCorrectUser = false; 
} 

if(isCorrectUser == false){
alert(&quot;{!$Label.ASI_CRM_JP_NotCorrectUser}&quot;); 
}else if (detailRecords == null || detailRecords.length &lt;= 0)
{
alert(&quot;{!$Label.ASI_CRM_JP_Approval_Error}&quot;);
}else if(&apos;{!ASI_CRM_Payment_Invoice__c.ASI_CRM_Actual_Amount__c}&apos; == &apos;0&apos;){
alert(&quot;{!$Label.ASI_CRM_JP_InvoiceLineZeroAmt}&quot;);
}else if(records[0].ASI_CRM_Status__c== &apos;Draft&apos;)
{
try {
var rec = new sforce.SObject(&apos;ASI_CRM_Payment_Invoice__c&apos;); 
rec.Id = &quot;{!ASI_CRM_Payment_Invoice__c.Id}&quot;; 
rec.ASI_CRM_Sys_Allow_Submit_Approval__c = true;
result = sforce.connection.update([rec]); 

window.open(&quot;/apex/ASI_SubmitApprovalPage?id={!ASI_CRM_Payment_Invoice__c.Id}&quot;,&quot;_self&quot;);

} catch(error) {
sforce.debug.log(error.faultcode);
sforce.debug.log(error.faultstring);
}
}</url>
    </webLinks>
</CustomObject>
