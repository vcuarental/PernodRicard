<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>Accept</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Accept</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Accept</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <allowInChatterGroups>false</allowInChatterGroups>
    <compactLayoutAssignment>SYSTEM</compactLayoutAssignment>
    <deploymentStatus>Deployed</deploymentStatus>
    <enableActivities>false</enableActivities>
    <enableBulkApi>true</enableBulkApi>
    <enableFeeds>false</enableFeeds>
    <enableHistory>true</enableHistory>
    <enableLicensing>false</enableLicensing>
    <enableReports>true</enableReports>
    <enableSearch>true</enableSearch>
    <enableSharing>true</enableSharing>
    <enableStreamingApi>true</enableStreamingApi>
    <externalSharingModel>ReadWrite</externalSharingModel>
    <fields>
        <fullName>ASI_CRM_Buyer_Company_Name__c</fullName>
        <externalId>false</externalId>
        <label>Buyer Company Name</label>
        <length>255</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_Buyer_GLN__c</fullName>
        <externalId>false</externalId>
        <label>Buyer GLN</label>
        <length>255</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_Control_Total_Line_Items__c</fullName>
        <externalId>false</externalId>
        <label>Control Total Of Line Items</label>
        <summaryForeignKey>ASI_CRM_EDI_Invoice_Item__c.ASI_CRM_EDI_Invoice_Header__c</summaryForeignKey>
        <summaryOperation>count</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Cust_PO__c</fullName>
        <externalId>false</externalId>
        <label>Cust. PO#</label>
        <length>255</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_Delivery_Date__c</fullName>
        <externalId>false</externalId>
        <label>Delivery Date</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_EDI_Completed__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <label>EDI Completed</label>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Has_Error__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <label>Has Error</label>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Invoice_Date__c</fullName>
        <externalId>false</externalId>
        <label>Invoice Date</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Invoice_Generation_Error__c</fullName>
        <externalId>false</externalId>
        <label>Invoice Generation Error</label>
        <length>32768</length>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>LongTextArea</type>
        <visibleLines>5</visibleLines>
    </fields>
    <fields>
        <fullName>ASI_CRM_Invoice_Number__c</fullName>
        <externalId>false</externalId>
        <label>Invoice Number</label>
        <length>255</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>ASI_CRM_Monetary_Amount__c</fullName>
        <externalId>false</externalId>
        <label>Monetary Amount</label>
        <summarizedField>ASI_CRM_EDI_Invoice_Item__c.ASI_CRM_Goods_Item_Total__c</summarizedField>
        <summaryForeignKey>ASI_CRM_EDI_Invoice_Item__c.ASI_CRM_EDI_Invoice_Header__c</summaryForeignKey>
        <summaryOperation>sum</summaryOperation>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Summary</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Ready_For_Interface__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <label>Ready For Interface</label>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>ASI_CRM_Sender_Identification__c</fullName>
        <externalId>false</externalId>
        <label>Sender Identification</label>
        <length>255</length>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <label>EDI Invoice Header</label>
    <listViews>
        <fullName>ASI_CRM_HK_Completed_EDI_Invoice</fullName>
        <columns>NAME</columns>
        <columns>ASI_CRM_Ready_For_Interface__c</columns>
        <columns>ASI_CRM_EDI_Completed__c</columns>
        <columns>ASI_CRM_Invoice_Generation_Error__c</columns>
        <columns>ASI_CRM_Buyer_Company_Name__c</columns>
        <columns>ASI_CRM_Buyer_GLN__c</columns>
        <columns>ASI_CRM_Control_Total_Line_Items__c</columns>
        <columns>ASI_CRM_Cust_PO__c</columns>
        <columns>ASI_CRM_Delivery_Date__c</columns>
        <columns>ASI_CRM_Invoice_Date__c</columns>
        <columns>ASI_CRM_Invoice_Number__c</columns>
        <columns>ASI_CRM_Monetary_Amount__c</columns>
        <filterScope>Everything</filterScope>
        <filters>
            <field>ASI_CRM_Ready_For_Interface__c</field>
            <operation>equals</operation>
            <value>1</value>
        </filters>
        <label>Completed EDI Invoice</label>
        <language>en_GB</language>
        <sharedTo>
            <roleAndSubordinates>ASI_HK_CRM</roleAndSubordinates>
        </sharedTo>
    </listViews>
    <listViews>
        <fullName>ASI_CRM_HK_Pending_EDI_Invoice</fullName>
        <columns>NAME</columns>
        <columns>ASI_CRM_Ready_For_Interface__c</columns>
        <columns>ASI_CRM_EDI_Completed__c</columns>
        <columns>ASI_CRM_Invoice_Generation_Error__c</columns>
        <columns>ASI_CRM_Buyer_Company_Name__c</columns>
        <columns>ASI_CRM_Buyer_GLN__c</columns>
        <columns>ASI_CRM_Control_Total_Line_Items__c</columns>
        <columns>ASI_CRM_Cust_PO__c</columns>
        <columns>ASI_CRM_Delivery_Date__c</columns>
        <columns>ASI_CRM_Invoice_Date__c</columns>
        <columns>ASI_CRM_Invoice_Number__c</columns>
        <columns>ASI_CRM_Monetary_Amount__c</columns>
        <filterScope>Everything</filterScope>
        <filters>
            <field>ASI_CRM_Ready_For_Interface__c</field>
            <operation>equals</operation>
            <value>0</value>
        </filters>
        <label>Pending EDI Invoice</label>
        <language>en_GB</language>
        <sharedTo>
            <roleAndSubordinates>ASI_HK_CRM</roleAndSubordinates>
        </sharedTo>
    </listViews>
    <listViews>
        <fullName>All</fullName>
        <columns>NAME</columns>
        <columns>ASI_CRM_Ready_For_Interface__c</columns>
        <columns>ASI_CRM_EDI_Completed__c</columns>
        <columns>ASI_CRM_Invoice_Generation_Error__c</columns>
        <columns>ASI_CRM_Buyer_Company_Name__c</columns>
        <columns>ASI_CRM_Buyer_GLN__c</columns>
        <columns>ASI_CRM_Control_Total_Line_Items__c</columns>
        <columns>ASI_CRM_Cust_PO__c</columns>
        <columns>ASI_CRM_Delivery_Date__c</columns>
        <columns>ASI_CRM_Invoice_Date__c</columns>
        <columns>ASI_CRM_Invoice_Number__c</columns>
        <columns>ASI_CRM_Monetary_Amount__c</columns>
        <filterScope>Everything</filterScope>
        <label>All</label>
        <language>en_GB</language>
        <sharedTo>
            <roleAndSubordinates>ASI_HK_CRM</roleAndSubordinates>
        </sharedTo>
    </listViews>
    <nameField>
        <displayFormat>EDIINV-{0000000}</displayFormat>
        <label>EDI Invoice Header Name</label>
        <trackHistory>false</trackHistory>
        <type>AutoNumber</type>
    </nameField>
    <pluralLabel>EDI Invoice Headers</pluralLabel>
    <recordTypeTrackHistory>false</recordTypeTrackHistory>
    <recordTypes>
        <fullName>ASI_CRM_HK_EDI_Invoice_Header</fullName>
        <active>true</active>
        <label>ASI CRM HK EDI Invoice Header</label>
    </recordTypes>
    <searchLayouts>
        <customTabListAdditionalFields>ASI_CRM_Ready_For_Interface__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>ASI_CRM_EDI_Completed__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>ASI_CRM_Invoice_Generation_Error__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>ASI_CRM_Buyer_Company_Name__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>ASI_CRM_Cust_PO__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>ASI_CRM_Delivery_Date__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>ASI_CRM_Invoice_Number__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>ASI_CRM_Monetary_Amount__c</customTabListAdditionalFields>
    </searchLayouts>
    <sharingModel>ReadWrite</sharingModel>
    <visibility>Public</visibility>
    <webLinks>
        <fullName>ASI_CRM_EDI_InvoiceHeader_Delete</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Delete</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>{!REQUIRESCRIPT(&apos;/soap/ajax/33.0/connection.js&apos;)}
{!REQUIRESCRIPT(&apos;/soap/ajax/33.0/apex.js&apos;)}

var Invoice_Header = new sforce.SObject(&quot;ASI_CRM_EDI_Invoice_Header__c&quot;);
var Invoice_HeaderId = &quot;{!ASI_CRM_EDI_Invoice_Header__c.Id}&quot;;
try{
    userApproval = confirm(
        &apos; Record will be Deleted. Continue ? &apos;
    );
    var callback = { onSuccess: function(e){alert(e); window.location.href = &quot;/&quot;; 
}, 
    onFailure: function(error){alert(&apos;fail : &apos;+error)} };
    if(userApproval == true)
    {    
       sforce.apex.execute(&quot;ASI_HK_CRM_DelButton&quot;,&quot;DelButton&quot;, 
       {Invoice_HeaderId:Invoice_HeaderId}, callback);
    }  
}
catch(e)
{
  alert(&apos;The delete operation could not be performed. Error Message: &apos; + e);
}</url>
    </webLinks>
    <webLinks>
        <fullName>ASI_CRM_HK_Confirm</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Confirm</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>{!requireScript(&quot;/soap/ajax/30.0/connection.js&quot;)}
{!REQUIRESCRIPT(&quot;/soap/ajax/30.0/apex.js&quot;)}
sforce.connection.sessionId = &quot;{!$Api.Session_ID}&quot;; 


try { 
	if ({!ASI_CRM_EDI_Invoice_Header__c.ASI_CRM_Ready_For_Interface__c == true}){ 
		alert(&quot;The Invoice has already been processed&quot;); 
	} 
	else { 
		var ediINV = new sforce.SObject(&quot;ASI_CRM_EDI_Invoice_Header__c&quot;); 
		
		ediINV.Id = &apos;{!ASI_CRM_EDI_Invoice_Header__c.Id}&apos;; 
		ediINV.ASI_CRM_Ready_For_Interface__c = true; 
		
		sforce.connection.update([ediINV]); 
		location.reload(true); 
	} 
} 
catch(error) { 
	sforce.debug.log(error.faultcode); 
	sforce.debug.log(error.faultstring); 
}</url>
    </webLinks>
    <webLinks>
        <fullName>ASI_CRM_Resync_to_ezTrade</fullName>
        <availability>online</availability>
        <displayType>button</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Resync to ezTrade</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <url>{!REQUIRESCRIPT(&quot;/soap/ajax/29.0/connection.js&quot;)} 
{!REQUIRESCRIPT(&quot;/soap/ajax/29.0/apex.js&quot;)} 


var SSCUsers = sforce.connection.query(&quot;SELECT Id FROM user WHERE UserRole.DeveloperName =&apos;ASI_HK_CRM_Shared_Service_Centre&apos;&quot;);
var SSCUsersFinal = SSCUsers.getArray(&apos;records&apos;);


var isValidUser=false;
var isReady=false;

  for (var i=0; i&lt; SSCUsersFinal.length; i++) {
    var record = SSCUsersFinal[i];
if((record.Id).substring(0, 15) == &apos;{!$User.Id}&apos;){
isValidUser=true;
}
  }

if ({!ASI_CRM_EDI_Invoice_Header__c.ASI_CRM_Ready_For_Interface__c} == true &amp;&amp; {!ASI_CRM_EDI_Invoice_Header__c.ASI_CRM_EDI_Completed__c} == true ) {
    isReady=true;
}


try {

    if(isValidUser){
        if(isReady){

            var ediHeader = new sforce.SObject(&quot;ASI_CRM_EDI_Invoice_Header__c&quot;);

            ediHeader.Id = &quot;{!ASI_CRM_EDI_Invoice_Header__c.Id}&quot;;
            ediHeader.ASI_CRM_EDI_Completed__c = false;
            var result = sforce.connection.update([ediHeader]);
        
            if (result[0].success == &quot;true&quot;) {
                location.reload();
            } else {
                alert(
                    &quot;An Error has Occurred. Error: &quot; +
                    result[0].errors.message
                );
            }

        } else {
            alert(&quot;This EDI Invoice is not yet ready for re-sync.&quot;);
        }

    } else {
        alert(&quot;You do not have enough privilege to perform this action.&quot;);
    }

} catch (e) {
    alert(
        &quot;An unexpected Error has Occurred. Error: &quot; +
        e
    );
}</url>
    </webLinks>
</CustomObject>
