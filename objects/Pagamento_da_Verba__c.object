<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>Accept</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Accept</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Accept</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <allowInChatterGroups>false</allowInChatterGroups>
    <compactLayoutAssignment>SYSTEM</compactLayoutAssignment>
    <deploymentStatus>Deployed</deploymentStatus>
    <description>Onda 02 Projeto - Objeto para realizar Pagamentos de Verbas (Contratos, Eventos, Ações Promocionais, Treinamentos)</description>
    <enableActivities>true</enableActivities>
    <enableBulkApi>true</enableBulkApi>
    <enableEnhancedLookup>false</enableEnhancedLookup>
    <enableFeeds>false</enableFeeds>
    <enableHistory>true</enableHistory>
    <enableLicensing>false</enableLicensing>
    <enableReports>true</enableReports>
    <enableSearch>true</enableSearch>
    <enableSharing>true</enableSharing>
    <enableStreamingApi>true</enableStreamingApi>
    <externalSharingModel>ControlledByParent</externalSharingModel>
    <fields>
        <fullName>Conta__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Conta</label>
        <referenceTo>Account</referenceTo>
        <relationshipLabel>Pagamentos das Verbas</relationshipLabel>
        <relationshipName>Pagamentos_das_Verbas</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Investimento_Bonifica_o_e_Pagamento__c</fullName>
        <externalId>false</externalId>
        <label>Investimento, Bonificação e Pagamento</label>
        <lookupFilter>
            <active>true</active>
            <booleanFilter>1</booleanFilter>
            <filterItems>
                <field>Investimento_Bonificacao_e_Pagamento__c.LAT_Contract__r.Account__c</field>
                <operation>equals</operation>
                <valueField>$Source.Conta__c</valueField>
            </filterItems>
            <isOptional>false</isOptional>
        </lookupFilter>
        <referenceTo>Investimento_Bonificacao_e_Pagamento__c</referenceTo>
        <relationshipLabel>Pagamentos das Verbas</relationshipLabel>
        <relationshipName>Pagamentos_das_Verbas</relationshipName>
        <relationshipOrder>0</relationshipOrder>
        <reparentableMasterDetail>true</reparentableMasterDetail>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>MasterDetail</type>
        <writeRequiresMasterRead>false</writeRequiresMasterRead>
    </fields>
    <fields>
        <fullName>LAT_Product__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Pagar com Produto</label>
        <referenceTo>LAT_Product__c</referenceTo>
        <relationshipLabel>Pagamentos das Verbas</relationshipLabel>
        <relationshipName>LAT_Pagamentos_das_Verbas</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>MensagemIntegracao__c</fullName>
        <externalId>false</externalId>
        <label>Mensagem Integração</label>
        <length>32768</length>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>LongTextArea</type>
        <visibleLines>5</visibleLines>
    </fields>
    <fields>
        <fullName>Nome_Fantasia__c</fullName>
        <externalId>false</externalId>
        <formula>Pagamento__r.Cliente__r.Name</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Nome Fantasia</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Numero_retorno_Pagamento__c</fullName>
        <description>Número de retorno do pagamento.</description>
        <externalId>false</externalId>
        <label>Número retorno Pagamento</label>
        <precision>10</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Pagamento__c</fullName>
        <externalId>false</externalId>
        <label>Pagamento</label>
        <referenceTo>Pagamento__c</referenceTo>
        <relationshipLabel>Pagamentos das Verbas</relationshipLabel>
        <relationshipName>Pagamentos_das_Verbas</relationshipName>
        <relationshipOrder>1</relationshipOrder>
        <reparentableMasterDetail>true</reparentableMasterDetail>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>MasterDetail</type>
        <writeRequiresMasterRead>false</writeRequiresMasterRead>
    </fields>
    <fields>
        <fullName>Produto_da_SV__c</fullName>
        <externalId>false</externalId>
        <formula>Investimento_Bonifica_o_e_Pagamento__r.Custo_Bonificado__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Custo Bonificado (SV)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>Sado_da_SV_R__c</fullName>
        <externalId>false</externalId>
        <formula>Investimento_Bonifica_o_e_Pagamento__r.Saldo_R__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Sado da SV (R$)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>Saldo_da_SV_Volume_cx__c</fullName>
        <externalId>false</externalId>
        <formula>Investimento_Bonifica_o_e_Pagamento__r.Saldo_Caixas__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Saldo da SV (CA)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Sistema__c</fullName>
        <externalId>false</externalId>
        <label>Sistema</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>ME</fullName>
                    <default>false</default>
                    <label>ME</label>
                </value>
                <value>
                    <fullName>SCV</fullName>
                    <default>false</default>
                    <label>SCV</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>Status__c</fullName>
        <externalId>false</externalId>
        <label>Status</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Pago</fullName>
                    <default>false</default>
                    <label>Pago</label>
                </value>
                <value>
                    <fullName>Aprovado Integrado</fullName>
                    <default>false</default>
                    <label>Aprovado Integrado</label>
                </value>
                <value>
                    <fullName>Cancelado</fullName>
                    <default>false</default>
                    <label>Cancelado</label>
                </value>
                <value>
                    <fullName>Devolvido</fullName>
                    <default>false</default>
                    <label>Devolvido</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>Tipo_de_Registro_Pai_del__c</fullName>
        <externalId>false</externalId>
        <formula>$RecordType.Name</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Tipo de Registro Pai</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>identificar_tipo_de_registroitem__c</fullName>
        <externalId>false</externalId>
        <formula>Pagamento__r.identificar_tipo_de_registro_del__c</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>identificar tipo de registro</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>pagar_com_produto__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Pagar com Produto</label>
        <referenceTo>Product2</referenceTo>
        <relationshipLabel>Pagamentos das Verbas</relationshipLabel>
        <relationshipName>Pagamentos_das_Verbas</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>trigger_on__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <label>trigger on</label>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>valor_a_pagar__c</fullName>
        <externalId>false</externalId>
        <label>Valor à Pagar (R$)</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>volume_a_pagar__c</fullName>
        <externalId>false</externalId>
        <label>Volume à Pagar (CA)</label>
        <precision>10</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <label>Pagamento da Verba</label>
    <nameField>
        <displayFormat>{00000000}</displayFormat>
        <label>Verba</label>
        <trackHistory>false</trackHistory>
        <type>AutoNumber</type>
    </nameField>
    <pluralLabel>Pagamentos das Verbas</pluralLabel>
    <recordTypeTrackHistory>false</recordTypeTrackHistory>
    <recordTypes>
        <fullName>Bonificacao_Produtos</fullName>
        <active>true</active>
        <description>Bonificação (Produtos)</description>
        <label>Bonificação (Produtos)</label>
        <picklistValues>
            <picklist>Sistema__c</picklist>
            <values>
                <fullName>ME</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>SCV</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Status__c</picklist>
            <values>
                <fullName>Aprovado Integrado</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Cancelado</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Devolvido</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Pago</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <recordTypes>
        <fullName>Dinheiro</fullName>
        <active>true</active>
        <description>Dinheiro</description>
        <label>Dinheiro</label>
        <picklistValues>
            <picklist>Sistema__c</picklist>
            <values>
                <fullName>ME</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>SCV</fullName>
                <default>false</default>
            </values>
        </picklistValues>
        <picklistValues>
            <picklist>Status__c</picklist>
            <values>
                <fullName>Aprovado Integrado</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Cancelado</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Devolvido</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Pago</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <searchLayouts/>
    <sharingModel>ControlledByParent</sharingModel>
    <validationRules>
        <fullName>BloqueiaClienteDiferente</fullName>
        <active>true</active>
        <description>bloqueia o cliente do pagamento diferente do cliente do item de investimento, bonificação e pagamento</description>
        <errorConditionFormula>Investimento_Bonifica_o_e_Pagamento__r.LAT_Contract__r.Account__r.Id &lt;&gt;    Pagamento__r.Cliente__r.Id</errorConditionFormula>
        <errorDisplayField>Investimento_Bonifica_o_e_Pagamento__c</errorDisplayField>
        <errorMessage>Só é possível associar itens do pagamento para o mesmo cliente do pagamento</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>BloqueiaPagamentoIBPEncerrada</fullName>
        <active>true</active>
        <description>não é possível criar um pagamento de uma IBP que esteja ENCERRADA.</description>
        <errorConditionFormula>OR( 

AND(trigger_on__c ,
         NOT(ISPICKVAL(Investimento_Bonifica_o_e_Pagamento__r.Status_da_Verba__c , &quot;Em preenchimento&quot;) )
         )
,

AND(
NOT( trigger_on__c ),   
OR( 
AND ( 
NOT( 
          ISPICKVAL( Status__c , &quot;Cancelado&quot;)),NOT(ISPICKVAL(Investimento_Bonifica_o_e_Pagamento__r.Status_da_Verba__c , &quot;Reservado&quot;))
), 
AND( ISNEW() , NOT(ISPICKVAL(Investimento_Bonifica_o_e_Pagamento__r.Status_da_Verba__c , &quot;Reservado&quot;))))
))</errorConditionFormula>
        <errorDisplayField>Investimento_Bonifica_o_e_Pagamento__c</errorDisplayField>
        <errorMessage>Não é possível pagar um &quot;Investimento, Bonificação e Pagamento&quot; com status diferente de &quot;Reservado&quot;.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>BloqueiaPagamentoMaiorSaldoIBP</fullName>
        <active>true</active>
        <description>Valor do pagamento não pode ser maior que saldo (R$ em dinheiro) da IBP.</description>
        <errorConditionFormula>AND($RecordType.DeveloperName = &apos;Dinheiro&apos; ,

OR(    

Sado_da_SV_R__c = 0,ISNEW() ),

AND( valor_a_pagar__c &gt;  Sado_da_SV_R__c, 
           ISNEW() ), 
AND( ISCHANGED(valor_a_pagar__c ),  
           valor_a_pagar__c &gt; (PRIORVALUE(valor_a_pagar__c)+ Sado_da_SV_R__c),         
           NOT(ISPICKVAL( Status__c , &quot;Cancelado&quot;)))
)</errorConditionFormula>
        <errorDisplayField>valor_a_pagar__c</errorDisplayField>
        <errorMessage>Solicitação de pagamento não pode ser Criada. SV não tem Saldo suficiente para pagamento</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>BloqueiaTipoIBP</fullName>
        <active>true</active>
        <errorConditionFormula>(  Investimento_Bonifica_o_e_Pagamento__r.Volume_Cx__c   &gt; 0)  &amp;&amp;  (identificar_tipo_de_registroitem__c = &quot;D&quot;)   || 

( Investimento_Bonifica_o_e_Pagamento__r.Valor_R__c  &gt; 0 )  &amp;&amp;  
(identificar_tipo_de_registroitem__c &lt;&gt; &quot;D&quot;)</errorConditionFormula>
        <errorDisplayField>Investimento_Bonifica_o_e_Pagamento__c</errorDisplayField>
        <errorMessage>Está verba não pode ser paga neste tipo de pagamento</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Valor_do_pagamento_maior_que_saldo_caixa</fullName>
        <active>true</active>
        <description>Valor_do_pagamento_maior_que_saldo_em caixas</description>
        <errorConditionFormula>AND($RecordType.DeveloperName = &apos;Dinheiro&apos; ,

ISCHANGED(volume_a_pagar__c ), 
 valor_a_pagar__c &gt; (PRIORVALUE(volume_a_pagar__c )+  Saldo_da_SV_Volume_cx__c ), 
NOT(ISPICKVAL( Status__c , &quot;Cancelado&quot;))

)</errorConditionFormula>
        <errorDisplayField>volume_a_pagar__c</errorDisplayField>
        <errorMessage>Solicitação de pagamento não pode ser criada. SV Complementar deverá ser feita. (Ultrapassa o Salda da SV).</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>data_de_pagamento_menor_que_a_data_previ</fullName>
        <active>true</active>
        <description>A data do pagamento não deve ser maior que a data prevista para pagamento.</description>
        <errorConditionFormula>Investimento_Bonifica_o_e_Pagamento__r.Data_de_Previsao_do_Pagamento__c  &gt;  Pagamento__r.Data_do_Pagamento__c</errorConditionFormula>
        <errorMessage>A data prevista para pagamento do item na SV não pode ser maior que a data do pagamento do Cabeçalho</errorMessage>
    </validationRules>
    <visibility>Public</visibility>
    <webLinks>
        <fullName>Novo_Item_de_Pagamento</fullName>
        <availability>online</availability>
        <displayType>massActionButton</displayType>
        <linkType>javascript</linkType>
        <masterLabel>Novo Item de Pagamento</masterLabel>
        <openType>onClickJavaScript</openType>
        <protected>false</protected>
        <requireRowSelection>false</requireRowSelection>
        <url>{!REQUIRESCRIPT(&quot;/soap/ajax/12.0/connection.js&quot;)}

var recType=&quot;{!Pagamento__c.RecordType}&quot;;
var recordType;

if ( recType==&apos;Dinheiro&apos;) 
  recordType = sforce.connection.query( &quot; select id from recordType  WHERE SobjectType = &apos;Pagamento_da_Verba__c&apos; and Name=&apos;Dinheiro&apos; &quot; );
else
  recordType = sforce.connection.query( &quot; select id from recordType  WHERE SobjectType = &apos;Pagamento_da_Verba__c&apos; and Name=&apos;Bonificação (Produtos)&apos; &quot; );


var records = recordType.getArray(&quot;records&quot;);
var recordtypeID = records[0].Id;

window.location = &apos;./a0i/e?CF00NQ00000011jjG={!Pagamento__c.Name}&amp;RecordType=&apos; +records[0].Id+&apos;&amp;CF00NQ00000012E3Q={!Pagamento__c.Cliente__c}&apos;;</url>
    </webLinks>
</CustomObject>
